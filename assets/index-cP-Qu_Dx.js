import{o as Ue}from"./rolldown-runtime-O3PcEg2i.js";import{a as Ie,c as Fe,f as Ct,i as ze,l as Te,n as ot,o as Re,r as Me,s as Ke,t as At}from"./charting-Du628nPI.js";import{t as Lt}from"./react-dom-CP8nFTBg.js";import{a as ie,c as ve,i as Et,n as Be,o as Ut,r as it,s as Pt,t as It}from"./react-router-BkJ9Ke1M.js";import{_ as Ft,a as ye,b as zt,c as le,d as fe,f as lt,g as Tt,h as Rt,i as Se,l as xe,m as ge,n as W,o as Mt,p as ue,r as ne,s as He,t as $t,u as se,v as Bt,y as $e}from"./firebase-CyM-FwhB.js";import{a as Ot,c as Yt,d as Gt,f as Vt,i as qt,l as Wt,n as Kt,o as Ht,r as Zt,s as Jt,t as Qt,u as pe}from"./react-ClX6llnI.js";import{C as Xt,D as es,E as ts,S as ss,T as as,_ as De,a as Ze,b as Ce,c as rs,d as ns,f as os,g as dt,h as Oe,i as is,l as ls,m as ds,n as ct,o as we,p as mt,r as Je,s as cs,t as Ae,u as Qe,v as Le,w as ms,x as Ee,y as ut}from"./lucide-icons-DqmPfajg.js";import{Bt as us,Ft as xs,Ht as hs,It as ps,Lt as gs,Rt as fs,Ut as ys,Vt as xt,Wt as bs,zt as js}from"./vendor-lcCWqw7K.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))x(y);new MutationObserver(y=>{for(const u of y)if(u.type==="childList")for(const j of u.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&x(j)}).observe(document,{childList:!0,subtree:!0});function o(y){const u={};return y.integrity&&(u.integrity=y.integrity),y.referrerPolicy&&(u.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?u.credentials="include":y.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function x(y){if(y.ep)return;y.ep=!0;const u=o(y);fetch(y.href,u)}})();var ws=Ue(Lt()),n=Ue(Ct()),ht=zt({apiKey:"AIzaSyBKs_0tOsl6OrDQOSTQDD4ghHv3PHLNFqo",authDomain:"money-saving-community.firebaseapp.com",projectId:"money-saving-community",storageBucket:"money-saving-community.firebasestorage.app",messagingSenderId:"1023049683110",appId:"1:1023049683110:web:fa5c36a12cb20440412467",measurementId:"G-1K6718VQSL"}),be=Tt(ht),U=Mt(ht),e=Ue(Vt()),pt=(0,n.createContext)();const he=()=>(0,n.useContext)(pt),vs=({children:r})=>{const[c,o]=(0,n.useState)(null),[x,y]=(0,n.useState)(!0),u=(p,m)=>Rt(be,p,m),j=async(p,m)=>{try{const D=await Bt(be,p,m),I=D.user,_=ne(U,"users",I.uid),P=await Se(_);if(P.exists()&&P.data().isBlocked===!0)throw await $e(be),new Error("Account is blocked");return D}catch(D){throw D}},b=()=>$e(be);(0,n.useEffect)(()=>Ft(be,p=>{o(p),y(!1)}),[]);const w={currentUser:c,signup:u,login:j,logout:b};return(0,e.jsx)(pt.Provider,{value:w,children:x?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r})};function Ns(){const r=(0,n.useRef)(),c=(0,n.useRef)(),{login:o}=he(),x=ve(),[y,u]=(0,n.useState)(""),[j,b]=(0,n.useState)(!1),w=async p=>{p.preventDefault();try{u(""),b(!0),await o(r.current.value,c.current.value),x("/dashboard")}catch(m){m.message==="Account is blocked"?x("/blocked"):u("Failed to sign in. Please check your credentials and try again.")}b(!1)};return(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-400 to-gray-100 p-4",children:(0,e.jsx)("div",{className:"w-full max-w-md",children:(0,e.jsxs)("form",{onSubmit:w,className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsx)("div",{className:"mx-auto w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,e.jsx)("span",{className:"text-white font-bold text-xl",children:"MB"})}),(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),y&&(0,e.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-6 text-sm",children:y}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,e.jsx)("input",{type:"email",id:"email",ref:r,placeholder:"Enter your email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,e.jsx)("input",{type:"password",id:"password",ref:c,placeholder:"Enter your password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsx)("button",{disabled:j,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-lg transition-colors duration-200 disabled:opacity-50",children:j?"Signing In...":"Sign In"}),(0,e.jsxs)("p",{className:"mt-6 text-center text-gray-600",children:["Don't have an account?"," ",(0,e.jsx)(Be,{to:"/signup",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Sign Up"})]})]})})})}function _s(){const r=(0,n.useRef)(),c=(0,n.useRef)(),o=(0,n.useRef)(),{signup:x}=he(),y=ve(),[u,j]=(0,n.useState)(""),[b,w]=(0,n.useState)(!1),p=async m=>{if(m.preventDefault(),c.current.value!==o.current.value)return j("Passwords do not match");if(c.current.value.length<6)return j("Password should be at least 6 characters");try{j(""),w(!0),await x(r.current.value,c.current.value),y("/dashboard")}catch{j("Failed to create an account. Please try again.")}w(!1)};return(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-400 to-gray-100 p-4",children:(0,e.jsx)("div",{className:"w-full max-w-md",children:(0,e.jsxs)("form",{onSubmit:p,className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsx)("div",{className:"mx-auto w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,e.jsx)("span",{className:"text-white font-bold text-xl",children:"MB"})}),(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign up to get started"})]}),u&&(0,e.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-6 text-sm",children:u}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,e.jsx)("input",{type:"email",id:"email",ref:r,placeholder:"Enter your email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,e.jsx)("input",{type:"password",id:"password",ref:c,placeholder:"Create a password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,e.jsx)("input",{type:"password",id:"confirmPassword",ref:o,placeholder:"Confirm your password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsx)("button",{disabled:b,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-lg transition-colors duration-200 disabled:opacity-50",children:b?"Creating Account...":"Sign Up"}),(0,e.jsxs)("p",{className:"mt-6 text-center text-gray-600",children:["Already have an account?"," ",(0,e.jsx)(Be,{to:"/login",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Sign In"})]})]})})})}var ks=()=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{children:"Create your porfile"}),(0,e.jsxs)("form",{action:"",children:[(0,e.jsx)("input",{type:"text",placeholder:"Your full name "}),(0,e.jsx)("input",{type:"email",placeholder:"Your email",name:"",id:""}),(0,e.jsx)("input",{type:"number",placeholder:"You phone number ",name:"",id:""}),(0,e.jsx)("input",{type:"number",placeholder:"You Age  ",name:"",id:""}),(0,e.jsxs)("option",{value:"",children:[(0,e.jsx)("select",{name:"male",id:"",children:"Male"}),(0,e.jsx)("select",{name:"female",id:"",children:"Female"})]}),(0,e.jsx)("input",{type:"file",placeholder:"Upload your photo"}),(0,e.jsx)("button",{type:"submit",children:"Create account"})]})]})}),Ss=ks,Ds=()=>{const[r,c]=(0,n.useState)(0),[o,x]=(0,n.useState)(0),[y,u]=(0,n.useState)(0),[j,b]=(0,n.useState)(0),[w,p]=(0,n.useState)(!1),[m,D]=(0,n.useState)(!1),[I,_]=(0,n.useState)(!1),[P,z]=(0,n.useState)([]),[L,g]=(0,n.useState)([]),[l,S]=(0,n.useState)([]),[T,M]=(0,n.useState)(!0),[C,$]=(0,n.useState)({width:window.innerWidth,height:window.innerHeight}),{t:A}=pe();(0,n.useEffect)(()=>{const N=()=>{$({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const f=N=>new Date(N).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",hour12:!0});(0,n.useEffect)(()=>{if(!U){_("Firestore instance not available"),M(!1);return}const N=se(W(U,"users")),q=le(N,ae=>{try{const ee=ae.docs.map(B=>({id:B.id,...B.data()})).sort((B,d)=>B.createdAt&&d.createdAt?d.createdAt.toMillis()-B.createdAt.toMillis():B.createdAt?-1:d.createdAt?1:0);S(ee),b(ee.length),M(!1),_(!1)}catch(ee){console.error("Error processing users snapshot:",ee),_("Failed to process users data"),M(!1)}},ae=>{console.error("Error fetching users:",ae),ae.code==="permission-denied"?_("Permission denied. Check Firestore rules."):_("Failed to load users: "+(ae.message||"Unknown error")),M(!1)});return()=>q()},[]);const s=({active:N,payload:q,label:ae})=>{if(N&&q&&q.length){const ee=q[0].payload,B=C.width<768;return(0,e.jsxs)("div",{className:`bg-white border border-gray-200 shadow-lg rounded-md ${B?"p-2":"p-4"}`,children:[(0,e.jsx)("p",{className:`font-medium text-gray-900 ${B?"text-xs":"text-sm"}`,children:f(ee.timestamp)}),(0,e.jsxs)("p",{className:`text-indigo-600 ${B?"text-xs":"text-sm"}`,children:["Deposits: $",ee.deposits.toFixed(2)]}),(0,e.jsxs)("p",{className:`text-red-600 ${B?"text-xs":"text-sm"}`,children:["loans: $",ee.loans.toFixed(2)]})]})}return null},a=(N,q,ae=20)=>{const ee=[];return N.forEach(B=>{const d=B.timestamp?.toDate?.()||new Date(B.timestamp);ee.push({timestamp:d,name:d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),deposits:Number(B.amount)||0,loans:0})}),q.forEach(B=>{const d=B.timestamp?.toDate?.()||new Date(B.timestamp);ee.push({timestamp:d,name:d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),deposits:0,loans:Number(B.amount)||0})}),ee.sort((B,d)=>B.timestamp-d.timestamp),ee.slice(-ae)};(0,n.useEffect)(()=>{if(!U){console.error("Firestore database instance not available"),p(!0),D(!0);return}let N=[],q=[];const ae=se(W(U,"deposits"),xe("timestamp","desc")),ee=le(ae,O=>{try{let R=0;N=[],O.forEach(G=>{const X=G.data();X.amount&&(R+=parseFloat(X.amount)),N.push({id:G.id,...X,timestamp:X.timestamp})}),c(R),p(!1);const te=a(N,q);z(te),g(G=>[...N.slice(0,3).map(X=>({id:X.id,type:"deposit",userId:X.userId,amount:X.amount,timestamp:X.timestamp?.toDate?.()||new Date})),...G].slice(0,6))}catch(R){console.error("Error processing deposits data:",R),p(!0)}},O=>{console.error("Error fetching deposits:",O),p(!0)}),B=se(W(U,"loans"),xe("timestamp","desc")),d=le(B,O=>{try{let R=0,te=0;q=[],O.forEach(X=>{const ce=X.data();ce.amount&&(R+=parseFloat(ce.amount)),ce.status==="pending"&&(te+=1),q.push({id:X.id,...ce,timestamp:ce.timestamp})}),x(R),u(te),D(!1);const G=a(N,q);z(G),g(X=>[...q.slice(0,3).map(ce=>({id:ce.id,type:"loan",userId:ce.userId,amount:ce.amount,status:ce.status,timestamp:ce.timestamp?.toDate?.()||new Date})),...X].slice(0,6))}catch(R){console.error("Error processing loans data:",R),D(!0)}},O=>{console.error("Error fetching loans:",O),D(!0)});return()=>{ee(),d()}},[]);const i=N=>`$${N.toFixed(2)}`,h=N=>new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=[{id:1,name:A("total_deposits"),value:w?A("n_a"):i(r),change:"+12.5%",changeType:"positive",icon:De,iconColor:"bg-indigo-500"},{id:2,name:A("total_loans"),value:m?A("n_a"):i(o),change:"+8.2%",changeType:"positive",icon:Le,iconColor:"bg-red-500"},{id:3,name:A("pending_loans"),value:m?A("n_a"):y,change:"+3.1%",changeType:"negative",icon:es,iconColor:"bg-yellow-500"},{id:4,name:A("total_users"),value:I?A("n_a"):j,change:"+5.4%",changeType:"positive",icon:ct,iconColor:"bg-green-500"}],F=(()=>{const N=C.width<768,q=C.width>=768&&C.width<1024;return{margin:{top:N?5:10,right:N?10:30,left:N?5:20,bottom:N?10:5},tickFontSize:N?8:q?10:12,interval:N?"preserveStartEnd":0,minTickGap:N?10:15,barSize:N?10:15,animationDuration:N?500:800,gridStrokeDasharray:N?"2 2":"3 3"}})();return T?(0,e.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:A("loading")})]})}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:k.map(N=>(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6 transition-all duration-200 hover:shadow-md",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:N.name}),(0,e.jsx)("p",{className:"mt-1 sm:mt-2 text-2xl sm:text-3xl font-bold text-gray-900",children:N.value})]}),(0,e.jsx)("div",{className:`p-2 sm:p-3 rounded-full ${N.iconColor}`,children:(0,e.jsx)(N.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})]}),(0,e.jsxs)("div",{className:"mt-3 sm:mt-4 flex items-center",children:[N.changeType==="positive"?(0,e.jsx)(as,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500"}):(0,e.jsx)(ts,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500"}),(0,e.jsx)("span",{className:`ml-1 text-xs sm:text-sm font-medium ${N.changeType==="positive"?"text-green-500":"text-red-500"}`,children:N.change}),(0,e.jsx)("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm text-gray-500",children:A("from_last_month")})]})]},N.id))}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,e.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:A("live_transactions")}),(0,e.jsx)("div",{className:"h-64 sm:h-80 overflow-x-auto",children:(0,e.jsx)(Te,{width:"100%",height:"100%",minWidth:300,children:(0,e.jsxs)(At,{data:P,margin:F.margin,children:[(0,e.jsx)(Re,{strokeDasharray:F.gridStrokeDasharray}),(0,e.jsx)(ze,{dataKey:"name",tick:{fontSize:F.tickFontSize},interval:F.interval,minTickGap:F.minTickGap}),(0,e.jsx)(Me,{tick:{fontSize:F.tickFontSize}}),(0,e.jsx)(Fe,{content:(0,e.jsx)(s,{})}),(0,e.jsx)(Ke,{dataKey:"deposits",fill:"#4f46e5",name:"Deposits",barSize:F.barSize,isAnimationActive:!0,animationDuration:F.animationDuration,animationEasing:"ease-in-out"}),(0,e.jsx)(Ke,{dataKey:"loans",fill:"#ef4444",name:"loans",barSize:F.barSize,isAnimationActive:!0,animationDuration:F.animationDuration,animationEasing:"ease-in-out"})]})})})]}),(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,e.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:A("transaction_trend")}),(0,e.jsx)("div",{className:"h-64 sm:h-80 overflow-x-auto",children:(0,e.jsx)(Te,{width:"100%",height:"100%",minWidth:300,children:(0,e.jsxs)(ot,{data:P,margin:F.margin,children:[(0,e.jsx)(Re,{strokeDasharray:F.gridStrokeDasharray}),(0,e.jsx)(ze,{dataKey:"name",tick:{fontSize:F.tickFontSize},interval:F.interval,minTickGap:F.minTickGap}),(0,e.jsx)(Me,{tick:{fontSize:F.tickFontSize}}),(0,e.jsx)(Fe,{content:(0,e.jsx)(s,{})}),(0,e.jsx)(Ie,{type:"monotone",dataKey:"deposits",stroke:"#4f46e5",activeDot:{r:C.width<768?4:8},name:"Deposits",strokeWidth:C.width<768?1.5:2,isAnimationActive:!0,animationDuration:F.animationDuration,animationEasing:"ease-in-out"}),(0,e.jsx)(Ie,{type:"monotone",dataKey:"loans",stroke:"#ef4444",name:"loans",strokeWidth:C.width<768?1.5:2,isAnimationActive:!0,animationDuration:F.animationDuration,animationEasing:"ease-in-out"})]})})})]})]}),(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[(0,e.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:A("recent_activity")}),(0,e.jsx)("button",{className:"text-sm font-medium text-indigo-600 hover:text-indigo-800",children:A("view_all")})]}),(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:A("type")}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:A("user_id")}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:A("amount")}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:A("status")}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:A("date")})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:L.length>0?L.map(N=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[N.type==="deposit"?(0,e.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)(De,{className:"h-3 w-3 sm:h-4 sm:w-4 text-indigo-600"})}):(0,e.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-red-100 flex items-center justify-center",children:(0,e.jsx)(Le,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-600"})}),(0,e.jsx)("span",{className:"ml-2 sm:ml-3 text-xs sm:text-sm font-medium text-gray-900 capitalize",children:A(N.type)})]})}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:N.userId||"N/A"}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:i(N.amount||0)}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:N.type==="deposit"?(0,e.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:A("completed")}):(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${N.status==="Pending"?"bg-yellow-100 text-yellow-800":N.status==="Accepted"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.status?A(N.status.toLowerCase()):A("pending")})}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:h(N.timestamp)})]},N.id)):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"5",className:"px-3 sm:px-6 py-3 sm:py-4 text-center text-xs sm:text-sm text-gray-500",children:A("no_recent_activity")})})})]})})]})]})},Xe=Ds,Cs=()=>{const{t:r}=pe(),{currentUser:c}=he(),[o,x]=(0,n.useState)([]),[y,u]=(0,n.useState)([]),[j,b]=(0,n.useState)(!0),[w,p]=(0,n.useState)(null),[m,D]=(0,n.useState)(""),[I,_]=(0,n.useState)(null),[P,z]=(0,n.useState)(!1),[L,g]=(0,n.useState)(new Set);(0,n.useEffect)(()=>{if(!c)return;const a=le(W(U,"users"),i=>{const h=[];i.forEach(k=>{h.push({id:k.id,...k.data()})}),u(h)},i=>{console.error("Error fetching users:",i)});return()=>a()},[c]),(0,n.useEffect)(()=>{if(!c)return;const a=le(W(U,"loans"),i=>{const h=[];i.forEach(k=>{h.push({id:k.id,...k.data()})}),h.sort((k,K)=>{const F=k.paymentTimestamp?.toDate?.()||new Date(0);return(K.paymentTimestamp?.toDate?.()||new Date(0))-F}),x(h),b(!1)},i=>{console.error("Error fetching paybacks:",i),b(!1)});return()=>a()},[c]);const l=o.map(a=>{const i=y.find(h=>h.uid===a.userId);return{...a,userName:i?.fullName||r("unknownUser"),userEmail:i?.email||r("noEmailProvided")}}),S=(a,i)=>{p({message:a,type:i}),setTimeout(()=>{p(null)},3e3)},T=async a=>{try{g(i=>new Set(i).add(a)),setTimeout(async()=>{const i=ne(U,"loans",a);await ue(i,{paymentStatus:"approved",adminReviewedAt:fe()}),setTimeout(()=>{g(h=>{const k=new Set(h);return k.delete(a),k})},300),S(r("paymentApprovedSuccessfully"),"success")},100)}catch(i){console.error("Error approving payment:",i),S(r("failedToApprovePayment"),"error"),g(h=>{const k=new Set(h);return k.delete(a),k})}},M=async a=>{try{g(i=>new Set(i).add(a)),setTimeout(async()=>{const i=ne(U,"loans",a);await ue(i,{paymentStatus:"denied",adminReviewedAt:fe()}),setTimeout(()=>{g(h=>{const k=new Set(h);return k.delete(a),k})},300),S(r("paymentDenied"),"error")},100)}catch(i){console.error("Error denying payment:",i),S(r("failedToDenyPayment"),"error"),g(h=>{const k=new Set(h);return k.delete(a),k})}},C=a=>{_(a),z(!0)},$=()=>{z(!1),_(null)},A=a=>{if(!a)return r("na");const i=a.toDate(),h=i.getDate().toString().padStart(2,"0"),k=(i.getMonth()+1).toString().padStart(2,"0"),K=i.getFullYear(),F=i.getHours().toString().padStart(2,"0"),N=i.getMinutes().toString().padStart(2,"0");return`${h}/${k}/${K} ${F}:${N}`},f=l.filter(a=>{if(a.status!=="accepted")return!1;const i=a.userName||"",h=m.toLowerCase();return i.toLowerCase().includes(h)}),s=l.filter(a=>a.status==="accepted"&&a.paymentStatus==="pending").length;return(0,e.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[w&&(0,e.jsx)("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transform transition-all duration-300 ${w.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:w.message}),(0,e.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:r("loanRepaymentManagement")}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:r("reviewManageLoanRepayments")})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(we,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:r("searchByUserName"),value:m,onChange:a=>D(a.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:r("acceptedLoanRepayments")}),(0,e.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[s," ",r("pending")]})]}),j?(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mb-4"}),(0,e.jsx)("p",{className:"text-gray-600",children:r("loadingLoanRepayments")})]}):f.length===0?(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("div",{className:"mx-auto h-16 w-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:(0,e.jsx)(we,{className:"h-8 w-8 text-gray-400"})}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:r("noAcceptedLoansFound")}),(0,e.jsx)("p",{className:"text-gray-500",children:r("noAcceptedLoansAtMoment")})]}):(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(a=>{const i=L.has(a.id),h=!a.paymentStatus||a.paymentStatus==="pending";return(0,e.jsx)("div",{className:`bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md ${i?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:(0,e.jsxs)("div",{className:"p-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-indigo-800 font-medium",children:a.userName?.charAt(0)?.toUpperCase()||r("unknownUser").charAt(0)?.toUpperCase()||"U"})}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:a.userName||r("unknownUser")}),(0,e.jsx)("p",{className:"text-sm text-gray-500",children:a.userEmail||r("noEmailProvided")})]})]}),(0,e.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                            ${a.paymentStatus==="approved"?"bg-green-100 text-green-800":a.paymentStatus==="denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a.paymentStatus?r(a.paymentStatus):r("pending")})]}),(0,e.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:r("loanAmount")}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",a.amount]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:r("interest10Percent")}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",(a.amount*.1).toFixed(2)]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:r("totalPayable")}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",a.totalPayable?.toFixed(2)||(a.amount*1.1).toFixed(2)]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:r("paidAmount")}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",a.paidAmount]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:r("paymentDate")}),(0,e.jsx)("span",{className:"text-sm font-medium text-gray-900",children:A(a.paymentTimestamp)})]}),a.adminReviewedAt&&(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:r("reviewedAt")}),(0,e.jsx)("span",{className:"text-sm font-medium text-gray-900",children:A(a.adminReviewedAt)})]})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("span",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("proofOfPayment")}),a.proofImageUrl?(0,e.jsxs)("div",{className:"relative w-full h-32 rounded-lg overflow-hidden cursor-pointer border border-gray-200",onClick:()=>C(a.proofImageUrl),children:[(0,e.jsx)("img",{src:a.proofImageUrl,alt:r("proofOfPayment"),className:"w-full h-full object-cover"}),(0,e.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:(0,e.jsx)(Oe,{className:"h-6 w-6 text-white"})})]}):(0,e.jsx)("div",{className:"w-full h-32 rounded-lg bg-gray-100 flex items-center justify-center border border-gray-200",children:(0,e.jsx)("span",{className:"text-gray-500 text-sm",children:r("noProofProvided")})})]}),(0,e.jsxs)("div",{className:"flex space-x-3",children:[(0,e.jsxs)("button",{className:`flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg transition-colors ${h?"text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500":"text-gray-400 bg-gray-100 cursor-not-allowed"}`,onClick:()=>T(a.id),disabled:!h,children:[(0,e.jsx)(ss,{className:"-ml-1 mr-2 h-4 w-4"}),r("approve")]}),(0,e.jsxs)("button",{className:`flex-1 inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-lg transition-colors ${h?"text-gray-700 bg-white border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500":"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed"}`,onClick:()=>M(a.id),disabled:!h,children:[(0,e.jsx)(Ae,{className:"-ml-1 mr-2 h-4 w-4"}),r("deny")]})]})]})},a.id)})})]})]}),P&&(0,e.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:$,children:(0,e.jsxs)("div",{className:"relative max-w-4xl max-h-full",onClick:a=>a.stopPropagation(),children:[(0,e.jsx)("button",{className:"absolute -top-12 right-0 text-white hover:text-gray-300 focus:outline-none",onClick:$,children:(0,e.jsx)(Ae,{className:"h-8 w-8"})}),(0,e.jsx)("img",{src:I,alt:r("proofOfPayment"),className:"max-w-full max-h-screen rounded-lg"})]})})]})},As=Cs,Ls=()=>{const[r,c]=(0,n.useState)([]),[o,x]=(0,n.useState)([]),[y,u]=(0,n.useState)(!0),[j,b]=(0,n.useState)(null),[w,p]=(0,n.useState)(""),[m,D]=(0,n.useState)("All"),[I,_]=(0,n.useState)(null),[P,z]=(0,n.useState)(!1),[L,g]=(0,n.useState)({}),{t:l}=pe();(0,n.useEffect)(()=>{const s=se(W(U,"users")),a=le(s,i=>{const h=i.docs.map(k=>({id:k.id,...k.data()}));x(h)},i=>{console.error("Error loading users:",i),b(l("error_load_users")+i.message)});return()=>a()},[]),(0,n.useEffect)(()=>{if(!U){b(l("error_firestore_instance")),u(!1);return}const s=se(W(U,"deposits"),xe("timestamp","desc")),a=le(s,i=>{try{const h=i.docs.map(k=>({id:k.id,...k.data()}));c(h),u(!1)}catch(h){console.error("Error processing deposits snapshot:",h),b(l("error_process_deposits_data")),u(!1)}},i=>{console.error("Error fetching deposits:",i),b(l("error_load_deposits")+i.message),u(!1)});return()=>a()},[]);const S=s=>o.find(a=>a.id===s)||{name:l("unknown_user"),email:""},T=s=>{if(!s)return l("n_a");try{return(s.toDate?s.toDate():new Date(s)).toLocaleString()}catch{return l("invalid_date")}},M=s=>{switch(s?.toLowerCase()){case"accepted":return"bg-green-100 text-green-800";case"denied":case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},C=async(s,a)=>{g(i=>({...i,[s]:!0}));try{await ue(ne(U,"deposits",s),{status:a,updatedAt:new Date})}catch(i){console.error("Error updating deposit status:",i),b(l("error_update_deposit_status")+i.message)}finally{g(i=>({...i,[s]:!1}))}},$=s=>{window.open(s,"_blank")},A=(s,a)=>{const i=document.createElement("a");i.href=s,i.download=a||"proof-image.jpg",document.body.appendChild(i),i.click(),document.body.removeChild(i)},f=r.filter(s=>{const a=S(s.userId),i=w.toLowerCase(),h=!w||a.name&&a.name.toLowerCase().includes(i)||a.email&&a.email.toLowerCase().includes(i)||s.message&&s.message.toLowerCase().includes(i),k=m==="All"||s.status===m.toLowerCase();return h&&k});return y?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:l("loading")})]})}):(0,e.jsxs)("div",{className:"p-4 md:p-6",children:[(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:l("deposits")}),(0,e.jsx)("p",{className:"mt-1 text-gray-600",children:l("deposits_page_description")})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:(0,e.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(we,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:l("search_deposits"),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:w,onChange:s=>p(s.target.value)})]})}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)(mt,{className:"h-5 w-5 text-gray-400"}),(0,e.jsxs)("select",{value:m,onChange:s=>D(s.target.value),className:"block px-3 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,e.jsx)("option",{value:"All",children:l("all_statuses")}),(0,e.jsx)("option",{value:"Pending",children:l("pending")}),(0,e.jsx)("option",{value:"Accepted",children:l("accepted")}),(0,e.jsx)("option",{value:"Denied",children:l("denied")})]})]})]})}),j&&(0,e.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)(Ce,{className:"h-5 w-5 text-red-400"})}),(0,e.jsx)("div",{className:"ml-3",children:(0,e.jsx)("p",{className:"text-sm text-red-700",children:j})})]})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)(De,{className:"h-6 w-6 text-green-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:l("total_deposits")}),(0,e.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.reduce((s,a)=>s+(parseFloat(a.amount)||0),0).toFixed(2)]})]})]})}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,e.jsx)(ut,{className:"h-6 w-6 text-yellow-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:l("pending_deposits")}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(s=>s.status==="pending").length})]})]})}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,e.jsx)(Ee,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:l("accepted_deposits")}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(s=>s.status==="accepted").length})]})]})})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("user")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("amount")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("status")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("date")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("message")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("proof")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("actions")})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.length>0?f.map(s=>{const a=S(s.userId);return(0,e.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-indigo-800 font-medium",children:a.name?.charAt(0)?.toUpperCase()||"U"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name||l("unknown_user")}),(0,e.jsx)("div",{className:"text-sm text-gray-500",children:a.email||l("n_a")})]})]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"text-sm text-gray-900 font-medium",children:["$",s.amount||"0.00"]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${M(s.status)}`,children:s.status||l("unknown")})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T(s.timestamp)}),(0,e.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",title:s.message,children:s.message||l("n_a")}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.proofImage?(0,e.jsxs)("div",{className:"flex space-x-2",children:[(0,e.jsx)("button",{onClick:()=>$(s.proofImage),className:"text-indigo-600 hover:text-indigo-900",title:l("view"),children:(0,e.jsx)(Oe,{className:"h-5 w-5"})}),(0,e.jsx)("button",{onClick:()=>A(s.proofImage,`deposit-proof-${s.id}.jpg`),className:"text-indigo-600 hover:text-indigo-900",title:l("download"),children:(0,e.jsx)(dt,{className:"h-5 w-5"})})]}):l("n_a")}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.status==="pending"&&(0,e.jsxs)("div",{className:"flex space-x-2",children:[(0,e.jsx)("button",{onClick:()=>C(s.id,"accepted"),disabled:L[s.id],className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:l("approve"),children:L[s.id]?(0,e.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):(0,e.jsx)(Ee,{className:"h-4 w-4"})}),(0,e.jsx)("button",{onClick:()=>C(s.id,"denied"),disabled:L[s.id],className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:l("deny"),children:L[s.id]?(0,e.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):(0,e.jsx)(Ce,{className:"h-4 w-4"})})]})})]},s.id)}):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:l(w||m!=="All"?"no_deposits_match":"no_deposits_found")})})})]})})})]})},Es=Ls;function Us(){const{currentUser:r}=he(),[c,o]=(0,n.useState)([]),[x,y]=(0,n.useState)(""),[u,j]=(0,n.useState)(!0),[b,w]=(0,n.useState)({}),[p,m]=(0,n.useState)({}),[D,I]=(0,n.useState)(null),[_,P]=(0,n.useState)(null),z=(0,n.useRef)(),L=(0,n.useRef)(),g=(0,n.useRef)(null),l="dyprdh3rs",S="money-saving",T=s=>{if(!s)return!1;const a=s.toDate?s.toDate():new Date(s);return(new Date-a)/(1e3*60)<2};(0,n.useEffect)(()=>{if(!r)return;(async()=>{try{const i=ne(U,"users",r.uid);await ue(i,{isOnline:!0,lastActive:fe()})}catch(i){console.error("Error setting user online:",i)}})(),L.current=setInterval(async()=>{try{const i=ne(U,"users",r.uid);await ue(i,{lastActive:fe()})}catch(i){console.error("Error updating lastActive:",i)}},3e4);const a=async()=>{try{const i=ne(U,"users",r.uid);await ue(i,{isOnline:!1,lastActive:fe()})}catch(i){console.error("Error setting user offline:",i)}};return window.addEventListener("beforeunload",a),()=>{clearInterval(L.current),window.removeEventListener("beforeunload",a),r&&(async()=>{try{const h=ne(U,"users",r.uid);await ue(h,{isOnline:!1,lastActive:fe()})}catch(h){console.error("Error setting user offline:",h)}})()}},[r]),(0,n.useEffect)(()=>{if(!r){j(!1);return}const s=se(W(U,"messages"),xe("timestamp","asc"));return le(s,a=>{o(a.docs.map(i=>({id:i.id,...i.data()}))),j(!1)})},[r]),(0,n.useEffect)(()=>{if(r)return le(W(U,"users"),s=>{const a={},i={};s.forEach(h=>{const k=h.data();a[h.id]=k,T(k.lastActive)&&(i[h.id]={displayName:k.displayName||k.email?.split("@")[0]||"Unknown",isOnline:k.isOnline||!1,lastActive:k.lastActive})}),m(a),w(i)})},[r]);const M=async s=>{const a=new FormData;a.append("file",s),a.append("upload_preset",S);try{return(await(await fetch(`https://api.cloudinary.com/v1_1/${l}/image/upload`,{method:"POST",body:a})).json()).secure_url}catch(i){throw console.error("Error uploading image:",i),i}},C=s=>{const a=s.target.files[0];if(!a)return;if(!a.type.match("image.*")){alert("Please select an image file");return}I(a);const i=URL.createObjectURL(a);P(i)},$=()=>{I(null),P(null),g.current&&(g.current.value="")},A=async s=>{if(s.preventDefault(),!(!r||!x.trim()&&!D))try{let a=null;D&&(a=await M(D)),await $t(W(U,"messages"),{text:x,imageUrl:a,userId:r.uid,userName:r.email?r.email.split("@")[0]:"Anonymous",timestamp:fe()}),y(""),I(null),P(null),g.current&&(g.current.value="")}catch(a){console.error("Error sending message:",a),alert("Failed to send message. Please try again.")}};(0,n.useEffect)(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[c]);const f=s=>s?s.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return r?(0,e.jsxs)("div",{className:"flex flex-col h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans text-gray-800 max-w-4xl mx-auto w-full",children:[(0,e.jsx)("div",{className:"chat-header",children:(0,e.jsxs)("div",{className:"chat-header-avatar",children:[r?.email?.charAt(0).toUpperCase()||"U",(0,e.jsx)("div",{className:`online-status-indicator ${T(p[r?.uid]?.lastActive)?"online":"offline"}`,title:T(p[r?.uid]?.lastActive)?"Online":"Offline"})]})}),(0,e.jsx)("div",{className:"mx-4 mb-2 bg-white/70 backdrop-blur-md rounded-xl shadow-sm p-3",children:(0,e.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,e.jsxs)("span",{className:"text-xs text-gray-600",children:[Object.keys(b).length," online"]}),(0,e.jsx)("br",{}),(0,e.jsxs)("p",{className:"text-sm text-gray-500",children:[c.length," Messages"]})]})}),(0,e.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 max-w-full",children:[u?(0,e.jsx)("div",{className:"flex justify-center p-6",children:(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-bounce"}),(0,e.jsx)("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0.16s"}}),(0,e.jsx)("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0.32s"}})]})}):c.length===0?(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500 p-10 bg-white rounded-2xl shadow-lg m-5",children:[(0,e.jsx)("div",{className:"text-4xl mb-3 opacity-70",children:"ðŸ’¬"}),(0,e.jsx)("div",{className:"text-sm text-center max-w-xs",children:"No messages yet. Start a conversation!"})]}):c.map(s=>(0,e.jsxs)("div",{className:`flex ${s.userId===r.uid?"justify-end":"justify-start"} animate-fade-in`,children:[s.userId!==r.uid&&(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center bg-white text-indigo-600 font-bold flex-shrink-0 shadow-sm mr-2",children:s.userName?s.userName.charAt(0).toUpperCase():"U"}),(0,e.jsx)("div",{className:`absolute bottom-[60px] right-7 w-3.5 h-3.5 rounded-full border-2 border-white ${b[s.userId]?"bg-green-500":"bg-gray-400"}`,title:b[s.userId]?"Online":"Offline"})]}),(0,e.jsxs)("div",{className:`max-w-[72%] p-3 rounded-2xl relative shadow-md transition-all duration-300 hover:shadow-lg ${s.userId===r.uid?"bg-gradient-to-br from-indigo-50 to-indigo-100 border border-indigo-100 rounded-br-md":"bg-white border border-gray-200 rounded-bl-md"}`,children:[s.imageUrl&&(0,e.jsx)("div",{className:"message-image",children:(0,e.jsx)("img",{src:s.imageUrl,alt:"Uploaded content",style:{maxWidth:"100%",width:"200px",height:"200px",borderRadius:"8px",marginBottom:"8px"}})}),s.text&&(0,e.jsx)("div",{className:"text-sm text-gray-800 leading-relaxed",children:s.text}),(0,e.jsx)("div",{className:"text-xs text-gray-400 text-right mt-2",children:f(s.timestamp)})]}),s.userId===r.uid&&(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-indigo-600 text-white font-bold flex-shrink-0 shadow-sm ml-2",children:s.userName?s.userName.charAt(0).toUpperCase():"U"}),(0,e.jsx)("div",{className:`absolute bottom-[60px] right-6 w-3.5 h-3.5 rounded-full border-2 border-white ${T(p[r?.uid]?.lastActive)?"bg-green-500":"bg-gray-400"}`,title:T(p[r?.uid]?.lastActive)?"Online":"Offline"})]})]},s.id)),(0,e.jsx)("div",{ref:z})]}),(0,e.jsxs)("form",{onSubmit:A,className:"flex flex-col p-4 gap-3 sticky bottom-0 bg-white/70 backdrop-blur-md border-t border-gray-200",children:[_&&(0,e.jsxs)("div",{className:"image-preview-container",children:[(0,e.jsx)("img",{src:_,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover",borderRadius:"8px"}}),(0,e.jsx)("div",{style:{marginLeft:"12px",flex:1,minWidth:0},children:(0,e.jsx)("p",{style:{margin:0,fontSize:"0.85rem",color:"#4b5563",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:D?.name})}),(0,e.jsx)("button",{type:"button",onClick:$,className:"remove-image-button",style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#ef4444"},children:"Ã—"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"flex-1 flex items-center bg-white p-2 pl-4 rounded-full shadow-md transition-all duration-300 focus-within:shadow-lg focus-within:border focus-within:border-indigo-500",children:(0,e.jsx)("input",{type:"text",className:"flex-1 border-0 outline-none p-2 bg-transparent text-sm text-gray-800",placeholder:"Type a message...",value:x,onChange:s=>y(s.target.value)})}),(0,e.jsx)("input",{type:"file",ref:g,onChange:C,accept:"image/*",style:{display:"none"}}),(0,e.jsx)("button",{type:"button",className:"w-11 h-11 rounded-full flex items-center justify-center bg-white text-indigo-600 border-none cursor-pointer shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0",onClick:()=>g.current.click(),children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,e.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z",clipRule:"evenodd"})})}),(0,e.jsx)("button",{type:"submit",className:"w-11 h-11 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-indigo-600 text-white border-none cursor-pointer shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:!x.trim()&&!D,children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4.5 h-4.5",children:(0,e.jsx)("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"})})})]})]})]}):(0,e.jsx)("div",{className:"flex flex-col h-screen bg-gradient-to-b from-gray-50 to-gray-100 items-center justify-center font-sans text-gray-800",children:(0,e.jsxs)("div",{className:"text-center p-6 bg-white rounded-2xl shadow-lg max-w-md",children:[(0,e.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Please log in to use chat"}),(0,e.jsx)("p",{className:"text-gray-600",children:"You need to be logged in to send and receive messages."})]})})}var Ps=()=>(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Us,{})}),Is=Ps,Fs=()=>{const{i18n:r}=pe(),c=x=>{r.changeLanguage(x),localStorage.setItem("i18nextLng",x),x==="ar"?(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar")):(document.documentElement.setAttribute("dir","ltr"),document.documentElement.setAttribute("lang",x))},o=()=>r.language||"en";return(0,e.jsxs)("div",{className:"relative inline-block text-left",children:[(0,e.jsxs)("select",{value:o(),onChange:x=>c(x.target.value),className:"block appearance-none w-full bg-white border border-gray-300 hover:border-gray-400 px-4 py-2 pr-8 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[(0,e.jsx)("option",{value:"en",children:"English"}),(0,e.jsx)("option",{value:"ar",children:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"}),(0,e.jsx)("option",{value:"rw",children:"Kinyarwanda"})]}),(0,e.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,e.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,e.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})},zs=Fs,Ts=()=>{const[r,c]=(0,n.useState)(!1),{currentUser:o}=he(),x=Pt(),y=ve(),{logout:u}=he(),{t:j}=pe(),b=async()=>{try{await u(),y("/login")}catch(m){console.error("Failed to log out",m)}};(0,n.useEffect)(()=>{const m=()=>{window.innerWidth>=1024&&c(!1)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),(0,n.useEffect)(()=>{const m=D=>{r&&!D.target.closest(".sidebar-content")&&!D.target.closest(".sidebar-toggle")&&c(!1)};return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[r]),(0,n.useEffect)(()=>{c(!1)},[x.pathname]);const w=[{name:j("dashboard"),href:"/dashboard",icon:ns},{name:j("deposits"),href:"/deposits",icon:cs},{name:j("loans"),href:"/loans",icon:os},{name:j("chat"),href:"/chat",icon:rs},{name:j("users"),href:"/users",icon:ct},{name:j("payback"),href:"/payback",icon:ms},{name:j("settings"),href:"/settings",icon:Ze},{name:j("block_users"),href:"/admin-users",icon:Ze},{name:j("annual_reports"),href:"/annual-reports",icon:Le}],p=m=>x.pathname===m;return(0,e.jsxs)("div",{className:"flex h-screen w-screen max-w-full bg-gray-50",children:[(0,e.jsx)("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 sidebar-content`,children:(0,e.jsxs)("div",{className:"flex flex-col h-full",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-white font-bold",children:"MB"})})}),(0,e.jsx)("div",{className:"ml-3",children:(0,e.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:j("moneybox")})})]}),(0,e.jsx)("button",{onClick:()=>c(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:(0,e.jsx)(Ae,{size:20})})]}),(0,e.jsx)("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",children:(0,e.jsx)("ul",{className:"space-y-1",children:w.map(m=>(0,e.jsx)("li",{children:(0,e.jsxs)(Be,{to:m.href,className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${p(m.href)?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-100"}`,children:[(0,e.jsx)(m.icon,{className:"mr-3 h-5 w-5"}),m.name]})},m.name))})}),(0,e.jsxs)("div",{className:"px-4 py-6 border-t border-gray-200",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,e.jsx)("div",{className:"w-11 h-11 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-indigo-600 text-white font-bold shadow-md",children:o?.email?.charAt(0).toUpperCase()||"U"})})}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Admin  is           ",o?.email?.slice(0,5).toUpperCase()||"U"]}),(0,e.jsx)("p",{className:"text-xs text-gray-500",children:o?.email?.slice(0,104).toLowerCase()||"U"})]})]}),(0,e.jsxs)("button",{onClick:b,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[(0,e.jsx)(Qe,{className:"mr-3 h-5 w-5"}),j("logout")]})]})]})}),(0,e.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,e.jsx)("header",{className:"bg-white shadow-sm z-10",children:(0,e.jsxs)("div",{className:"flex items-center justify-between h-16 px-6",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("button",{onClick:()=>c(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 mr-4 sidebar-toggle",children:(0,e.jsx)(ls,{size:20})}),(0,e.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:[x.pathname==="/dashboard"&&"ðŸ’° Dashboard",x.pathname==="/deposits"&&"ðŸ’° Deposits Overview",x.pathname==="/loans"&&"ðŸ’¸ loans Overview",x.pathname==="/users"&&"ðŸ‘¥ Users Overview",x.pathname==="/chat"&&"ðŸ‘¥ Users Overview"]})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,e.jsx)(zs,{}),(0,e.jsxs)("button",{onClick:b,className:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,e.jsx)(Qe,{className:"mr-2 h-5 w-5"}),j("logout")]})]})]})}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-6",children:(0,e.jsx)("div",{className:"h-full w-full",children:(0,e.jsx)(Et,{})})})]})]})},Rs=Ts,Ms=()=>{const[r,c]=(0,n.useState)([]),[o,x]=(0,n.useState)([]),[y,u]=(0,n.useState)(!0),[j,b]=(0,n.useState)(!1),[w,p]=(0,n.useState)(null),[m,D]=(0,n.useState)(""),[I,_]=(0,n.useState)("All"),[P,z]=(0,n.useState)({}),[L,g]=(0,n.useState)({}),{t:l}=pe();(0,n.useEffect)(()=>{const f=se(W(U,"users")),s=le(f,a=>{const i=a.docs.map(h=>({id:h.id,...h.data()}));x(i),b(!0),console.log(`Loaded ${i.length} users`)},a=>{console.error("Error loading users:",a),p(l("error_load_users")+a.message)});return()=>s()},[]),(0,n.useEffect)(()=>{if(!U){p(l("error_firestore_instance")),u(!1);return}const f=se(W(U,"loans"),xe("timestamp","desc")),s=le(f,a=>{try{const i=a.docs.map(h=>({id:h.id,...h.data()}));c(i),u(!1)}catch(i){console.error("Error processing loans snapshot:",i),p(l("error_process_loans_data")),u(!1)}},a=>{console.error("Error fetching loans:",a),p(l("error_load_loans")+a.message),u(!1)});return()=>s()},[]);const S=f=>o.find(s=>s.id===f)||{name:l("unknown_user"),email:""},T=f=>{if(!f)return l("n_a");try{return(f.toDate?f.toDate():new Date(f)).toLocaleString()}catch{return l("invalid_date")}},M=f=>{switch(f?.toLowerCase()){case"accepted":return"bg-green-100 text-green-800";case"denied":case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},C=async(f,s,a=null)=>{z(i=>({...i,[f]:!0}));try{const i={status:s,updatedAt:fe()};s==="accepted"&&a&&(i.receiptFileName=a.name),await ue(ne(U,"loans",f),i)}catch(i){console.error("Error updating loan status:",i),p(l("error_update_loan_status")+i.message)}finally{z(i=>({...i,[f]:!1})),g(i=>{const h={...i};return delete h[f],h})}},$=(f,s)=>{g(a=>({...a,[f]:s}))},A=r.filter(f=>{const s=S(f.userId),a=m.toLowerCase(),i=!m||s.name&&s.name.toLowerCase().includes(a)||s.email&&s.email.toLowerCase().includes(a)||f.reason&&f.reason.toLowerCase().includes(a),h=I==="All"||f.status===I.toLowerCase();return i&&h});return y?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:l("loading")})]})}):(0,e.jsxs)("div",{className:"p-4 md:p-6",children:[(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:l("loans")}),(0,e.jsx)("p",{className:"mt-1 text-gray-600",children:l("loans_page_description")})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:(0,e.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(we,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:l("search_loans"),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:m,onChange:f=>D(f.target.value)})]})}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)(mt,{className:"h-5 w-5 text-gray-400"}),(0,e.jsxs)("select",{value:I,onChange:f=>_(f.target.value),className:"block px-3 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,e.jsx)("option",{value:"All",children:l("all_statuses")}),(0,e.jsx)("option",{value:"Pending",children:l("pending")}),(0,e.jsx)("option",{value:"Accepted",children:l("accepted")}),(0,e.jsx)("option",{value:"Denied",children:l("denied")})]})]})]})}),w&&(0,e.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)(Ce,{className:"h-5 w-5 text-red-400"})}),(0,e.jsx)("div",{className:"ml-3",children:(0,e.jsx)("p",{className:"text-sm text-red-700",children:w})})]})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,e.jsx)(Le,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:l("total_loans")}),(0,e.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.reduce((f,s)=>f+(parseFloat(s.amount)||0),0).toFixed(2)]})]})]})}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,e.jsx)(ut,{className:"h-6 w-6 text-yellow-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:l("pending_loans")}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(f=>f.status==="pending").length})]})]})}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)(Ee,{className:"h-6 w-6 text-green-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:l("accepted_loans")}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(f=>f.status==="accepted").length})]})]})})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("user")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("amount")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("status")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("date")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("reason")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("approved_by")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:l("actions")})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.length>0?A.map(f=>{const s=S(f.userId);return(0,e.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-indigo-800 font-medium",children:s.name?.charAt(0)?.toUpperCase()||"U"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:s.name||l("unknown_user")}),(0,e.jsx)("div",{className:"text-sm text-gray-500",children:s.email||l("n_a")})]})]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"text-sm text-gray-900 font-medium",children:["$",f.amount||"0.00"]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${M(f.status)}`,children:f.status||l("unknown")})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T(f.timestamp)}),(0,e.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",title:f.reason,children:f.reason||l("n_a")}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.approvedBy||l("n_a")}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[f.status==="pending"&&(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("div",{className:"flex items-center space-x-2",children:(0,e.jsx)("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:a=>$(f.id,a.target.files[0]),className:"text-xs"})}),(0,e.jsxs)("div",{className:"flex space-x-2",children:[(0,e.jsxs)("button",{onClick:()=>C(f.id,"accepted",L[f.id]),disabled:P[f.id],className:"text-green-600 hover:text-green-900 disabled:opacity-50 flex items-center",title:l("approve"),children:[P[f.id]?(0,e.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600 mr-1"}):(0,e.jsx)(Ee,{className:"h-4 w-4 mr-1"}),(0,e.jsx)("span",{children:l("approve")})]}),(0,e.jsxs)("button",{onClick:()=>C(f.id,"denied"),disabled:P[f.id],className:"text-red-600 hover:text-red-900 disabled:opacity-50 flex items-center",title:l("deny"),children:[P[f.id]?(0,e.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600 mr-1"}):(0,e.jsx)(Ce,{className:"h-4 w-4 mr-1"}),(0,e.jsx)("span",{children:l("deny")})]})]})]}),f.status==="accepted"&&f.receiptFileName&&(0,e.jsxs)("div",{className:"text-xs text-green-600",children:[l("receipt"),": ",f.receiptFileName]})]})]},f.id)}):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:l(m||I!=="All"?"no_loans_match":"no_loans_found")})})})]})})})]})},$s=Ms,Bs=()=>{const[r,c]=(0,n.useState)([]),[o,x]=(0,n.useState)(!0),[y,u]=(0,n.useState)(null),[j,b]=(0,n.useState)(""),[w,p]=(0,n.useState)(!1),[m,D]=(0,n.useState)(null),[I,_]=(0,n.useState)([]),[P,z]=(0,n.useState)([]),[L,g]=(0,n.useState)(!1),[l,S]=(0,n.useState)(!1),[T,M]=(0,n.useState)(null),[C,$]=(0,n.useState)(null),[A,f]=(0,n.useState)({}),{t:s}=pe(),a=(0,n.useRef)(null),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!U){u(s("error_firestore_instance")),x(!1);return}const d=se(W(U,"users")),O=le(d,R=>{try{const te=R.docs.map(G=>({id:G.id,...G.data()})).sort((G,X)=>G.createdAt&&X.createdAt?X.createdAt.toMillis()-G.createdAt.toMillis():G.createdAt?-1:X.createdAt?1:0);c(te),x(!1)}catch(te){console.error("Error processing users snapshot:",te),u(s("error_process_users_data")),x(!1)}},R=>{console.error("Error fetching users:",R),R.code==="permission-denied"?u(s("error_permission_denied")):u(s("error_load_users")+(R.message||s("unknown_error"))),x(!1)});return()=>O()},[]),(0,n.useEffect)(()=>{if(a.current&&(a.current(),a.current=null),i.current&&(i.current(),i.current=null),!m){_([]),z([]);return}g(!0),M(null);const d=se(W(U,"deposits"),xe("timestamp","desc"));a.current=le(d,R=>{try{const te=R.docs.map(G=>({id:G.id,...G.data()})).filter(G=>G.userId===m.uid);_(te),g(!1)}catch(te){console.error("Error processing deposits snapshot:",te),M(s("error_process_deposits_data")),g(!1)}},R=>{console.error("Error fetching deposits:",R),M(s("error_load_deposits")+(R.message||s("unknown_error"))),g(!1)}),S(!0),$(null);const O=se(W(U,"loans"),xe("timestamp","desc"));return i.current=le(O,R=>{try{const te=R.docs.map(G=>({id:G.id,...G.data()})).filter(G=>G.userId===m.uid);z(te),S(!1)}catch(te){console.error("Error processing loans snapshot:",te),$(s("error_process_loans_data")),S(!1)}},R=>{console.error("Error fetching loans:",R),$(s("error_load_loans")+(R.message||s("unknown_error"))),S(!1)}),()=>{a.current&&(a.current(),a.current=null),i.current&&(i.current(),i.current=null)}},[m]);const h=d=>{if(!d)return s("n_a");if(d.seconds)return new Date(d.seconds*1e3).toLocaleString();if(d.toDate)return d.toDate().toLocaleString();try{return new Date(d).toLocaleString()}catch{return String(d)}},k=d=>{switch(d?.toLowerCase()){case"accepted":return"bg-green-100 text-green-800";case"denied":case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},K=d=>{D(d),p(!0)},F=()=>{p(!1)},N=d=>{window.open(d,"_blank")},q=(d,O)=>{const R=document.createElement("a");R.href=d,R.download=O||"proof-image.jpg",document.body.appendChild(R),R.click(),document.body.removeChild(R)},ae=I.reduce((d,O)=>d+(O.amount||0),0),ee=P.reduce((d,O)=>d+(O.amount||0),0);I.filter(d=>d.status==="pending").length,I.filter(d=>d.status==="accepted").length,I.filter(d=>d.status==="denied"||d.status==="rejected").length,P.filter(d=>d.status==="pending").length,P.filter(d=>d.status==="accepted").length,P.filter(d=>d.status==="denied"||d.status==="rejected").length;const B=r.filter(d=>{const O=j.trim().toLowerCase();return O?(d.fullName||"").toLowerCase().includes(O)||(d.email||"").toLowerCase().includes(O)||(d.phoneNumber||"").toLowerCase().includes(O)||(d.uid||"").toLowerCase().includes(O):!0});return o?(0,e.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:s("loading")})]})}):y?(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 text-center",children:[(0,e.jsxs)("p",{className:"text-red-500",children:["Error: ",y]}),(0,e.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:s("retry")})]}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:col-span-1",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("total_users")}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:r.length})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a4 4 0 00-4-4h-1M9 20H4v-2a4 4 0 014-4h1m0-4a4 4 0 100-8 4 4 0 000 8z"})})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:col-span-3",children:(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:s("user_records")}),(0,e.jsx)("div",{className:"flex items-center w-full sm:w-64",children:(0,e.jsxs)("div",{className:"relative w-full",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(we,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:s("search_users"),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:j,onChange:d=>b(d.target.value)})]})})]})})]}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("user")}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("email")}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("phone")}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("gender")}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("age")}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("joined")})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.length>0?B.map(d=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150 cursor-pointer",onClick:()=>K(d),children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[d.imageUrl?(0,e.jsx)("img",{src:d.imageUrl,alt:d.fullName||"avatar",className:"h-10 w-10 rounded-full object-cover",onError:O=>{O.target.style.display="none"}}):(0,e.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-sm font-medium text-gray-700",children:(d.fullName||"U").split(" ").map(O=>O[0]).slice(0,2).join("").toUpperCase()}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:d.fullName||s("no_name")}),(0,e.jsx)("div",{className:"text-xs text-gray-500",children:d.uid||""})]})]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.email||s("n_a")}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.phoneNumber||s("n_a")}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:d.gender||s("n_a")}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.age||s("n_a")}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(d.createdAt)})]},d.id)):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-sm text-gray-500",children:s("no_users_found")})})})]})})}),w&&m&&(0,e.jsx)("div",{className:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-auto",children:[(0,e.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[s("user_details"),": ",m.fullName]}),(0,e.jsx)("button",{onClick:F,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,e.jsx)(Ae,{className:"h-5 w-5 text-gray-500"})})]}),(0,e.jsxs)("div",{className:"p-6",children:[(0,e.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[m.imageUrl?(0,e.jsx)("img",{src:m.imageUrl,alt:m.fullName||"avatar",className:"h-16 w-16 rounded-full object-cover mr-4"}):(0,e.jsx)("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center text-xl font-medium text-gray-700 mr-4",children:(m.fullName||"U").split(" ").map(d=>d[0]).slice(0,2).join("").toUpperCase()}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:m.fullName||s("no_name")}),(0,e.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",m.uid||s("n_a")]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("email")}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:m.email||s("n_a")})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("phone_number")}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:m.phoneNumber||s("n_a")})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("momo_number")}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:m.momoNumber||s("n_a")})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("credit_card")}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:m.creditCardNumber||s("n_a")})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("gender")}),(0,e.jsx)("p",{className:"text-sm text-gray-900 capitalize",children:m.gender||s("n_a")})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("age")}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:m.age||s("n_a")})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:s("joined_date")}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:h(m.createdAt)})]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[(0,e.jsx)("div",{className:"p-2 rounded-full bg-green-100 mr-3",children:(0,e.jsx)(De,{className:"h-6 w-6 text-green-600"})}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:s("deposits_summary")})]}),(0,e.jsx)("div",{className:"space-y-3",children:(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsxs)("span",{className:"text-sm text-gray-500",children:[s("total_amount"),":"]}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",ae.toFixed(2)]})]})})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[(0,e.jsx)("div",{className:"p-2 rounded-full bg-blue-100 mr-3",children:(0,e.jsx)(ds,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:s("loans_summary")})]}),(0,e.jsx)("div",{className:"space-y-3",children:(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsxs)("span",{className:"text-sm text-gray-500",children:[s("total_amount"),":"]}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",ee.toFixed(2)]})]})})]})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s("deposits")}),L?(0,e.jsx)("div",{className:"flex justify-center py-4",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):T?(0,e.jsx)("div",{className:"bg-red-50 p-4 rounded-md",children:(0,e.jsx)("p",{className:"text-sm text-red-800",children:T})}):I.length>0?(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("amount")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("status")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("date")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("message")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("proof")})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(d=>(0,e.jsxs)("tr",{children:[(0,e.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:["$",d.amount||"0"]}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${k(d.status)}`,children:d.status||s("unknown")})}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:h(d.timestamp)}),(0,e.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",title:d.message,children:d.message||s("n_a")}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:d.proofImage?(0,e.jsxs)("div",{className:"flex space-x-2",children:[(0,e.jsx)("button",{onClick:()=>N(d.proofImage),className:"text-indigo-600 hover:text-indigo-900",title:s("view"),children:(0,e.jsx)(Oe,{className:"h-5 w-5"})}),(0,e.jsx)("button",{onClick:()=>q(d.proofImage,`deposit-proof-${d.id}.jpg`),className:"text-indigo-600 hover:text-indigo-900",title:s("download"),children:(0,e.jsx)(dt,{className:"h-5 w-5"})})]}):s("n_a")})]},d.id))})]})}):(0,e.jsx)("div",{className:"text-center py-4 text-sm text-gray-500",children:s("no_deposits_found")})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s("loans")}),l?(0,e.jsx)("div",{className:"flex justify-center py-4",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):C?(0,e.jsx)("div",{className:"bg-red-50 p-4 rounded-md",children:(0,e.jsx)("p",{className:"text-sm text-red-800",children:C})}):P.length>0?(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("amount")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("status")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("date")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("reason")}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("approved_by")})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(d=>(0,e.jsxs)("tr",{children:[(0,e.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:["$",d.amount||"0"]}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${k(d.status)}`,children:d.status||s("unknown")})}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:h(d.timestamp)}),(0,e.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",title:d.reason,children:d.reason||s("n_a")}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:d.approvedBy||s("n_a")})]},d.id))})]})}):(0,e.jsx)("div",{className:"text-center py-4 text-sm text-gray-500",children:s("no_loans_found")})]})]})]})})]})},Os=Bs,Ys=()=>{const[r,c]=(0,n.useState)("10.00"),[o,x]=(0,n.useState)(!0),[y,u]=(0,n.useState)(!1),[j,b]=(0,n.useState)(null),[w,p]=(0,n.useState)("success"),[m,D]=(0,n.useState)([]),[I,_]=(0,n.useState)(!1),[P,z]=(0,n.useState)(null),{t:L}=pe();(0,n.useEffect)(()=>{(async()=>{try{const S=se(W(U,"interest"),xe("timestamp","desc"),He(10)),T=await ye(S);if(T.empty)c("10.00");else{const M=T.docs[0];c(M.data().interest.toFixed(2)),z(M.id);const C=T.docs.map($=>({date:new Date($.data().timestamp?.toDate()||Date.now()).toLocaleDateString(),rate:parseFloat($.data().interest)})).reverse();D(C)}x(!1)}catch(S){console.error("Error fetching interest rate:",S),b(L("error_fetch_interest_rate")),p("error"),x(!1)}})()},[]);const g=async()=>{if(!r||isNaN(r)){b(L("error_invalid_interest_rate")),p("error");return}u(!0);try{const l=parseFloat(r);if(l<0||l>100)throw new Error(L("error_interest_rate_range"));const S={interest:l,timestamp:new Date};if(P)await ue(ne(U,"interest",P),S);else{const C=ne(W(U,"interest"));await lt(C,S),z(C.id)}b(L("success_interest_rate_saved")),p("success");const T=se(W(U,"interest"),xe("timestamp","desc"),He(10)),M=(await ye(T)).docs.map(C=>({date:new Date(C.data().timestamp?.toDate()||Date.now()).toLocaleDateString(),rate:parseFloat(C.data().interest)})).reverse();D(M)}catch(l){console.error("Error saving interest rate:",l),b(L("error_save_interest_rate")+l.message),p("error")}finally{u(!1)}};return o?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:L("loading")})]})}):(0,e.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:L("interest_rate_settings")}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:L("interest_rate_settings_description")})]}),(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:L("current_interest_rate")}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"interestRate",className:"block text-sm font-medium text-gray-700 mb-1",children:L("interest_rate_percentage")}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("input",{type:"number",id:"interestRate",value:r,onChange:l=>c(l.target.value),step:"0.01",min:"0",max:"100",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:L("enter_interest_rate")}),(0,e.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,e.jsx)("span",{className:"text-gray-500",children:"%"})})]}),(0,e.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:L("interest_rate_help_text")})]}),(0,e.jsx)("button",{onClick:g,disabled:y,className:`w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white ${y?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}`,children:L(y?"saving":"save_changes")})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:L("preview")}),(0,e.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg p-6 text-white",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("p",{className:"text-lg mb-2",children:L("current_rate")}),(0,e.jsxs)("p",{className:"text-4xl font-bold",children:[r,"%"]}),(0,e.jsx)("p",{className:"mt-2 text-indigo-100",children:L("annual_percentage_rate")})]})})]})]}),j&&(0,e.jsx)("div",{className:`mt-4 p-4 rounded-lg ${w==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:j})]}),(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:L("interest_rate_history")}),(0,e.jsx)("button",{onClick:()=>_(!I),className:"text-indigo-600 hover:text-indigo-800 font-medium",children:L(I?"hide_history":"show_history")})]}),I&&(0,e.jsx)("div",{className:"mt-6",children:m.length>0?(0,e.jsx)("div",{className:"h-80",children:(0,e.jsx)(Te,{width:"100%",height:"100%",children:(0,e.jsxs)(ot,{data:m,margin:{top:5,right:30,left:20,bottom:5},children:[(0,e.jsx)(Re,{strokeDasharray:"3 3"}),(0,e.jsx)(ze,{dataKey:"date",tick:{fontSize:12}}),(0,e.jsx)(Me,{tick:{fontSize:12},tickFormatter:l=>`${l}%`}),(0,e.jsx)(Fe,{formatter:l=>[`${l}%`,L("rate")],labelFormatter:l=>`${L("date")}: ${l}`}),(0,e.jsx)(Ie,{type:"monotone",dataKey:"rate",stroke:"#4f46e5",activeDot:{r:8},strokeWidth:2,name:L("interest_rate")})]})})}):(0,e.jsx)("div",{className:"text-center py-8",children:(0,e.jsx)("p",{className:"text-gray-500",children:L("no_history_data")})})})]})]})},Gs=Ys;js();var Pe=Ue(fs()),Vs=(r,c)=>{const o=new us({orientation:"portrait",unit:"mm",format:"a4"}),x=o.internal.pageSize.getWidth(),y=o.internal.pageSize.getHeight(),u=20;x-u*2,o.setFont("helvetica");const j=g=>g?(g.toDate?g.toDate():new Date(g)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",b=g=>`$${g.toFixed(2)}`,w=g=>g==="approved"?[0,128,0]:[255,0,0],p=g=>g==="approved"?"PAID":g?g.toUpperCase():"UNPAID",m=()=>{o.setFillColor(41,98,255),o.rect(0,0,x,30,"F"),o.setTextColor(255,255,255),o.setFontSize(20),o.setFont("helvetica","bold"),o.text("Annual User Reports",x/2,20,{align:"center"}),o.setFontSize(14),o.setFont("helvetica","normal"),o.text(`${c}`,x/2,26,{align:"center"}),o.setTextColor(0,0,0)},D=g=>{const l=y-10;o.setFontSize(8),o.setTextColor(100,100,100),o.text(`Page ${g}`,x/2,l,{align:"center"})},I=()=>{m(),o.setFontSize(28),o.setTextColor(41,98,255),o.text("Annual User Reports",x/2,100,{align:"center"}),o.setFontSize(22),o.text(`${c}`,x/2,115,{align:"center"}),o.setFontSize(12),o.setTextColor(100,100,100);const g=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});o.text(`Generated on ${g}`,x/2,130,{align:"center"}),o.setTextColor(0,0,0),o.setFontSize(14),o.setFont("helvetica","bold"),o.text("Summary Statistics",u,160),o.setFont("helvetica","normal"),o.setFontSize(12);const l=r.length,S=r.reduce(($,A)=>$+A.totalDeposits,0),T=r.reduce(($,A)=>$+A.totalLoans,0),M=r.reduce(($,A)=>$+A.paidLoansCount,0),C=r.reduce(($,A)=>$+A.unpaidLoansCount,0);o.text(`Total Users: ${l}`,u,175),o.text(`Total Deposits: ${b(S)}`,u,185),o.text(`Total Loans: ${b(T)}`,u,195),o.text(`Total Paid Loans: ${M}`,u,205),o.text(`Total Unpaid Loans: ${C}`,u,215),D(1),o.addPage()};let _=0;const P=()=>{m();const g=[[{content:"User Name",dataKey:"name"}],[{content:"Total Deposits ($)",dataKey:"totalDeposits"}],[{content:"Paid Loans",dataKey:"paidLoansCount"}],[{content:"Unpaid Loans",dataKey:"unpaidLoansCount"}],[{content:"Total Loans ($)",dataKey:"totalLoans"}]],l=r.map(S=>[S.user.name||"Unknown User",b(S.totalDeposits),S.paidLoansCount,S.unpaidLoansCount,b(S.totalLoans)]);(0,Pe.default)(o,{head:g,body:l,startY:40,theme:"grid",styles:{font:"helvetica",fontSize:10,cellPadding:5},headStyles:{fillColor:[41,98,255],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:20,right:20},didDrawPage:S=>{_=S.cursor.y}}),_=o.lastAutoTable.finalY+10,D(o.internal.getNumberOfPages())},z=g=>y-_-20<g?(o.addPage(),m(),_=40,D(o.internal.getNumberOfPages()),!0):!1,L=(g,l=!1)=>{const S=60+g.deposits.length*10+g.loans.length*10;if(z(S),o.setFontSize(16),o.setFont("helvetica","bold"),o.setTextColor(41,98,255),o.text(g.user.name||"Unknown User",u,_),_+=10,o.setFontSize(12),o.setFont("helvetica","normal"),o.setTextColor(0,0,0),o.text(`Email: ${g.user.email||"N/A"}`,u,_),_+=10,o.text(`Phone: ${g.user.phone||"N/A"}`,u,_),_+=15,g.deposits.length>0){const T=[[{content:"Amount",dataKey:"amount"}],[{content:"Date",dataKey:"date"}]],M=g.deposits.map(C=>[b(C.amount),j(C.timestamp)]);z(30),(0,Pe.default)(o,{head:T,body:M,startY:_,theme:"grid",styles:{font:"helvetica",fontSize:10,cellPadding:5},headStyles:{fillColor:[75,192,192],textColor:255,fontStyle:"bold"},margin:{left:u,right:u},didDrawPage:C=>{_=C.cursor.y}}),_=o.lastAutoTable.finalY+10}else z(20),o.setFontSize(10),o.setTextColor(100,100,100),o.text("No deposits found",u,_),o.setTextColor(0,0,0),_+=10;if(g.loans.length>0){const T=[[{content:"Amount",dataKey:"amount"}],[{content:"Date",dataKey:"date"}],[{content:"Status",dataKey:"status"}]],M=g.loans.map(C=>[b(C.amount),j(C.timestamp),p(C.paymentStatus)]);z(30),(0,Pe.default)(o,{head:T,body:M,startY:_,theme:"grid",styles:{font:"helvetica",fontSize:10,cellPadding:5},headStyles:{fillColor:[255,99,132],textColor:255,fontStyle:"bold"},didDrawCell:C=>{if(C.section==="body"&&C.column.index===2){const $=C.row.index,A=g.loans[$];if(A){const f=w(A.paymentStatus);o.setTextColor(f[0],f[1],f[2])}}},didDrawPage:C=>{_=C.cursor.y},margin:{left:u,right:u}}),_=o.lastAutoTable.finalY+15}else z(20),o.setFontSize(10),o.setTextColor(100,100,100),o.text("No loans found",u,_),o.setTextColor(0,0,0),_+=15};try{I(),P(),r.length>0&&(o.addPage(),m(),_=40),r.forEach((S,T)=>{L(S,T===0)});const g=o.internal.getNumberOfPages();for(let S=1;S<=g;S++)o.setPage(S),D(S);const l=`annual-reports-${c}.pdf`;return o.save(l),{success:!0,filename:l}}catch(g){return console.error("Error generating PDF:",g),{success:!1,error:g.message}}},qs=Vs;Zt.register(Kt,Ot,Ht,qt,Yt,Wt,Jt);var et=r=>hs(new Date(r,0,1)),tt=r=>ys(new Date(r,0,1)),gt=(r,c)=>new Date(r,c-1,1),ft=(r,c)=>new Date(r,c,0),st=r=>{if(!r)return"N/A";const c=r.toDate?r.toDate():new Date(r);return xt(c,"MMM dd, yyyy")},Ws=(r,c)=>{const o=r.reduce((j,b)=>j+b.amount,0),x=c.reduce((j,b)=>j+b.amount,0),y=c.filter(j=>j.paymentStatus==="approved").length,u=c.filter(j=>j.paymentStatus!=="approved").length;return{totalDeposits:o,totalLoans:x,paidLoansCount:y,unpaidLoansCount:u}},Ks=(r,c)=>{if(!c.trim())return r;const o=c.toLowerCase();return r.filter(x=>x.user?.name?.toLowerCase().includes(o)||x.user?.email?.toLowerCase().includes(o)||x.user?.phone?.toLowerCase().includes(o))},Hs=(r,c)=>{const o=["User","Total Deposits","Total Loans","Paid Loans","Unpaid Loans"],x=r.map(w=>[w.user.name,w.totalDeposits,w.totalLoans,w.paidLoansCount,w.unpaidLoansCount]);let y=o.join(",")+`
`;x.forEach(w=>{y+=w.join(",")+`
`});const u=new Blob([y],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(u),b=document.createElement("a");b.setAttribute("href",j),b.setAttribute("download",c),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b)},at=(r,c,o)=>{const x=[];for(let y=1;y<=12;y++){const u=gt(o,y),j=ft(o,y),b=r.filter(p=>{const m=p.timestamp.toDate?p.timestamp.toDate():new Date(p.timestamp);return m>=u&&m<=j}),w=c.filter(p=>{const m=p.timestamp.toDate?p.timestamp.toDate():new Date(p.timestamp);return m>=u&&m<=j});x.push({month:xt(u,"MMM"),deposits:b.reduce((p,m)=>p+m.amount,0),loans:w.reduce((p,m)=>p+m.amount,0)})}return x},Zs=r=>r==="approved"?{text:"PAID",className:"bg-green-100 text-green-800"}:{text:r?r.toUpperCase():"UNPAID",className:"bg-red-100 text-red-800"},rt=({data:r,columns:c,itemsPerPage:o=10})=>{const[x,y]=(0,n.useState)(1),u=Math.ceil(r.length/o),j=(x-1)*o,b=j+o,w=r.slice(j,b);return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsx)("tr",{children:c.map((p,m)=>(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p.header},m))})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map((p,m)=>(0,e.jsx)("tr",{children:c.map((D,I)=>(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.render?D.render(p):p[D.accessor]},I))},m))})]})}),u>1&&(0,e.jsxs)("div",{className:"px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,e.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,e.jsx)("button",{onClick:()=>y(p=>Math.max(p-1,1)),disabled:x===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(0,e.jsx)("button",{onClick:()=>y(p=>Math.min(p+1,u)),disabled:x===u,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),(0,e.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,e.jsx)("span",{className:"font-medium",children:j+1})," to"," ",(0,e.jsx)("span",{className:"font-medium",children:Math.min(b,r.length)})," of"," ",(0,e.jsx)("span",{className:"font-medium",children:r.length})," results"]})}),(0,e.jsx)("div",{children:(0,e.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,e.jsx)("button",{onClick:()=>y(p=>Math.max(p-1,1)),disabled:x===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:t("previous")}),Array.from({length:u},(p,m)=>m+1).map(p=>(0,e.jsx)("button",{onClick:()=>y(p),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${x===p?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:p},p)),(0,e.jsx)("button",{onClick:()=>y(p=>Math.min(p+1,u)),disabled:x===u,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:t("next")})]})})]})]})]})},Js=({isOpen:r,onClose:c,user:o,deposits:x,loans:y})=>{if(!r)return null;const u=[{header:"Amount",accessor:"amount",render:b=>`$${b.amount.toFixed(2)}`},{header:"Date",accessor:"timestamp",render:b=>st(b.timestamp)}],j=[{header:"Amount",accessor:"amount",render:b=>`$${b.amount.toFixed(2)}`},{header:"Date",accessor:"timestamp",render:b=>st(b.timestamp)},{header:"Status",accessor:"paymentStatus",render:b=>{const w=Zs(b.paymentStatus);return(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.className}`,children:w.text})}}];return(0,e.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,e.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,e.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,e.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:c})}),(0,e.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,e.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:(0,e.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:[o.name,"'s Report"]}),(0,e.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:c,children:(0,e.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,e.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,e.jsx)("p",{className:"text-base font-medium",children:o.email||"N/A"})]}),(0,e.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,e.jsx)("p",{className:"text-base font-medium",children:o.phone||"N/A"})]})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Deposits"}),x.length===0?(0,e.jsx)("p",{className:"text-gray-500",children:"No deposits found"}):(0,e.jsx)(rt,{data:x,columns:u,itemsPerPage:5})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Loans"}),y.length===0?(0,e.jsx)("p",{className:"text-gray-500",children:"No loans found"}):(0,e.jsx)(rt,{data:y,columns:j,itemsPerPage:5})]})]})})]})})},Qs=(r,c)=>{const[o,x]=(0,n.useState)(r);return(0,n.useEffect)(()=>{const y=setTimeout(()=>{x(r)},c);return()=>{clearTimeout(y)}},[r,c]),o},Xs=()=>{const r=new Date().getFullYear(),[c,o]=(0,n.useState)(r),[x,y]=(0,n.useState)("all"),[u,j]=(0,n.useState)(""),[b,w]=(0,n.useState)(!1),[p,m]=(0,n.useState)([]),[D,I]=(0,n.useState)({}),[_,P]=(0,n.useState)(null),[z,L]=(0,n.useState)(!1),[g,l]=(0,n.useState)(null),[S,T]=(0,n.useState)(null),[M,C]=(0,n.useState)(!0),[$,A]=(0,n.useState)(null),[f,s]=(0,n.useState)({deposits:null,loans:null}),{t:a}=pe(),[i,h]=(0,n.useState)(1),k=20,K=Qs(u,300),F=(0,n.useMemo)(()=>{if(Object.keys(D).length===0)return[];let v=Object.values(D);return K&&(v=Ks(v,K)),b&&(v=v.filter(Z=>Z.unpaidLoansCount>0)),v},[D,K,b]),N=Math.ceil(F.length/k),q=(i-1)*k,ae=q+k,ee=F.slice(q,ae);(0,n.useEffect)(()=>{h(1)},[F.length]);const B=(0,n.useMemo)(()=>g?{labels:g.labels,datasets:g.datasets}:null,[g]),d=(0,n.useMemo)(()=>S?{currentYear:{totalDeposits:S.currentYear.totalDeposits,totalLoans:S.currentYear.totalLoans,monthlyData:S.currentYear.monthlyData},previousYear:{totalDeposits:S.previousYear.totalDeposits,totalLoans:S.previousYear.totalLoans,monthlyData:S.previousYear.monthlyData}}:null,[S]),O=async()=>{try{const v=se(W(U,"users")),Z=await ye(v),de=[];return Z.forEach(H=>{de.push({id:H.id,...H.data()})}),m(de),de}catch(v){return console.error("Error fetching users:",v),A("Failed to fetch users data"),[]}},R=async(v,Z,de)=>{try{try{const H=se(W(U,"deposits"),ge("userId","in",v),ge("timestamp",">=",Z),ge("timestamp","<=",de),xe("timestamp","desc")),me=await ye(H),re={};return me.forEach(J=>{const Y={id:J.id,...J.data()};re[Y.userId]||(re[Y.userId]=[]),re[Y.userId].push(Y)}),re}catch(H){if(H.message.includes("requires an index")){console.warn("Index not found for deposits query, using fallback"),s(Y=>({...Y,deposits:H.message}));const me=se(W(U,"deposits"),ge("userId","in",v)),re=await ye(me),J={};return re.forEach(Y=>{const V={id:Y.id,...Y.data()},oe=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);oe>=Z&&oe<=de&&(J[V.userId]||(J[V.userId]=[]),J[V.userId].push(V))}),Object.keys(J).forEach(Y=>{J[Y].sort((V,oe)=>{const je=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);return(oe.timestamp.toDate?oe.timestamp.toDate():new Date(oe.timestamp))-je})}),J}else throw H}}catch(H){return console.error("Error fetching deposits:",H),{}}},te=async(v,Z,de)=>{try{try{const H=se(W(U,"loans"),ge("userId","in",v),ge("timestamp",">=",Z),ge("timestamp","<=",de),xe("timestamp","desc")),me=await ye(H),re={};return me.forEach(J=>{const Y={id:J.id,...J.data()};re[Y.userId]||(re[Y.userId]=[]),re[Y.userId].push(Y)}),re}catch(H){if(H.message.includes("requires an index")){console.warn("Index not found for loans query, using fallback"),s(Y=>({...Y,loans:H.message}));const me=se(W(U,"loans"),ge("userId","in",v)),re=await ye(me),J={};return re.forEach(Y=>{const V={id:Y.id,...Y.data()},oe=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);oe>=Z&&oe<=de&&(J[V.userId]||(J[V.userId]=[]),J[V.userId].push(V))}),Object.keys(J).forEach(Y=>{J[Y].sort((V,oe)=>{const je=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);return(oe.timestamp.toDate?oe.timestamp.toDate():new Date(oe.timestamp))-je})}),J}else throw H}}catch(H){return console.error("Error fetching loans:",H),{}}},G=(0,n.useCallback)(async()=>{C(!0),A(null);try{const v=await O(),Z={};let de=[],H=[],me,re;x==="all"?(me=et(c),re=tt(c)):(me=gt(c,parseInt(x)),re=ft(c,parseInt(x)));const J=v.map(E=>E.id),Y=[];for(let E=0;E<J.length;E+=10)Y.push(J.slice(E,E+10));const V=Y.map(E=>R(E,me,re)),oe=Y.map(E=>te(E,me,re)),je=await Promise.all(V),wt=await Promise.all(oe),Ye={},Ge={};je.forEach(E=>{Object.keys(E).forEach(Q=>{Ye[Q]=E[Q],de=[...de,...E[Q]]})}),wt.forEach(E=>{Object.keys(E).forEach(Q=>{Ge[Q]=E[Q],H=[...H,...E[Q]]})}),v.forEach(E=>{const Q=Ye[E.id]||[],We=Ge[E.id]||[],Dt=Ws(Q,We);Z[E.id]={user:E,deposits:Q,loans:We,...Dt}});const Ne=at(de,H,c);l({labels:Ne.map(E=>E.month),datasets:[{label:"Deposits",data:Ne.map(E=>E.deposits),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Loans",data:Ne.map(E=>E.loans),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]});const Ve=et(c-1),qe=tt(c-1),vt=Y.map(E=>R(E,Ve,qe)),Nt=Y.map(E=>te(E,Ve,qe)),_t=await Promise.all(vt),kt=await Promise.all(Nt);let _e=[],ke=[];_t.forEach(E=>{Object.keys(E).forEach(Q=>{_e=[..._e,...E[Q]]})}),kt.forEach(E=>{Object.keys(E).forEach(Q=>{ke=[...ke,...E[Q]]})});const St=at(_e,ke,c-1);T({currentYear:{totalDeposits:de.reduce((E,Q)=>E+Q.amount,0),totalLoans:H.reduce((E,Q)=>E+Q.amount,0),monthlyData:Ne},previousYear:{totalDeposits:_e.reduce((E,Q)=>E+Q.amount,0),totalLoans:ke.reduce((E,Q)=>E+Q.amount,0),monthlyData:St}}),I(Z),C(!1)}catch(v){console.error("Error fetching user reports:",v),A("Failed to fetch reports data"),C(!1)}},[c,x]),X=(0,n.useCallback)(v=>{P(v),L(!0)},[]),ce=(0,n.useCallback)(()=>{L(!1),P(null)},[]),yt=(0,n.useCallback)(()=>{const v=Object.values(D);Hs(v,`annual-reports-${c}.csv`)},[D,c]),bt=(0,n.useCallback)(()=>{const v=Object.values(D),Z=qs(v,c);Z.success?console.log(`PDF "${Z.filename}" generated successfully!`):console.error("Failed to generate PDF:",Z.error)},[D,c]);(0,n.useEffect)(()=>{G()},[G]);const jt=()=>{const v=[];for(let Z=r;Z>=2022;Z--)v.push(Z);return v};return(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:a("annual_reports_title")}),(f.deposits||f.loans)&&(0,e.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,e.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("p",{className:"text-sm text-yellow-700",children:a("index_error_message")}),(0,e.jsxs)("div",{className:"mt-2",children:[f.deposits&&(0,e.jsx)("a",{href:"https://console.firebase.google.com/v1/r/project/ecommerce-74229/firestore/indexes?create_composite=ClBwcm9qZWN0cy9lY29tbWVyY2UtNzQyMjkvZGF0YWJhc2VzLyhkZWZhdWx0KS9jb2xsZWN0aW9uR3JvdXBzL2RlcG9zaXRzL2luZGV4ZXMvXxABGgoKBnVzZXJJZBABGg0KCXRpbWVzdGFtcBACGgwKCF9fbmFtZV9fEAI",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800 mr-4",children:a("create_deposits_index")}),f.loans&&(0,e.jsx)("a",{href:"https://console.firebase.google.com/v1/r/project/ecommerce-74229/firestore/indexes?create_composite=Ck1wcm9qZWN0cy9lY29tbWVyY2UtNzQyMjkvZGF0YWJhc2VzLyhkZWZhdWx0KS9jb2xsZWN0aW9uR3JvdXBzL2xvYW5zL2luZGV4ZXMvXxABGgoKBnVzZXJJZBABGg0KCXRpbWVzdGFtcBACGgwKCF9fbmFtZV9fEAI",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:a("create_loans_index")})]})]})]})}),(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700 mb-1",children:a("select_year")}),(0,e.jsx)("select",{id:"year",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:c,onChange:v=>o(parseInt(v.target.value)),children:jt().map(v=>(0,e.jsx)("option",{value:v,children:v},v))})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"month",className:"block text-sm font-medium text-gray-700 mb-1",children:a("select_month")}),(0,e.jsxs)("select",{id:"month",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:x,onChange:v=>y(v.target.value),children:[(0,e.jsx)("option",{value:"all",children:"All Months"}),(0,e.jsx)("option",{value:"1",children:"January"}),(0,e.jsx)("option",{value:"2",children:"February"}),(0,e.jsx)("option",{value:"3",children:"March"}),(0,e.jsx)("option",{value:"4",children:"April"}),(0,e.jsx)("option",{value:"5",children:"May"}),(0,e.jsx)("option",{value:"6",children:"June"}),(0,e.jsx)("option",{value:"7",children:"July"}),(0,e.jsx)("option",{value:"8",children:"August"}),(0,e.jsx)("option",{value:"9",children:"September"}),(0,e.jsx)("option",{value:"10",children:"October"}),(0,e.jsx)("option",{value:"11",children:"November"}),(0,e.jsx)("option",{value:"12",children:"December"})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:a("search_user")}),(0,e.jsx)("input",{type:"text",id:"search",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:a("search_user_placeholder"),value:u,onChange:v=>j(v.target.value)})]}),(0,e.jsx)("div",{className:"flex items-end",children:(0,e.jsx)("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:G,children:a("apply_filters")})})]}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("input",{id:"showUnpaid",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:b,onChange:v=>w(v.target.checked)}),(0,e.jsx)("label",{htmlFor:"showUnpaid",className:"ml-2 block text-sm text-gray-700",children:a("show_only_unpaid_loans")})]}),(0,e.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",onClick:yt,children:a("export_to_csv")}),(0,e.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",onClick:bt,children:a("export_to_pdf")})]})]}),d&&(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:a("year_comparison")}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-2",children:a("total_deposits")}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",d.currentYear.totalDeposits.toFixed(2)]}),(0,e.jsxs)("div",{className:"ml-4 text-sm text-gray-500",children:[d.currentYear.totalDeposits>d.previousYear.totalDeposits?(0,e.jsxs)("span",{className:"text-green-600",children:["â†‘ ",((d.currentYear.totalDeposits-d.previousYear.totalDeposits)/d.previousYear.totalDeposits*100).toFixed(1),"%"]}):(0,e.jsxs)("span",{className:"text-red-600",children:["â†“ ",((d.previousYear.totalDeposits-d.currentYear.totalDeposits)/d.previousYear.totalDeposits*100).toFixed(1),"%"]}),(0,e.jsxs)("span",{children:[" vs ",c-1]})]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-2",children:a("total_loans")}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",d.currentYear.totalLoans.toFixed(2)]}),(0,e.jsxs)("div",{className:"ml-4 text-sm text-gray-500",children:[d.currentYear.totalLoans>d.previousYear.totalLoans?(0,e.jsxs)("span",{className:"text-green-600",children:["â†‘ ",((d.currentYear.totalLoans-d.previousYear.totalLoans)/d.previousYear.totalLoans*100).toFixed(1),"%"]}):(0,e.jsxs)("span",{className:"text-red-600",children:["â†“ ",((d.previousYear.totalLoans-d.currentYear.totalLoans)/d.previousYear.totalLoans*100).toFixed(1),"%"]}),(0,e.jsxs)("span",{children:[" vs ",c-1]})]})]})]})]})]}),B&&(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:a("deposits_vs_loans_by_month")}),(0,e.jsx)("div",{className:"h-64",children:(0,e.jsx)(Qt,{data:B,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}}}})})]}),(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,e.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:a("users_summary")})}),M?(0,e.jsx)("div",{className:"px-6 py-4 text-center",children:(0,e.jsx)("p",{className:"text-gray-500",children:a("loading_reports")})}):$?(0,e.jsx)("div",{className:"px-6 py-4 text-center",children:(0,e.jsx)("p",{className:"text-red-500",children:$})}):F.length===0?(0,e.jsx)("div",{className:"px-6 py-4 text-center",children:(0,e.jsx)("p",{className:"text-gray-500",children:a("no_users_found")})}):(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("user")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("total_deposits_user")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("total_loans_user")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("paid_loans")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("unpaid_loans")}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("actions")})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(v=>(0,e.jsxs)("tr",{className:v.unpaidLoansCount>0?"border-l-4 border-red-500":"",children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,e.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-gray-600 font-medium",children:v.user.name?v.user.name.charAt(0).toUpperCase():"U"})})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:v.user.name||a("unknown_user")}),(0,e.jsx)("div",{className:"text-sm text-gray-500",children:v.user.email||a("n_a")})]})]})}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",v.totalDeposits.toFixed(2)]}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",v.totalLoans.toFixed(2)]}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.paidLoansCount}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v.unpaidLoansCount>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:v.unpaidLoansCount})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,e.jsx)("button",{onClick:()=>X(v.user.id),className:"text-blue-600 hover:text-blue-900",children:a("view_details")})})]},v.user.id))})]})}),N>1&&(0,e.jsxs)("div",{className:"px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,e.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,e.jsx)("button",{onClick:()=>h(v=>Math.max(v-1,1)),disabled:i===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:a("previous")}),(0,e.jsx)("button",{onClick:()=>h(v=>Math.min(v+1,N)),disabled:i===N,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:a("next")})]}),(0,e.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,e.jsx)("span",{className:"font-medium",children:q+1})," to"," ",(0,e.jsx)("span",{className:"font-medium",children:Math.min(ae,F.length)})," of"," ",(0,e.jsx)("span",{className:"font-medium",children:F.length})," results"]})}),(0,e.jsx)("div",{children:(0,e.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,e.jsx)("button",{onClick:()=>h(v=>Math.max(v-1,1)),disabled:i===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:a("previous")}),Array.from({length:N},(v,Z)=>Z+1).map(v=>(0,e.jsx)("button",{onClick:()=>h(v),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i===v?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:v},v)),(0,e.jsx)("button",{onClick:()=>h(v=>Math.min(v+1,N)),disabled:i===N,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:a("next")})]})})]})]})]})]}),_&&(0,e.jsx)(Js,{isOpen:z,onClose:ce,user:D[_].user,deposits:D[_].deposits,loans:D[_].loans})]})},ea=Xs,ta=({onAccessGranted:r})=>{const[c,o]=(0,n.useState)(""),[x,y]=(0,n.useState)(!1),[u,j]=(0,n.useState)(""),[b,w]=(0,n.useState)(""),[p,m]=(0,n.useState)(!1),[D,I]=(0,n.useState)(""),[_,P]=(0,n.useState)(""),[z,L]=(0,n.useState)(""),[g,l]=(0,n.useState)(!1),[S,T]=(0,n.useState)(!1),[M,C]=(0,n.useState)(!1),$="Communitysavings4@gmail.com";(0,n.useEffect)(()=>{if(_){T(!0);const h=setTimeout(()=>{T(!1),setTimeout(()=>P(""),500)},3e3);return()=>clearTimeout(h)}},[_]),(0,n.useEffect)(()=>{if(z){C(!0);const h=setTimeout(()=>{C(!1),setTimeout(()=>{L(""),p&&m(!1)},500)},3e3);return()=>clearTimeout(h)}},[z,p]);const A=async h=>{h.preventDefault(),l(!0);try{const k=ne(U,"adminSettings","security"),K=await Se(k);if(K.exists()){const{password:F}=K.data();c===F?r():P("Incorrect password. Please try again.")}else P("Admin settings not found. Please contact support.")}catch(k){console.error("Error fetching admin password:",k),P("Failed to verify password. Please try again.")}finally{l(!1)}},f=async h=>{h.preventDefault(),l(!0);try{const k=ps(),K=new Date;K.setMinutes(K.getMinutes()+15),await lt(ne(U,"passwordResets",k),{token:k,expiresAt:K,used:!1});const F=`${window.location.origin}/admin-login?reset=true&token=${k}`;await gs.send("service_rbtk5y8","template_i85brpa",{to_email:$,reset_link:F},"zcAI9wNXtOd3ooJ67"),L("Password reset email sent! Check your inbox."),setTimeout(()=>{y(!1)},3e3)}catch(k){console.error("Error sending password reset email:",k),P("Failed to send reset email. Please try again.")}finally{l(!1)}},s=async h=>{if(h.preventDefault(),u!==b){P("Passwords do not match.");return}if(u.length<6){P("Password must be at least 6 characters long.");return}l(!0);try{const k=ne(U,"adminSettings","security");await ue(k,{password:u});const K=ne(U,"passwordResets",D);await ue(K,{used:!0}),L("Password updated successfully!"),j(""),w(""),setTimeout(()=>{window.location.href="/admin-login"},3e3)}catch(k){console.error("Error updating password:",k),P("Failed to update password. Please try again.")}finally{l(!1)}};return(0,n.useEffect)(()=>{const h=new URLSearchParams(window.location.search),k=h.get("reset"),K=h.get("token");k==="true"&&K&&(async()=>{try{const N=ne(U,"passwordResets",K),q=await Se(N);if(!q.exists()){P("Invalid or expired reset link.");return}const ae=q.data();if(ae.used||new Date>ae.expiresAt.toDate()){P("This reset link has expired.");return}m(!0),I(K)}catch(N){console.error("Error verifying reset token:",N),P("Failed to verify reset link.")}})()},[]),p?(0,e.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-96 max-w-md",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800",children:"Reset Admin Password"}),(0,e.jsxs)("form",{onSubmit:s,children:[(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,e.jsx)("input",{type:"password",id:"newPassword",value:u,onChange:h=>j(h.target.value),className:"border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full transition-colors",required:!0})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,e.jsx)("input",{type:"password",id:"confirmPassword",value:b,onChange:h=>w(h.target.value),className:"border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full transition-colors",required:!0})]}),(0,e.jsx)("button",{type:"submit",disabled:g,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md w-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Updating...":"Reset Password"})]}),(0,e.jsx)("div",{className:"mt-4 text-center",children:(0,e.jsx)("button",{onClick:()=>m(!1),className:"text-blue-600 text-sm hover:underline",children:"Back to login"})}),_&&(0,e.jsx)("div",{className:`text-red-500 mt-4 transition-opacity duration-500 ${S?"opacity-100":"opacity-0"}`,children:_}),z&&(0,e.jsx)("div",{className:`text-green-500 mt-4 transition-opacity duration-500 ${M?"opacity-100":"opacity-0"}`,children:z})]})}):(0,e.jsxs)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:[(0,e.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-96 max-w-md",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800",children:"Admin Access"}),(0,e.jsxs)("form",{onSubmit:A,children:[(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,e.jsx)("input",{type:"password",id:"password",value:c,onChange:h=>o(h.target.value),className:"border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full transition-colors",required:!0})]}),(0,e.jsx)("button",{type:"submit",disabled:g,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md w-full mt-4 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Verifying...":"Access Admin Dashboard"})]}),_&&(0,e.jsx)("div",{className:`text-red-500 mt-2 transition-opacity duration-500 ${S?"opacity-100":"opacity-0"}`,children:_}),z&&(0,e.jsx)("div",{className:`text-green-500 mt-2 transition-opacity duration-500 ${M?"opacity-100":"opacity-0"}`,children:z}),(0,e.jsx)("div",{className:"text-blue-600 text-sm mt-3 hover:underline cursor-pointer text-center",onClick:()=>y(!0),children:"Forgot password?"})]}),x&&(0,e.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,e.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-96 max-w-md",children:[(0,e.jsx)("h2",{className:"text-xl font-bold text-center mb-4 text-gray-800",children:"Reset Password"}),(0,e.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"A reset link will be sent to the admin email."}),(0,e.jsx)("div",{className:"mb-6 p-3 bg-gray-100 rounded-md",children:(0,e.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,e.jsx)("span",{className:"font-medium",children:"Email:"})," ",$]})}),(0,e.jsx)("form",{onSubmit:f,children:(0,e.jsxs)("div",{className:"flex space-x-3",children:[(0,e.jsx)("button",{type:"button",onClick:()=>y(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-md w-1/2 transition-colors",children:"Cancel"}),(0,e.jsx)("button",{type:"submit",disabled:g,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md w-1/2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Sending...":"Send Reset Link"})]})}),_&&(0,e.jsx)("div",{className:`text-red-500 mt-4 transition-opacity duration-500 ${S?"opacity-100":"opacity-0"}`,children:_}),z&&(0,e.jsx)("div",{className:`text-green-500 mt-4 transition-opacity duration-500 ${M?"opacity-100":"opacity-0"}`,children:z})]})})]})},sa=ta,aa=()=>{const r=ve(),c=()=>{r("/")};return(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,e.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100",children:(0,e.jsx)(is,{className:"h-10 w-10 text-red-600"})}),(0,e.jsx)("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Account Blocked"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:"Your account has been blocked. Contact support if this is a mistake."}),(0,e.jsx)("button",{onClick:c,className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Back to Home"})]})})},ra=aa,na=()=>{const[r,c]=(0,n.useState)([]),[o,x]=(0,n.useState)(!0),[y,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{const w=se(W(U,"users")),p=le(w,m=>{try{const D=m.docs.map(I=>({id:I.id,...I.data()})).sort((I,_)=>I.createdAt&&_.createdAt?_.createdAt.toMillis()-I.createdAt.toMillis():I.createdAt?-1:_.createdAt?1:0);c(D),x(!1)}catch(D){console.error("Error processing users snapshot:",D),u("Failed to process users data"),x(!1)}},m=>{console.error("Error fetching users:",m),u("Failed to fetch users"),x(!1)});return()=>p()},[]);const j=async(w,p)=>{try{const m=ne(U,"users",w);await ue(m,{isBlocked:!p})}catch(m){console.error("Error updating user block status:",m),u("Failed to update user status")}},b=w=>{if(!w)return"N/A";try{return w.toDate().toLocaleDateString()}catch{return"Invalid Date"}};return o?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]})}):y?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md w-full text-center",children:[(0,e.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100",children:(0,e.jsx)(Je,{className:"h-10 w-10 text-red-600"})}),(0,e.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Error Loading Users"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:y})]})}):(0,e.jsxs)("div",{className:"p-4 md:p-6",children:[(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,e.jsx)("p",{className:"mt-1 text-gray-600",children:"Manage user accounts and block/unblock users"})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:(0,e.jsxs)("div",{className:"overflow-x-auto",children:[(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Join Date"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(w=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-indigo-800 font-medium",children:w.name?.charAt(0)?.toUpperCase()||"U"})}),(0,e.jsx)("div",{className:"ml-4",children:(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:w.name||"N/A"})})]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("div",{className:"text-sm text-gray-900",children:w.email||"N/A"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,e.jsx)(Xt,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),b(w.createdAt)]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.isBlocked?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:w.isBlocked?"Blocked":"Active"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,e.jsx)("button",{onClick:()=>j(w.id,w.isBlocked),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors duration-200 ${w.isBlocked?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:w.isBlocked?"Unblock":"Block"})})]},w.id))})]}),r.length===0&&(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)(Je,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,e.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),(0,e.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"There are no users in the system yet."})]})]})})]})},oa=na;const ia=async()=>{try{const r=be.currentUser;if(!r)return!1;const c=ne(U,"users",r.uid),o=await Se(c);return o.exists()?o.data().isBlocked===!0:!1}catch(r){return console.error("Error checking user block status:",r),!1}},la=async r=>{try{await $e(be),r&&r("/blocked")}catch(c){console.error("Error signing out blocked user:",c)}},da=async r=>{const c=await ia();return c&&await la(r),c};var ca=({children:r})=>{const c=ve(),{currentUser:o}=he();return(0,n.useEffect)(()=>{const x=async()=>{if(o)try{await da(c)}catch(u){console.error("Error checking user block status:",u)}};x();const y=setInterval(x,6e4);return()=>clearInterval(y)},[o,c]),(0,e.jsx)(e.Fragment,{children:r})},ma=ca;function ua({children:r}){const{currentUser:c}=he();return c?r:(0,e.jsx)(it,{to:"/login"})}function nt({children:r}){const{currentUser:c}=he();return c?(0,e.jsx)(it,{to:"/dashboard"}):r}function xa(){const[r,c]=(0,n.useState)(!1);return r?(0,e.jsxs)(Ut,{children:[(0,e.jsx)(ie,{path:"/login",element:(0,e.jsx)(nt,{children:(0,e.jsx)(Ns,{})})}),(0,e.jsx)(ie,{path:"/signup",element:(0,e.jsx)(nt,{children:(0,e.jsx)(_s,{})})}),(0,e.jsx)(ie,{path:"/blocked",element:(0,e.jsx)(ra,{})}),(0,e.jsxs)(ie,{path:"/",element:(0,e.jsx)(ua,{children:(0,e.jsx)(ma,{children:(0,e.jsx)(Rs,{})})}),children:[(0,e.jsx)(ie,{index:!0,element:(0,e.jsx)(Xe,{})}),(0,e.jsx)(ie,{path:"profile",element:(0,e.jsx)(Ss,{})}),(0,e.jsx)(ie,{path:"dashboard",element:(0,e.jsx)(Xe,{})}),(0,e.jsx)(ie,{path:"deposits",element:(0,e.jsx)(Es,{})}),(0,e.jsx)(ie,{path:"loans",element:(0,e.jsx)($s,{})}),(0,e.jsx)(ie,{path:"payback",element:(0,e.jsx)(As,{})}),(0,e.jsx)(ie,{path:"users",element:(0,e.jsx)(Os,{})}),(0,e.jsx)(ie,{path:"admin-users",element:(0,e.jsx)(oa,{})}),(0,e.jsx)(ie,{path:"settings",element:(0,e.jsx)(Gs,{})}),(0,e.jsx)(ie,{path:"chat",element:(0,e.jsx)(Is,{})}),(0,e.jsx)(ie,{path:"annual-reports",element:(0,e.jsx)(ea,{})})]})]}):(0,e.jsx)(sa,{onAccessGranted:()=>c(!0)})}var ha=xa;bs.use(xs).use(Gt).init({resources:{en:{translation:{dashboard:"Dashboard",deposits:"Deposits",loans:"Loans",chat:"Chat",users:"Users",payback:"Payback",settings:"Settings",block_users:"Block Users",annual_reports:"Annual Reports",logout:"Logout",admin_panel:"Admin Panel",moneybox:"MoneyBox",total_users:"Total Users",total_deposits:"Total Deposits",total_loans:"Total Loans",pending_loans:"Pending Loans",recent_activity:"Recent Activity",user_records:"User Records",search_users:"Search users...",deposit_of:"Deposit of",loan_request:"Loan request",no_recent_activity:"No recent activity",no_recent_activity_description:"No recent deposits or loans to show",invalid_date:"Invalid date",unknown_user:"Unknown User",live_transactions:"Live Transactions",transaction_trend:"Transaction Trend",view_all:"View all",type:"Type",user_id:"User ID",amount:"Amount",status:"Status",date:"Date",completed:"Completed",from_last_month:"from last month",loan_repayment_management:"Loan Repayment Management",review_manage_loan_repayments:"Review and manage loan repayments for accepted loans",search_by_user_name:"Search by user name...",accepted_loan_repayments:"Accepted Loan Repayments",loading_loan_repayments:"Loading loan repayments...",no_accepted_loans_found:"No accepted loans found",no_accepted_loans_at_moment:"There are no accepted loans at the moment.",loan_amount:"Loan Amount",interest_10_percent:"Interest (10%)",total_payable:"Total Payable",paid_amount:"Paid Amount",payment_date:"Payment Date",reviewed_at:"Reviewed At",proof_of_payment:"Proof of Payment",no_proof_provided:"No proof provided",approve:"Approve",deny:"Deny",payment_approved_successfully:"Payment approved successfully!",failed_to_approve_payment:"Failed to approve payment. Please try again.",payment_denied:"Payment denied.",failed_to_deny_payment:"Failed to deny payment. Please try again.",na:"N/A",user_details:"User Details",email:"Email",phone_number:"Phone Number",momo_number:"MoMo Number",credit_card:"Credit Card Number",gender:"Gender",age:"Age",joined_date:"Joined Date",no_users_found:"No users found.",user:"User",phone:"Phone",joined:"Joined",deposits_summary:"Deposits Summary",loans_summary:"Loans Summary",total_amount:"Total Amount",retry:"Retry",error_firestore_instance:"Firestore instance not available",error_process_users_data:"Failed to process users data",error_permission_denied:"Permission denied. Check Firestore rules.",error_load_users:"Failed to load users: ",unknown_error:"Unknown error",error_process_deposits_data:"Failed to process deposits data",error_load_deposits:"Failed to load deposits: ",error_process_loans_data:"Failed to process loans data",error_load_loans:"Failed to load loans: ",deposits_page_description:"Manage and review user deposits",search_deposits:"Search deposits...",all_statuses:"All Statuses",pending_deposits:"Pending Deposits",accepted_deposits:"Accepted Deposits",amount:"Amount",status:"Status",date:"Date",message:"Message",proof:"Proof",no_deposits_found:"No deposits found.",no_deposits_match:"No deposits match your search criteria.",approve:"Approve",deny:"Deny",actions:"Actions",view:"View",download:"Download",error_update_deposit_status:"Error updating deposit status: ",loans_page_description:"Manage and review user loans",search_loans:"Search loans...",pending_loans:"Pending Loans",accepted_loans:"Accepted Loans",reason:"Reason",approved_by:"Approved By",no_loans_found:"No loans found.",no_loans_match:"No loans match your search criteria.",receipt:"Receipt",error_update_loan_status:"Error updating loan status: ",user_management:"User Management",join_date:"Join Date",active:"Active",blocked:"Blocked",block:"Block",unblock:"Unblock",no_users_management:"No users found",user_management_description:"Manage user accounts and block/unblock users",error_fetch_users:"Failed to fetch users",error_update_user_status:"Failed to update user status",error_loading_users:"Error Loading Users",interest_rate_settings:"Interest Rate Settings",interest_rate_settings_description:"Set and manage the annual interest rate for savings",current_interest_rate:"Current Interest Rate",interest_rate_percentage:"Interest Rate (%)",enter_interest_rate:"Enter interest rate",interest_rate_help_text:"Enter the annual interest rate as a percentage (0-100)",preview:"Preview",current_rate:"Current Rate",annual_percentage_rate:"Annual Percentage Rate",saving:"Saving...",save_changes:"Save Changes",interest_rate_history:"Interest Rate History",show_history:"Show History",hide_history:"Hide History",timestamp:"Timestamp",rate:"Rate",interest_rate:"Interest Rate",no_history_data:"No history data available",error_fetch_interest_rate:"Error fetching interest rate",error_invalid_interest_rate:"Please enter a valid interest rate",error_interest_rate_range:"Interest rate must be between 0 and 100",success_interest_rate_saved:"Interest rate saved successfully!",error_save_interest_rate:"Error saving interest rate: ",annual_reports_title:"Annual Reports",annual_reports_description:"Generate and export financial reports for users",report_for:"Report for",select_year:"Select Year",select_month:"Select Month",generate_report:"Generate Report",generating:"Generating...",export_to_csv:"Export to CSV",all_months:"All Months",user_name:"User Name",total_deposits_user:"Total Deposits",total_loans_user:"Total Loans",net_balance:"Net Balance",no_data_available:"No data available",no_report_data_message:"No report data available for the selected period",error_generate_report:"Error generating report",pending:"Pending",accepted:"Accepted",denied:"Denied",rejected:"Rejected",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",loading:"Loading...",n_a:"N/A",no_name:"No name",unknown:"Unknown",actions:"Actions",view:"View",download:"Download"}},ar:{translation:{dashboard:"Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©",deposits:"Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹",loans:"Ø§Ù„Ù‚Ø±ÙˆØ¶",chat:"Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©",users:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†",payback:"Ø§Ù„Ø³Ø¯Ø§Ø¯",settings:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",block_users:"Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",annual_reports:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø³Ù†ÙˆÙŠØ©",logout:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",admin_panel:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",moneybox:"ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ø§Ù„",total_users:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",total_deposits:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹",total_loans:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚Ø±ÙˆØ¶",pending_loans:"Ø§Ù„Ù‚Ø±ÙˆØ¶ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©",recent_activity:"Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±",user_records:"Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",search_users:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†...",deposit_of:"ÙˆØ¯ÙŠØ¹Ø© Ø¨Ù‚ÙŠÙ…Ø©",loan_request:"Ø·Ù„Ø¨ Ù‚Ø±Ø¶",no_recent_activity:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø´Ø§Ø· Ø­Ø¯ÙŠØ«",no_recent_activity_description:"Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¯Ø§Ø¦Ø¹ Ø£Ùˆ Ù‚Ø±ÙˆØ¶ Ø­Ø¯ÙŠØ«Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§",invalid_date:"ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ§Ù„Ø­",unknown_user:"Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",live_transactions:"Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©",transaction_trend:"Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",view_all:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„",type:"Ø§Ù„Ù†ÙˆØ¹",user_id:"Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",amount:"Ø§Ù„Ù…Ø¨Ù„Øº",status:"Ø§Ù„Ø­Ø§Ù„Ø©",date:"Ø§Ù„ØªØ§Ø±ÙŠØ®",completed:"Ù…ÙƒØªÙ…Ù„",from_last_month:"Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ",loan_repayment_management:"Ø¥Ø¯Ø§Ø±Ø© Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±Ø¶",review_manage_loan_repayments:"Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ¥Ø¯Ø§Ø±Ø© Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±ÙˆØ¶ Ù„Ù„Ù‚Ø±ÙˆØ¶ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©",search_by_user_name:"Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...",accepted_loan_repayments:"Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±ÙˆØ¶ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©",loading_loan_repayments:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±ÙˆØ¶...",no_accepted_loans_found:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‚Ø±ÙˆØ¶ Ù…Ù‚Ø¨ÙˆÙ„Ø©",no_accepted_loans_at_moment:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø±ÙˆØ¶ Ù…Ù‚Ø¨ÙˆÙ„Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ.",loan_amount:"Ù…Ø¨Ù„Øº Ø§Ù„Ù‚Ø±Ø¶",interest_10_percent:"Ø§Ù„ÙØ§Ø¦Ø¯Ø© (10%)",total_payable:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ­Ù‚",paid_amount:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹",payment_date:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹",reviewed_at:"ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙÙŠ",proof_of_payment:"Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹",no_proof_provided:"Ù„Ù… ÙŠØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø¥Ø«Ø¨Ø§Øª",approve:"Ù…ÙˆØ§ÙÙ‚Ø©",deny:"Ø±ÙØ¶",payment_approved_successfully:"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­!",failed_to_approve_payment:"ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙØ¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",payment_denied:"ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø¯ÙØ¹.",failed_to_deny_payment:"ÙØ´Ù„ ÙÙŠ Ø±ÙØ¶ Ø§Ù„Ø¯ÙØ¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",na:"ØºÙŠØ± Ù…ØªÙˆÙØ±",user_details:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",email:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",phone_number:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",momo_number:"Ø±Ù‚Ù… Ù…ÙˆÙ…Ùˆ",credit_card:"Ø±Ù‚Ù… Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù†",gender:"Ø§Ù„Ø¬Ù†Ø³",age:"Ø§Ù„Ø¹Ù…Ø±",joined_date:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…",no_users_found:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.",user:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",phone:"Ø§Ù„Ù‡Ø§ØªÙ",joined:"Ø§Ù†Ø¶Ù…",deposits_summary:"Ù…Ù„Ø®Øµ Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹",loans_summary:"Ù…Ù„Ø®Øµ Ø§Ù„Ù‚Ø±ÙˆØ¶",total_amount:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",retry:"Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©",error_firestore_instance:"Ù…Ø«ÙŠÙ„ Firestore ØºÙŠØ± Ù…ØªÙˆÙØ±",error_process_users_data:"ÙØ´Ù„ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",error_permission_denied:"ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø¥Ø°Ù†. ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙˆØ§Ø¹Ø¯ Firestore.",error_load_users:"ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: ",unknown_error:"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",error_process_deposits_data:"ÙØ´Ù„ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹",error_load_deposits:"ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹: ",error_process_loans_data:"ÙØ´Ù„ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø±ÙˆØ¶",error_load_loans:"ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±ÙˆØ¶: ",deposits_page_description:"Ø¥Ø¯Ø§Ø±Ø© ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ¯Ø§Ø¦Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",search_deposits:"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹...",all_statuses:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª",pending_deposits:"Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©",accepted_deposits:"Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©",amount:"Ø§Ù„Ù…Ø¨Ù„Øº",status:"Ø§Ù„Ø­Ø§Ù„Ø©",date:"Ø§Ù„ØªØ§Ø±ÙŠØ®",message:"Ø§Ù„Ø±Ø³Ø§Ù„Ø©",proof:"Ø§Ù„Ø¥Ø«Ø¨Ø§Øª",no_deposits_found:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙˆØ¯Ø§Ø¦Ø¹.",no_deposits_match:"Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¯Ø§Ø¦Ø¹ ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ.",approve:"Ù…ÙˆØ§ÙÙ‚Ø©",deny:"Ø±ÙØ¶",actions:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",view:"Ø¹Ø±Ø¶",download:"ØªØ­Ù…ÙŠÙ„",error_update_deposit_status:"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ¯ÙŠØ¹Ø©: ",loans_page_description:"Ø¥Ø¯Ø§Ø±Ø© ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø±ÙˆØ¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",search_loans:"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±ÙˆØ¶...",pending_loans:"Ø§Ù„Ù‚Ø±ÙˆØ¶ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©",accepted_loans:"Ø§Ù„Ù‚Ø±ÙˆØ¶ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©",reason:"Ø§Ù„Ø³Ø¨Ø¨",approved_by:"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¨ÙˆØ§Ø³Ø·Ø©",no_loans_found:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‚Ø±ÙˆØ¶.",no_loans_match:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø±ÙˆØ¶ ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ.",receipt:"Ø§Ù„Ø¥ÙŠØµØ§Ù„",error_update_loan_status:"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù‚Ø±Ø¶: ",user_management:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",join_date:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…",active:"Ù†Ø´Ø·",blocked:"Ù…Ø­Ø¸ÙˆØ±",block:"Ø­Ø¸Ø±",unblock:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø±",no_users_management:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",user_management_description:"Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ­Ø¸Ø±Ù‡Ù…/Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø±",error_fetch_users:"ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",error_update_user_status:"ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",error_loading_users:"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",interest_rate_settings:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø©",interest_rate_settings_description:"ØªØ¹ÙŠÙŠÙ† ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø³Ù†ÙˆÙŠ Ù„Ù„ØªÙˆÙÙŠØ±",current_interest_rate:"Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ",interest_rate_percentage:"Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø© (Ùª)",enter_interest_rate:"Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø©",interest_rate_help_text:"Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø³Ù†ÙˆÙŠ ÙƒÙ†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© (0-100)",preview:"Ù…Ø¹Ø§ÙŠÙ†Ø©",current_rate:"Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ",annual_percentage_rate:"Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ø§Ù„Ø³Ù†ÙˆÙŠ",saving:"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...",save_changes:"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª",interest_rate_history:"Ø³Ø¬Ù„ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø©",show_history:"Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„",hide_history:"Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ø¬Ù„",timestamp:"Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠ",rate:"Ø§Ù„Ù…Ø¹Ø¯Ù„",interest_rate:"Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø©",no_history_data:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø¬Ù„ Ù…ØªØ§Ø­Ø©",error_fetch_interest_rate:"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø©",error_invalid_interest_rate:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ø¯Ù„ ÙØ§Ø¦Ø¯Ø© ØµØ­ÙŠØ­",error_interest_rate_range:"ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø¨ÙŠÙ† 0 Ùˆ 100",success_interest_rate_saved:"ØªÙ… Ø­ÙØ¸ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­!",error_save_interest_rate:"Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ§Ø¦Ø¯Ø©: ",annual_reports_title:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø³Ù†ÙˆÙŠØ©",annual_reports_description:"Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",report_for:"ØªÙ‚Ø±ÙŠØ± Ù„Ù€",select_year:"Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©",select_month:"Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø±",generate_report:"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±",generating:"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...",export_to_csv:"ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ CSV",all_months:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ù‡ÙˆØ±",user_name:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",total_deposits_user:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØ¯Ø§Ø¦Ø¹",total_loans_user:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚Ø±ÙˆØ¶",net_balance:"ØµØ§ÙÙŠ Ø§Ù„Ø±ØµÙŠØ¯",no_data_available:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©",no_report_data_message:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ‚Ø±ÙŠØ± Ù…ØªØ§Ø­Ø© Ù„Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©",error_generate_report:"Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±",pending:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",accepted:"Ù…Ù‚Ø¨ÙˆÙ„",denied:"Ù…Ø±ÙÙˆØ¶",rejected:"Ù…Ø±ÙÙˆØ¶",january:"ÙŠÙ†Ø§ÙŠØ±",february:"ÙØ¨Ø±Ø§ÙŠØ±",march:"Ù…Ø§Ø±Ø³",april:"Ø£Ø¨Ø±ÙŠÙ„",may:"Ù…Ø§ÙŠÙˆ",june:"ÙŠÙˆÙ†ÙŠÙˆ",july:"ÙŠÙˆÙ„ÙŠÙˆ",august:"Ø£ØºØ³Ø·Ø³",september:"Ø³Ø¨ØªÙ…Ø¨Ø±",october:"Ø£ÙƒØªÙˆØ¨Ø±",november:"Ù†ÙˆÙÙ…Ø¨Ø±",december:"Ø¯ÙŠØ³Ù…Ø¨Ø±",loading:"Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...",n_a:"ØºÙŠØ± Ù…ØªÙˆÙØ±",no_name:"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…",unknown:"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",actions:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",view:"Ø¹Ø±Ø¶",download:"ØªØ­Ù…ÙŠÙ„"}},rw:{translation:{dashboard:"Ikibaho",deposits:"Amafaranga yatanzwe",loans:"Utwaro",chat:"Ikiganiro",users:"Abakoresha",payback:"Gusubiza amafaranga",settings:"Amagenamiterere",block_users:"Gufunga abakoresha",annual_reports:"Raporo za mbala",logout:"Gusohoka",admin_panel:"Ikibaho cy'uyobozi",moneybox:"Agace k'amafaranga",total_users:"Abakoresha bose",total_deposits:"Amafaranga yatanzwe yose",total_loans:"Utwaro twose",pending_loans:"Utwaro utegereje",recent_activity:"Ibikorwa biheruka",user_records:"Amakuru y'abakoresha",search_users:"Shakisha abakoresha...",deposit_of:"Amafaranga yatanzwe ya",loan_request:"Gusaba utwaro",no_recent_activity:"Nta bikorwa biheruka",no_recent_activity_description:"Nta matanzwe cyangwa utwaro biheruka kugaragaza",invalid_date:"Itariki itemewe",unknown_user:"Umukoresha utazwi",live_transactions:"Ibicuruzwa by'ubu buryo",transaction_trend:"Imyumvire y'ibicuruzwa",view_all:"Reba byose",type:"Ubwoko",user_id:"Indangamuntu y'umukoresha",amount:"Umubare",status:"Imimerere",date:"Itariki",completed:"Byarangiye",from_last_month:"kuva kwezi ishize",loan_repayment_management:"Gutunganya gusubiza utwaro",review_manage_loan_repayments:"Reba kandi utunganye gusubiza utwaro kubatwaro b'emewe",search_by_user_name:"Shakisha izina ry'umukoresha...",accepted_loan_repayments:"Gusubiza utwaro b'emewe",loading_loan_repayments:"Biratangira gusubiza utwaro...",no_accepted_loans_found:"Nta twaro twemewe twabonetse",no_accepted_loans_at_moment:"Nta twaro twemewe hari ubu.",loan_amount:"Umubare w'utwaro",interest_10_percent:"Inyungu (10%)",total_payable:"Igiteranyo gisigaye",paid_amount:"Umubare wandatuwe",payment_date:"Itariki yo kwishyura",reviewed_at:"Byarebwe ku",proof_of_payment:"Icyemezo cyo kwishyura",no_proof_provided:"Nta cyemezo cyatanzwe",approve:"Emera",deny:"Hana",payment_approved_successfully:"Gwishyura byemewe neza!",failed_to_approve_payment:"Ntibyashobotse kwemera kwishyura. Ongera ugerageze.",payment_denied:"Gwishyura byanze.",failed_to_deny_payment:"Ntibyashobotse guhana kwishyura. Ongera ugerageze.",na:"Nta kinaboneka",user_details:"Ibisobanuro by'umukoresha",email:"Imeri",phone_number:"Nimero ya telefoni",momo_number:"Nimero ya MoMo",credit_card:"Nimero ya karita y'ibyunguzo",gender:"Igitsina",age:"Imyaka",joined_date:"Itariki y'ijoina",no_users_found:"Nta mukoresha wahitamo.",user:"Umukoresha",phone:"Telefoni",joined:"Yajoiye",deposits_summary:"Incamake y'amafaranga yatanzwe",loans_summary:"Incamake y'utwaro",total_amount:"Umubare wose",retry:"Ongera ugerageze",error_firestore_instance:"Nta mboni wa Firestore ihari",error_process_users_data:"Ntibyashobotse gukorera amakuru y'abakoresha",error_permission_denied:"Uruhushya rwahawe. Reba amategeko ya Firestore.",error_load_users:"Ntibyashobotse gufungura abakoresha: ",unknown_error:"Ikosa ritazwi",error_process_deposits_data:"Ntibyashobotse gukorera amakuru y'amafaranga yatanzwe",error_load_deposits:"Ntibyashobotse gufungura amafaranga yatanzwe: ",error_process_loans_data:"Ntibyashobotse gukorera amakuru y'utwaro",error_load_loans:"Ntibyashobotse gufungura utwaro: ",deposits_page_description:"Tunganya kandi urebe amafaranga yatanzwe nabakoresha",search_deposits:"Shakisha amafaranga yatanzwe...",all_statuses:"Imimerere yose",pending_deposits:"Amafaranga yatanzwe ategeje",accepted_deposits:"Amafaranga yatanzwe yemewe",amount:"Umubare",status:"Imimerere",date:"Itariki",message:"Ubutumwa",proof:"Icyemezo",no_deposits_found:"Nta faranga wahitamo.",no_deposits_match:"Nta matanzwe wahuye n'ibyo ushaka.",approve:"Emera",deny:"Hana",actions:"Ibikorwa",view:"Reba",download:"Kuramo",error_update_deposit_status:"Ikosa ryo kuvugurura imimerere y'amafaranga yatanzwe: ",loans_page_description:"Tunganya kandi urebe utwaro rwabakoresha",search_loans:"Shakisha utwaro...",pending_loans:"Utwaro rutegereje",accepted_loans:"Utwaro rwemewe",reason:"Impamvu",approved_by:"Byemejwe na",no_loans_found:"Nta twaro wahitamo.",no_loans_match:"Nta twaro thawuye n'ibyo ushaka.",receipt:"Inyemezwa",error_update_loan_status:"Ikosa ryo kuvugurura imimerere y'utwaro: ",user_management:"Gutunganya abakoresha",join_date:"Itariki y'ijoina",active:"Birakora",blocked:"Bifungiriwe",block:"Funga",unblock:"Fungura",no_users_management:"Nta mukoresha wahitamo",user_management_description:"Tunganya konti z'abakoresha kandi ubafunge/cyangwa ubafungure",error_fetch_users:"Ntibyashobotse gufata abakoresha",error_update_user_status:"Ntibyashobotse gushyiraho imimerere y'umukoresha",error_loading_users:"Ikosa ryo gutangira abakoresha",interest_rate_settings:"Amagenamiterere y'igipimo cy'imburira",interest_rate_settings_description:"Shyiraho kandi utunganye igipimo cy'imburira y'umwaka y'amafaranga yatanzwe",current_interest_rate:"Igipimo cy'imburira kigezweho",interest_rate_percentage:"Igipimo cy'imburira (%)",enter_interest_rate:"Injiza igipimo cy'imburira",interest_rate_help_text:"Injiza igipimo cy'imburira y'umwaka nk'igipimo (0-100)",preview:"Igaragazo",current_rate:"Igipimo kigezweho",annual_percentage_rate:"Igipimo cy'igice kuri kanya",saving:"Birimo kubika...",save_changes:"Bika impinduka",interest_rate_history:"Urutonde rw'igipimo cy'imburira",show_history:"Garagaza urutonde",hide_history:"Hisha urutonde",timestamp:"Itariki n'isaha",rate:"Igipimo",interest_rate:"Igipimo cy'imburira",no_history_data:"Nta makuru y'urutonde ahari",error_fetch_interest_rate:"Ikosa ryo gufata igipimo cy'imburira",error_invalid_interest_rate:"Nyamuneka injiza igipimo cy'imburira cyemewe",error_interest_rate_range:"Igipimo cy'imburira kigomba kuba hagati ya 0 na 100",success_interest_rate_saved:"Igipimo cy'imburira cyabitswe neza!",error_save_interest_rate:"Ikosa ryo kubika igipimo cy'imburira: ",annual_reports_title:"Raporo za mbala",annual_reports_description:"Tangaza kandi usohoze raporo z'amafaranga zabakoresha",report_for:"Raporo ya",select_year:"Hitamo umwaka",select_month:"Hitamo ukwezi",generate_report:"Tangaza raporo",generating:"Biratangira...",export_to_csv:"Sohoza kuri CSV",all_months:"Amezi yose",user_name:"Izina ry'umukoresha",total_deposits_user:"Amafaranga yatanzwe yose",total_loans_user:"Utwaro twose",net_balance:"Amafaranga asigaye",no_data_available:"Nta makuru ahari",no_report_data_message:"Nta makuru y'iraporo ahari igihe cyatoranijwe",error_generate_report:"Ikosa ryo kutangaza raporo",pending:"Bitegereje",accepted:"Byemewe",denied:"Byanze",rejected:"Byanze",january:"Mutarama",february:"Gashyantare",march:"Werurwe",april:"Mata",may:"Gicurasi",june:"Kamena",july:"Nyakanga",august:"Kanama",september:"Nzeli",october:"Ukwakira",november:"Ugushyingo",december:"Ukuboza",loading:"Biratangira...",n_a:"Nta kinaboneka",no_name:"Nta zina",unknown:"Kitazwi",actions:"Ibikorwa",view:"Reba",download:"Kuramo"}}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},detection:{caches:["localStorage"],excludeCacheFor:["cimode"],htmlTag:document.documentElement,order:["localStorage","navigator"]}});(0,ws.createRoot)(document.getElementById("root")).render((0,e.jsx)(n.StrictMode,{children:(0,e.jsx)(vs,{children:(0,e.jsx)(It,{children:(0,e.jsx)(ha,{})})})}));
