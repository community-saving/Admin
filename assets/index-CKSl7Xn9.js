import{o as Ae}from"./rolldown-runtime-O3PcEg2i.js";import{a as Ee,c as Ue,d as St,i as Pe,l as Fe,n as st,o as Te,r as Ie,s as Ve,t as Dt}from"./charting-BTEZ5LFh.js";import{t as kt}from"./react-dom-B_yxW9B6.js";import{a as ne,c as be,i as Ct,n as $e,o as At,r as at,s as Lt,t as Et}from"./react-router-DN1Q4BFP.js";import{_ as Ut,a as pe,b as Pt,c as ie,d as xe,f as rt,g as Ft,h as Tt,i as Se,l as me,m as he,n as Q,o as It,p as de,r as ee,s as Rt,t as Mt,u as se,v as $t,y as Re}from"./firebase-CyM-FwhB.js";import{a as zt,c as Yt,i as Ot,l as _t,n as Bt,o as Wt,r as Vt,s as qt,t as Gt,u as Kt}from"./react-CbSgh8yl.js";import{C as Ht,D as Zt,E as Qt,O as Xt,S as Me,T as Jt,_ as nt,a as es,b as it,c as ts,d as qe,f as ss,g as ze,h as as,i as Ge,k as rs,l as ns,m as lt,n as is,o as Ke,p as ls,r as ot,s as je,t as De,u as os,v as ke,w as ds,x as ye,y as Ce}from"./lucide-icons-Bw25EZYu.js";import{Bt as dt,Ft as cs,Ht as ms,It as xs,Lt as us,Rt as hs,Vt as gs,zt as ps}from"./vendor-C04N904u.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const c of f)if(c.type==="childList")for(const N of c.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&u(N)}).observe(document,{childList:!0,subtree:!0});function n(f){const c={};return f.integrity&&(c.integrity=f.integrity),f.referrerPolicy&&(c.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?c.credentials="include":f.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(f){if(f.ep)return;f.ep=!0;const c=n(f);fetch(f.href,c)}})();var fs=Ae(kt()),t=Ae(St()),ct=Pt({apiKey:"AIzaSyAGm3bzsCxYSARcgVn41ta_EOut9fauWr0",authDomain:"ecommerce-74229.firebaseapp.com",projectId:"ecommerce-74229",storageBucket:"ecommerce-74229.firebasestorage.app",messagingSenderId:"47160479095",appId:"1:47160479095:web:0dd3a844d5d5c3847ea572",measurementId:"G-47FYXTR59Z"}),ge=Ft(ct),F=It(ct),e=Ae(Kt()),mt=(0,t.createContext)();const ue=()=>(0,t.useContext)(mt),ys=({children:s})=>{const[l,n]=(0,t.useState)(null),[u,f]=(0,t.useState)(!0),c=(m,h)=>Tt(ge,m,h),N=async(m,h)=>{try{const C=await $t(ge,m,h),k=C.user,b=ee(F,"users",k.uid),E=await Se(b);if(E.exists()&&E.data().isBlocked===!0)throw await Re(ge),new Error("Account is blocked");return C}catch(C){throw C}},g=()=>Re(ge);(0,t.useEffect)(()=>Ut(ge,m=>{n(m),f(!1)}),[]);const y={currentUser:l,signup:c,login:N,logout:g};return(0,e.jsx)(mt.Provider,{value:y,children:u?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s})};function js(){const s=(0,t.useRef)(),l=(0,t.useRef)(),{login:n}=ue(),u=be(),[f,c]=(0,t.useState)(""),[N,g]=(0,t.useState)(!1),y=async m=>{m.preventDefault();try{c(""),g(!0),await n(s.current.value,l.current.value),u("/dashboard")}catch(h){h.message==="Account is blocked"?u("/blocked"):c("Failed to sign in. Please check your credentials and try again.")}g(!1)};return(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-400 to-gray-100 p-4",children:(0,e.jsx)("div",{className:"w-full max-w-md",children:(0,e.jsxs)("form",{onSubmit:y,className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsx)("div",{className:"mx-auto w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,e.jsx)("span",{className:"text-white font-bold text-xl",children:"MB"})}),(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),f&&(0,e.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-6 text-sm",children:f}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,e.jsx)("input",{type:"email",id:"email",ref:s,placeholder:"Enter your email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,e.jsx)("input",{type:"password",id:"password",ref:l,placeholder:"Enter your password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsx)("button",{disabled:N,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-lg transition-colors duration-200 disabled:opacity-50",children:N?"Signing In...":"Sign In"}),(0,e.jsxs)("p",{className:"mt-6 text-center text-gray-600",children:["Don't have an account?"," ",(0,e.jsx)($e,{to:"/signup",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Sign Up"})]})]})})})}function bs(){const s=(0,t.useRef)(),l=(0,t.useRef)(),n=(0,t.useRef)(),{signup:u}=ue(),f=be(),[c,N]=(0,t.useState)(""),[g,y]=(0,t.useState)(!1),m=async h=>{if(h.preventDefault(),l.current.value!==n.current.value)return N("Passwords do not match");if(l.current.value.length<6)return N("Password should be at least 6 characters");try{N(""),y(!0),await u(s.current.value,l.current.value),f("/dashboard")}catch{N("Failed to create an account. Please try again.")}y(!1)};return(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-400 to-gray-100 p-4",children:(0,e.jsx)("div",{className:"w-full max-w-md",children:(0,e.jsxs)("form",{onSubmit:m,className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsx)("div",{className:"mx-auto w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,e.jsx)("span",{className:"text-white font-bold text-xl",children:"MB"})}),(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign up to get started"})]}),c&&(0,e.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-6 text-sm",children:c}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,e.jsx)("input",{type:"email",id:"email",ref:s,placeholder:"Enter your email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,e.jsx)("input",{type:"password",id:"password",ref:l,placeholder:"Create a password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,e.jsx)("input",{type:"password",id:"confirmPassword",ref:n,placeholder:"Confirm your password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,e.jsx)("button",{disabled:g,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-lg transition-colors duration-200 disabled:opacity-50",children:g?"Creating Account...":"Sign Up"}),(0,e.jsxs)("p",{className:"mt-6 text-center text-gray-600",children:["Already have an account?"," ",(0,e.jsx)($e,{to:"/login",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Sign In"})]})]})})})}var Ns=()=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{children:"Create your porfile"}),(0,e.jsxs)("form",{action:"",children:[(0,e.jsx)("input",{type:"text",placeholder:"Your full name "}),(0,e.jsx)("input",{type:"email",placeholder:"Your email",name:"",id:""}),(0,e.jsx)("input",{type:"number",placeholder:"You phone number ",name:"",id:""}),(0,e.jsx)("input",{type:"number",placeholder:"You Age  ",name:"",id:""}),(0,e.jsxs)("option",{value:"",children:[(0,e.jsx)("select",{name:"male",id:"",children:"Male"}),(0,e.jsx)("select",{name:"female",id:"",children:"Female"})]}),(0,e.jsx)("input",{type:"file",placeholder:"Upload your photo"}),(0,e.jsx)("button",{type:"submit",children:"Create account"})]})]})}),ws=Ns,vs=()=>{const[s,l]=(0,t.useState)(0),[n,u]=(0,t.useState)(0),[f,c]=(0,t.useState)(0),[N,g]=(0,t.useState)(0),[y,m]=(0,t.useState)(!1),[h,C]=(0,t.useState)(!1),[k,b]=(0,t.useState)(!1),[E,T]=(0,t.useState)([]),[w,x]=(0,t.useState)([]),[D,v]=(0,t.useState)([]),[I,Y]=(0,t.useState)(!0),[U,O]=(0,t.useState)({width:window.innerWidth,height:window.innerHeight});(0,t.useEffect)(()=>{const o=()=>{O({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const W=o=>new Date(o).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",hour12:!0});(0,t.useEffect)(()=>{if(!F){b("Firestore instance not available"),Y(!1);return}const o=se(Q(F,"users"),me("createdAt","desc")),P=ie(o,M=>{try{const _=M.docs.map(B=>({id:B.id,...B.data()}));v(_),g(_.length),Y(!1),b(!1)}catch(_){console.error("Error processing users snapshot:",_),b("Failed to process users data"),Y(!1)}},M=>{console.error("Error fetching users:",M),M.code==="permission-denied"?b("Permission denied. Check Firestore rules."):b("Failed to load users: "+(M.message||"Unknown error")),Y(!1)});return()=>P()},[]);const X=({active:o,payload:P,label:M})=>{if(o&&P&&P.length){const _=P[0].payload,B=U.width<768;return(0,e.jsxs)("div",{className:`bg-white border border-gray-200 shadow-lg rounded-md ${B?"p-2":"p-4"}`,children:[(0,e.jsx)("p",{className:`font-medium text-gray-900 ${B?"text-xs":"text-sm"}`,children:W(_.timestamp)}),(0,e.jsxs)("p",{className:`text-indigo-600 ${B?"text-xs":"text-sm"}`,children:["Deposits: $",_.deposits.toFixed(2)]}),(0,e.jsxs)("p",{className:`text-red-600 ${B?"text-xs":"text-sm"}`,children:["loans: $",_.loans.toFixed(2)]})]})}return null},p=(o,P,M=20)=>{const _=[];return o.forEach(B=>{const i=B.timestamp?.toDate?.()||new Date(B.timestamp);_.push({timestamp:i,name:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),deposits:Number(B.amount)||0,loans:0})}),P.forEach(B=>{const i=B.timestamp?.toDate?.()||new Date(B.timestamp);_.push({timestamp:i,name:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),deposits:0,loans:Number(B.amount)||0})}),_.sort((B,i)=>B.timestamp-i.timestamp),_.slice(-M)};(0,t.useEffect)(()=>{if(!F){console.error("Firestore database instance not available"),m(!0),C(!0);return}let o=[],P=[];const M=se(Q(F,"deposits"),me("timestamp","desc")),_=ie(M,$=>{try{let R=0;o=[],$.forEach(q=>{const ae=q.data();ae.amount&&(R+=parseFloat(ae.amount)),o.push({id:q.id,...ae,timestamp:ae.timestamp})}),l(R),m(!1);const J=p(o,P);T(J),x(q=>[...o.slice(0,3).map(ae=>({id:ae.id,type:"deposit",userId:ae.userId,amount:ae.amount,timestamp:ae.timestamp?.toDate?.()||new Date})),...q].slice(0,6))}catch(R){console.error("Error processing deposits data:",R),m(!0)}},$=>{console.error("Error fetching deposits:",$),m(!0)}),B=se(Q(F,"loans"),me("timestamp","desc")),i=ie(B,$=>{try{let R=0,J=0;P=[],$.forEach(ae=>{const oe=ae.data();oe.amount&&(R+=parseFloat(oe.amount)),oe.status==="pending"&&(J+=1),P.push({id:ae.id,...oe,timestamp:oe.timestamp})}),u(R),c(J),C(!1);const q=p(o,P);T(q),x(ae=>[...P.slice(0,3).map(oe=>({id:oe.id,type:"cashout",userId:oe.userId,amount:oe.amount,status:oe.status,timestamp:oe.timestamp?.toDate?.()||new Date})),...ae].slice(0,6))}catch(R){console.error("Error processing loans data:",R),C(!0)}},$=>{console.error("Error fetching loans:",$),C(!0)});return()=>{_(),i()}},[]);const S=o=>`$${o.toFixed(2)}`,L=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=[{id:1,name:"Total Deposits",value:y?"N/A":S(s),change:"+12.5%",changeType:"positive",icon:ke,iconColor:"bg-indigo-500"},{id:2,name:"Total loans",value:h?"N/A":S(n),change:"+8.2%",changeType:"positive",icon:Ce,iconColor:"bg-red-500"},{id:3,name:"Pending loans",value:h?"N/A":f,change:"+3.1%",changeType:"negative",icon:rs,iconColor:"bg-yellow-500"},{id:4,name:"Total Users",value:k?"N/A":N,change:"+5.4%",changeType:"positive",icon:ot,iconColor:"bg-green-500"}],d=(()=>{const o=U.width<768,P=U.width>=768&&U.width<1024;return{margin:{top:o?5:10,right:o?10:30,left:o?5:20,bottom:o?10:5},tickFontSize:o?8:P?10:12,interval:o?"preserveStartEnd":0,minTickGap:o?10:15,barSize:o?10:15,animationDuration:o?500:800,gridStrokeDasharray:o?"2 2":"3 3"}})();return I?(0,e.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:r.map(o=>(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6 transition-all duration-200 hover:shadow-md",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:o.name}),(0,e.jsx)("p",{className:"mt-1 sm:mt-2 text-2xl sm:text-3xl font-bold text-gray-900",children:o.value})]}),(0,e.jsx)("div",{className:`p-2 sm:p-3 rounded-full ${o.iconColor}`,children:(0,e.jsx)(o.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})]}),(0,e.jsxs)("div",{className:"mt-3 sm:mt-4 flex items-center",children:[o.changeType==="positive"?(0,e.jsx)(Zt,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500"}):(0,e.jsx)(Xt,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500"}),(0,e.jsx)("span",{className:`ml-1 text-xs sm:text-sm font-medium ${o.changeType==="positive"?"text-green-500":"text-red-500"}`,children:o.change}),(0,e.jsx)("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm text-gray-500",children:"from last month"})]})]},o.id))}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,e.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:"Live Transactions"}),(0,e.jsx)("div",{className:"h-64 sm:h-80 overflow-x-auto",children:(0,e.jsx)(Fe,{width:"100%",height:"100%",minWidth:300,children:(0,e.jsxs)(Dt,{data:E,margin:d.margin,children:[(0,e.jsx)(Te,{strokeDasharray:d.gridStrokeDasharray}),(0,e.jsx)(Pe,{dataKey:"name",tick:{fontSize:d.tickFontSize},interval:d.interval,minTickGap:d.minTickGap}),(0,e.jsx)(Ie,{tick:{fontSize:d.tickFontSize}}),(0,e.jsx)(Ue,{content:(0,e.jsx)(X,{})}),(0,e.jsx)(Ve,{dataKey:"deposits",fill:"#4f46e5",name:"Deposits",barSize:d.barSize,isAnimationActive:!0,animationDuration:d.animationDuration,animationEasing:"ease-in-out"}),(0,e.jsx)(Ve,{dataKey:"loans",fill:"#ef4444",name:"loans",barSize:d.barSize,isAnimationActive:!0,animationDuration:d.animationDuration,animationEasing:"ease-in-out"})]})})})]}),(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,e.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:"Transaction Trend"}),(0,e.jsx)("div",{className:"h-64 sm:h-80 overflow-x-auto",children:(0,e.jsx)(Fe,{width:"100%",height:"100%",minWidth:300,children:(0,e.jsxs)(st,{data:E,margin:d.margin,children:[(0,e.jsx)(Te,{strokeDasharray:d.gridStrokeDasharray}),(0,e.jsx)(Pe,{dataKey:"name",tick:{fontSize:d.tickFontSize},interval:d.interval,minTickGap:d.minTickGap}),(0,e.jsx)(Ie,{tick:{fontSize:d.tickFontSize}}),(0,e.jsx)(Ue,{content:(0,e.jsx)(X,{})}),(0,e.jsx)(Ee,{type:"monotone",dataKey:"deposits",stroke:"#4f46e5",activeDot:{r:U.width<768?4:8},name:"Deposits",strokeWidth:U.width<768?1.5:2,isAnimationActive:!0,animationDuration:d.animationDuration,animationEasing:"ease-in-out"}),(0,e.jsx)(Ee,{type:"monotone",dataKey:"loans",stroke:"#ef4444",name:"loans",strokeWidth:U.width<768?1.5:2,isAnimationActive:!0,animationDuration:d.animationDuration,animationEasing:"ease-in-out"})]})})})]})]}),(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[(0,e.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:"Recent Activity"}),(0,e.jsx)("button",{className:"text-sm font-medium text-indigo-600 hover:text-indigo-800",children:"View all"})]}),(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length>0?w.map(o=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[o.type==="deposit"?(0,e.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)(ke,{className:"h-3 w-3 sm:h-4 sm:w-4 text-indigo-600"})}):(0,e.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-red-100 flex items-center justify-center",children:(0,e.jsx)(Ce,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-600"})}),(0,e.jsx)("span",{className:"ml-2 sm:ml-3 text-xs sm:text-sm font-medium text-gray-900 capitalize",children:o.type})]})}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:o.userId||"N/A"}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:S(o.amount||0)}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:o.type==="deposit"?(0,e.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Completed"}):(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="Pending"?"bg-yellow-100 text-yellow-800":o.status==="Accepted"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.status||"Pending"})}),(0,e.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:L(o.timestamp)})]},o.id)):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"5",className:"px-3 sm:px-6 py-3 sm:py-4 text-center text-xs sm:text-sm text-gray-500",children:"No recent activity"})})})]})})]})]})},He=vs,Ss=()=>{const{currentUser:s}=ue(),[l,n]=(0,t.useState)([]),[u,f]=(0,t.useState)([]),[c,N]=(0,t.useState)(!0),[g,y]=(0,t.useState)(null),[m,h]=(0,t.useState)(""),[C,k]=(0,t.useState)(null),[b,E]=(0,t.useState)(!1),[T,w]=(0,t.useState)(new Set);(0,t.useEffect)(()=>{if(!s)return;const p=ie(Q(F,"users"),S=>{const L=[];S.forEach(r=>{L.push({id:r.id,...r.data()})}),f(L)},S=>{console.error("Error fetching users:",S)});return()=>p()},[s]),(0,t.useEffect)(()=>{if(!s)return;const p=ie(Q(F,"loans"),S=>{const L=[];S.forEach(r=>{L.push({id:r.id,...r.data()})}),L.sort((r,a)=>{const d=r.paymentTimestamp?.toDate?.()||new Date(0);return(a.paymentTimestamp?.toDate?.()||new Date(0))-d}),n(L),N(!1)},S=>{console.error("Error fetching paybacks:",S),N(!1)});return()=>p()},[s]);const x=l.map(p=>{const S=u.find(L=>L.uid===p.userId);return{...p,userName:S?.fullName||"Unknown User",userEmail:S?.email||"No email provided"}}),D=(p,S)=>{y({message:p,type:S}),setTimeout(()=>{y(null)},3e3)},v=async p=>{try{w(S=>new Set(S).add(p)),setTimeout(async()=>{const S=ee(F,"loans",p);await de(S,{paymentStatus:"approved",adminReviewedAt:xe()}),setTimeout(()=>{w(L=>{const r=new Set(L);return r.delete(p),r})},300),D("Payment approved successfully!","success")},100)}catch(S){console.error("Error approving payment:",S),D("Failed to approve payment. Please try again.","error"),w(L=>{const r=new Set(L);return r.delete(p),r})}},I=async p=>{try{w(S=>new Set(S).add(p)),setTimeout(async()=>{const S=ee(F,"loans",p);await de(S,{paymentStatus:"denied",adminReviewedAt:xe()}),setTimeout(()=>{w(L=>{const r=new Set(L);return r.delete(p),r})},300),D("Payment denied.","error")},100)}catch(S){console.error("Error denying payment:",S),D("Failed to deny payment. Please try again.","error"),w(L=>{const r=new Set(L);return r.delete(p),r})}},Y=p=>{k(p),E(!0)},U=()=>{E(!1),k(null)},O=p=>{if(!p)return"N/A";const S=p.toDate(),L=S.getDate().toString().padStart(2,"0"),r=(S.getMonth()+1).toString().padStart(2,"0"),a=S.getFullYear(),d=S.getHours().toString().padStart(2,"0"),o=S.getMinutes().toString().padStart(2,"0");return`${L}/${r}/${a} ${d}:${o}`},W=x.filter(p=>{if(p.status!=="accepted")return!1;const S=p.userName||"",L=m.toLowerCase();return S.toLowerCase().includes(L)}),X=x.filter(p=>p.status==="accepted"&&p.paymentStatus==="pending").length;return(0,e.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[g&&(0,e.jsx)("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transform transition-all duration-300 ${g.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:g.message}),(0,e.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Loan Repayment Management"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:"Review and manage loan repayments for accepted loans"})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(je,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:"Search by user name...",value:m,onChange:p=>h(p.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Accepted Loan Repayments"}),(0,e.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[X," pending"]})]}),c?(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mb-4"}),(0,e.jsx)("p",{className:"text-gray-600",children:"Loading loan repayments..."})]}):W.length===0?(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("div",{className:"mx-auto h-16 w-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:(0,e.jsx)(je,{className:"h-8 w-8 text-gray-400"})}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No accepted loans found"}),(0,e.jsx)("p",{className:"text-gray-500",children:"There are no accepted loans at the moment."})]}):(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(p=>{const S=T.has(p.id),L=!p.paymentStatus||p.paymentStatus==="pending";return(0,e.jsx)("div",{className:`bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md ${S?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:(0,e.jsxs)("div",{className:"p-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-indigo-800 font-medium",children:p.userName?.charAt(0)?.toUpperCase()||"U"})}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:p.userName||"Unknown User"}),(0,e.jsx)("p",{className:"text-sm text-gray-500",children:p.userEmail||"No email provided"})]})]}),(0,e.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                            ${p.paymentStatus==="approved"?"bg-green-100 text-green-800":p.paymentStatus==="denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:p.paymentStatus?.charAt(0)?.toUpperCase()+p.paymentStatus?.slice(1)||"Pending"})]}),(0,e.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Loan Amount"}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",p.amount]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Interest (10%)"}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",(p.amount*.1).toFixed(2)]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Total Payable"}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",p.totalPayable?.toFixed(2)||(p.amount*1.1).toFixed(2)]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Paid Amount"}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",p.paidAmount]})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Payment Date"}),(0,e.jsx)("span",{className:"text-sm font-medium text-gray-900",children:O(p.paymentTimestamp)})]}),p.adminReviewedAt&&(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Reviewed At"}),(0,e.jsx)("span",{className:"text-sm font-medium text-gray-900",children:O(p.adminReviewedAt)})]})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("span",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proof of Payment"}),p.proofImageUrl?(0,e.jsxs)("div",{className:"relative w-full h-32 rounded-lg overflow-hidden cursor-pointer border border-gray-200",onClick:()=>Y(p.proofImageUrl),children:[(0,e.jsx)("img",{src:p.proofImageUrl,alt:"Proof of payment",className:"w-full h-full object-cover"}),(0,e.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:(0,e.jsx)(ze,{className:"h-6 w-6 text-white"})})]}):(0,e.jsx)("div",{className:"w-full h-32 rounded-lg bg-gray-100 flex items-center justify-center border border-gray-200",children:(0,e.jsx)("span",{className:"text-gray-500 text-sm",children:"No proof provided"})})]}),(0,e.jsxs)("div",{className:"flex space-x-3",children:[(0,e.jsxs)("button",{className:`flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg transition-colors ${L?"text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500":"text-gray-400 bg-gray-100 cursor-not-allowed"}`,onClick:()=>v(p.id),disabled:!L,children:[(0,e.jsx)(Ht,{className:"-ml-1 mr-2 h-4 w-4"}),"Approve"]}),(0,e.jsxs)("button",{className:`flex-1 inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-lg transition-colors ${L?"text-gray-700 bg-white border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500":"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed"}`,onClick:()=>I(p.id),disabled:!L,children:[(0,e.jsx)(De,{className:"-ml-1 mr-2 h-4 w-4"}),"Deny"]})]})]})},p.id)})})]})]}),b&&(0,e.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:U,children:(0,e.jsxs)("div",{className:"relative max-w-4xl max-h-full",onClick:p=>p.stopPropagation(),children:[(0,e.jsx)("button",{className:"absolute -top-12 right-0 text-white hover:text-gray-300 focus:outline-none",onClick:U,children:(0,e.jsx)(De,{className:"h-8 w-8"})}),(0,e.jsx)("img",{src:C,alt:"Proof of payment",className:"max-w-full max-h-screen rounded-lg"})]})})]})},Ds=Ss,ks=()=>{const[s,l]=(0,t.useState)([]),[n,u]=(0,t.useState)([]),[f,c]=(0,t.useState)(!0),[N,g]=(0,t.useState)(null),[y,m]=(0,t.useState)(""),[h,C]=(0,t.useState)("All"),[k,b]=(0,t.useState)(null),[E,T]=(0,t.useState)(!1),[w,x]=(0,t.useState)({});(0,t.useEffect)(()=>{const a=se(Q(F,"users")),d=ie(a,o=>{const P=o.docs.map(M=>({id:M.id,...M.data()}));u(P)},o=>{console.error("Error loading users:",o),g("Failed to load users: "+o.message)});return()=>d()},[]),(0,t.useEffect)(()=>{const a=se(Q(F,"deposits"),me("timestamp","desc")),d=ie(a,o=>{try{const P=o.docs.map(M=>({id:M.id,...M.data()})).map(M=>{const _=n.find(B=>B.uid===M.userId);return{...M,userName:_?_.fullName||"Unnamed User":"Unknown User"}});l(P),c(!1)}catch(P){console.error("Error merging deposit data:",P),g("Error processing deposit data: "+P.message),c(!1)}},o=>{console.error("Firestore error:",o),g("Failed to load deposits: "+o.message),c(!1)});return()=>d()},[n]);const D=a=>{switch(a){case"accepted":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},v=async(a,d)=>{try{const o=ee(F,"deposits",a);await de(o,{status:d}),console.log(`Deposit ${a} status updated to ${d}`)}catch(o){console.error("Error updating deposit status:",o),g("Failed to update deposit status: "+o.message)}},I=a=>{if(!a)return"N/A";if(a.seconds){const d=new Date(a.seconds*1e3);return d.toLocaleDateString()+" "+d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}if(a.toDate){const d=a.toDate();return d.toLocaleDateString()+" "+d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}return a.toString()},Y=s.reduce((a,d)=>a+(parseFloat(d.amount)||0),0),U=s.filter(a=>a.status==="pending").length,O=s.filter(a=>a.status==="accepted").length,W=s.filter(a=>a.status==="denied").length,X=s.filter(a=>a.status==="accepted").reduce((a,d)=>a+(parseFloat(d.amount)||0),0),p=s.filter(a=>a.status==="denied").reduce((a,d)=>a+(parseFloat(d.amount)||0),0),S=s.filter(a=>{const d=a.userName?.toLowerCase().includes(y.toLowerCase())||a.userId?.toLowerCase().includes(y.toLowerCase())||a.message?.toLowerCase().includes(y.toLowerCase()),o=h==="All"||a.status===h;return d&&o}),L=a=>{b(a),T(!0)},r=()=>{T(!1),b(null)};return f?(0,e.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading deposits..."})]})}):N?(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 text-center",children:[(0,e.jsxs)("p",{className:"text-red-500",children:["Error: ",N]}),(0,e.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Retry"})]}):(console.log("DepositsPage: Rendering with deposits array length:",s.length),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Deposits"}),(0,e.jsxs)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["$",Y.toFixed(2)]})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-indigo-100",children:(0,e.jsx)(ke,{className:"h-6 w-6 text-indigo-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending Deposits"}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:U})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,e.jsx)(it,{className:"h-6 w-6 text-yellow-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Approved Deposits"}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:O})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)(Me,{className:"h-6 w-6 text-green-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Denied Deposits"}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:W})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,e.jsx)(ye,{className:"h-6 w-6 text-red-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Accepted Amount"}),(0,e.jsxs)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["$",X.toFixed(2)]})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)(Me,{className:"h-6 w-6 text-green-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Declined Amount"}),(0,e.jsxs)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["$",p.toFixed(2)]})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,e.jsx)(ye,{className:"h-6 w-6 text-red-600"})})]})})]}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Deposit Records"}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(je,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:"Search by name, user ID or message...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:y,onChange:a=>m(a.target.value)})]}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsxs)("select",{className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-lg bg-gray-50",value:h,onChange:a=>C(a.target.value),children:[(0,e.jsx)("option",{value:"All",children:"All Statuses"}),(0,e.jsx)("option",{value:"pending",children:"Pending"}),(0,e.jsx)("option",{value:"accepted",children:"Accepted"}),(0,e.jsx)("option",{value:"denied",children:"Denied"})]}),(0,e.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,e.jsx)(lt,{className:"h-5 w-5 text-gray-400"})})]})]})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm overflow-scroll",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Name"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proof"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.length>0?S.map(a=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.userName}),(0,e.jsxs)("div",{className:"text-xs text-gray-500 italic",children:["ID: ",a.userId]})]}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["$",a.amount?parseFloat(a.amount).toFixed(2):"0.00"]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${D(a.status||"pending")}`,children:a.status||"pending"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a.imageUrl?(0,e.jsxs)("button",{onClick:()=>L(a),className:"text-indigo-600 hover:text-indigo-900 flex items-center",children:[(0,e.jsx)(ze,{className:"h-4 w-4 mr-1"}),"View"]}):(0,e.jsx)("span",{className:"text-gray-400",children:"No proof"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I(a.timestamp)}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[a.status==="pending"?(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("button",{disabled:!!w[a.id],onClick:async()=>{if(window.confirm("Mark this deposit as Accepted?")){x(d=>({...d,[a.id]:!0}));try{await v(a.id,"accepted"),console.log("Deposit accepted:",a.id)}finally{x(d=>{const o={...d};return delete o[a.id],o})}}},className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors duration-200 disabled:opacity-50",children:w[a.id]?"Processing...":"Approve"}),(0,e.jsx)("button",{disabled:!!w[a.id],onClick:async()=>{if(window.confirm("Mark this deposit as Denied?")){x(d=>({...d,[a.id]:!0}));try{await v(a.id,"denied"),console.log("Deposit denied:",a.id)}finally{x(d=>{const o={...d};return delete o[a.id],o})}}},className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors duration-200 disabled:opacity-50",children:w[a.id]?"Processing...":"Deny"})]}):(0,e.jsx)("span",{className:"text-sm text-gray-500",children:a.status||"No actions"}),a.imageUrl?(0,e.jsx)("button",{onClick:()=>window.open(a.imageUrl,"_blank"),className:"text-indigo-600 hover:text-indigo-900 flex items-center",title:"View proof in new tab",children:(0,e.jsx)(nt,{className:"h-4 w-4"})}):null]})})]},a.id)):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No deposits found."})})})]})})}),E&&k&&(0,e.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,e.jsxs)("div",{className:"bg-white  rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-scroll",children:[(0,e.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Deposit Proof"}),(0,e.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:(0,e.jsx)(ye,{className:"h-6 w-6"})})]}),(0,e.jsxs)("div",{className:"p-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"User Name"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:k.userName||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"User ID"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:k.userId||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Amount"}),(0,e.jsxs)("p",{className:"text-sm text-gray-900",children:["$",k.amount?parseFloat(k.amount).toFixed(2):"0.00"]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"}),(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${D(k.status||"pending")}`,children:k.status||"pending"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:I(k.timestamp)})]}),(0,e.jsxs)("div",{className:"md:col-span-2",children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Message"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:k.message||"No message"})]})]}),(0,e.jsxs)("div",{className:"mt-6",children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Proof Image"}),(0,e.jsx)("div",{className:"border border-gray-200 rounded-lg ",children:k.imageUrl?(0,e.jsx)("img",{src:k.imageUrl,alt:"Deposit Proof",className:"w-full h-auto max-h-[60vh] object-contain",onError:a=>{a.target.style.display="none"}}):(0,e.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-100 text-gray-500",children:"No image available"})})]}),(0,e.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,e.jsx)("button",{onClick:r,className:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50",children:"Close"}),k.status==="pending"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("button",{onClick:()=>{v(k.id,"accepted"),r()},className:"px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700",children:"Approve"}),(0,e.jsx)("button",{onClick:()=>{v(k.id,"denied"),r()},className:"px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700",children:"Deny"})]})]})]})]})})]}))},Cs=ks;function As(){const{currentUser:s}=ue(),[l,n]=(0,t.useState)([]),[u,f]=(0,t.useState)(""),[c,N]=(0,t.useState)(!0),[g,y]=(0,t.useState)({}),[m,h]=(0,t.useState)({}),C=(0,t.useRef)(),k=(0,t.useRef)(),b=w=>{if(!w)return!1;const x=w.toDate?w.toDate():new Date(w);return(new Date-x)/(1e3*60)<2};(0,t.useEffect)(()=>{if(!s)return;(async()=>{try{const D=ee(F,"users",s.uid);await de(D,{isOnline:!0,lastActive:xe()})}catch(D){console.error("Error setting user online:",D)}})(),k.current=setInterval(async()=>{try{const D=ee(F,"users",s.uid);await de(D,{lastActive:xe()})}catch(D){console.error("Error updating lastActive:",D)}},3e4);const x=async()=>{try{const D=ee(F,"users",s.uid);await de(D,{isOnline:!1,lastActive:xe()})}catch(D){console.error("Error setting user offline:",D)}};return window.addEventListener("beforeunload",x),()=>{clearInterval(k.current),window.removeEventListener("beforeunload",x),s&&(async()=>{try{const v=ee(F,"users",s.uid);await de(v,{isOnline:!1,lastActive:xe()})}catch(v){console.error("Error setting user offline:",v)}})()}},[s]),(0,t.useEffect)(()=>{if(!s){N(!1);return}const w=se(Q(F,"messages"),me("timestamp","asc"));return ie(w,x=>{n(x.docs.map(D=>({id:D.id,...D.data()}))),N(!1)})},[s]),(0,t.useEffect)(()=>{if(s)return ie(Q(F,"users"),w=>{const x={},D={};w.forEach(v=>{const I=v.data();x[v.id]=I,b(I.lastActive)&&(D[v.id]={displayName:I.displayName||I.email?.split("@")[0]||"Unknown",isOnline:I.isOnline||!1,lastActive:I.lastActive})}),h(x),y(D)})},[s]);const E=async w=>{if(w.preventDefault(),!(!s||!u.trim()))try{await Mt(Q(F,"messages"),{text:u,userId:s.uid,userName:s.email?s.email.split("@")[0]:"Anonymous",timestamp:xe()}),f("")}catch(x){console.error("Error sending message:",x)}};(0,t.useEffect)(()=>{C.current?.scrollIntoView({behavior:"smooth"})},[l]);const T=w=>w?w.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return s?(0,e.jsxs)("div",{className:"flex flex-col  h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans text-gray-800 max-w-4xl mx-auto w-full",children:[(0,e.jsx)("div",{className:"mx-4 mb-2 bg-white/70 backdrop-blur-md rounded-xl shadow-sm p-3",children:(0,e.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,e.jsxs)("span",{className:"text-xs text-gray-600",children:[Object.keys(g).length," online"]}),(0,e.jsx)("br",{}),(0,e.jsxs)("p",{className:"text-sm text-gray-500",children:[l.length," Messages"]})]})}),(0,e.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 max-w-full",children:[c?(0,e.jsx)("div",{className:"flex justify-center p-6",children:(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-bounce"}),(0,e.jsx)("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0.16s"}}),(0,e.jsx)("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0.32s"}})]})}):l.length===0?(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500 p-10 bg-white rounded-2xl shadow-lg m-5",children:[(0,e.jsx)("div",{className:"text-4xl mb-3 opacity-70",children:"ðŸ’¬"}),(0,e.jsx)("div",{className:"text-sm text-center max-w-xs",children:"No messages yet. Start a conversation!"})]}):l.map(w=>(0,e.jsxs)("div",{className:`flex ${w.userId===s.uid?"justify-end":"justify-start"} animate-fade-in`,children:[w.userId!==s.uid&&(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center bg-white text-indigo-600 font-bold flex-shrink-0 shadow-sm mr-2",children:w.userName?w.userName.charAt(0).toUpperCase():"U"}),(0,e.jsx)("div",{className:`absolute bottom-[60px] right-7 w-3.5 h-3.5 rounded-full border-2 border-white ${g[w.userId]?"bg-green-500":"bg-gray-400"}`,title:g[w.userId]?"Online":"Offline"})]}),(0,e.jsxs)("div",{className:`max-w-[72%] p-3 rounded-2xl relative shadow-md transition-all duration-300 hover:shadow-lg ${w.userId===s.uid?"bg-gradient-to-br from-indigo-50 to-indigo-100 border border-indigo-100 rounded-br-md":"bg-white border border-gray-200 rounded-bl-md"}`,children:[(0,e.jsx)("div",{className:"text-sm text-gray-800 leading-relaxed",children:w.text}),(0,e.jsx)("div",{className:"text-xs text-gray-400 text-right mt-2",children:T(w.timestamp)})]}),w.userId===s.uid&&(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-indigo-600 text-white font-bold flex-shrink-0 shadow-sm ml-2",children:w.userName?w.userName.charAt(0).toUpperCase():"U"}),(0,e.jsx)("div",{className:`absolute bottom-[60px] right-6 w-3.5 h-3.5 rounded-full border-2 border-white ${b(m[s?.uid]?.lastActive)?"bg-green-500":"bg-gray-400"}`,title:b(m[s?.uid]?.lastActive)?"Online":"Offline"})]})]},w.id)),(0,e.jsx)("div",{ref:C})]}),(0,e.jsxs)("form",{onSubmit:E,className:"flex items-center p-4 gap-3 sticky bottom-0 bg-white/70 backdrop-blur-md border-t border-gray-200",children:[(0,e.jsx)("div",{className:"flex-1 flex items-center bg-white p-2 pl-4 rounded-full shadow-md transition-all duration-300 focus-within:shadow-lg focus-within:border focus-within:border-indigo-500",children:(0,e.jsx)("input",{type:"text",className:"flex-1 border-0 outline-none p-2 bg-transparent text-sm text-gray-800",placeholder:"Type a message...",value:u,onChange:w=>f(w.target.value)})}),(0,e.jsx)("button",{type:"submit",className:"w-11 h-11 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-indigo-600 text-white border-none cursor-pointer shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:!u.trim(),children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4.5 h-4.5",children:(0,e.jsx)("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"})})})]})]}):(0,e.jsx)("div",{className:"flex flex-col h-screen bg-gradient-to-b from-gray-50 to-gray-100 items-center justify-center font-sans text-gray-800",children:(0,e.jsxs)("div",{className:"text-center p-6 bg-white rounded-2xl shadow-lg max-w-md",children:[(0,e.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Please log in to use chat"}),(0,e.jsx)("p",{className:"text-gray-600",children:"You need to be logged in to send and receive messages."})]})})}var Ls=()=>(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(As,{})}),Es=Ls,Us=()=>{const[s,l]=(0,t.useState)(!1),{currentUser:n}=ue(),u=Lt(),f=be(),{logout:c}=ue(),N=async()=>{try{await c(),f("/login")}catch(m){console.error("Failed to log out",m)}};(0,t.useEffect)(()=>{const m=()=>{window.innerWidth>=1024&&l(!1)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),(0,t.useEffect)(()=>{const m=h=>{s&&!h.target.closest(".sidebar-content")&&!h.target.closest(".sidebar-toggle")&&l(!1)};return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[s]),(0,t.useEffect)(()=>{l(!1)},[u.pathname]);const g=[{name:"Dashboard",href:"/dashboard",icon:ss},{name:"Deposits",href:"/deposits",icon:ts},{name:"loans",href:"/loans",icon:ls},{name:"Chat",href:"/chat",icon:ns},{name:"Users",href:"/users",icon:ot},{name:"Payback",href:"/payback",icon:Qt},{name:"Settings",href:"/settings",icon:Ke},{name:"Block users",href:"/admin-users",icon:Ke},{name:"Annual Reports",href:"/annual-reports",icon:Ce}],y=m=>u.pathname===m;return(0,e.jsxs)("div",{className:"flex h-screen w-screen max-w-full bg-gray-50",children:[(0,e.jsx)("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 sidebar-content`,children:(0,e.jsxs)("div",{className:"flex flex-col h-full",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-white font-bold",children:"MB"})})}),(0,e.jsx)("div",{className:"ml-3",children:(0,e.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"MoneyBox"})})]}),(0,e.jsx)("button",{onClick:()=>l(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:(0,e.jsx)(De,{size:20})})]}),(0,e.jsx)("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",children:(0,e.jsx)("ul",{className:"space-y-1",children:g.map(m=>(0,e.jsx)("li",{children:(0,e.jsxs)($e,{to:m.href,className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${y(m.href)?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-100"}`,children:[(0,e.jsx)(m.icon,{className:"mr-3 h-5 w-5"}),m.name]})},m.name))})}),(0,e.jsxs)("div",{className:"px-4 py-6 border-t border-gray-200",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,e.jsx)("div",{className:"w-11 h-11 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-indigo-600 text-white font-bold shadow-md",children:n?.email?.charAt(0).toUpperCase()||"U"})})}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Admin  is           ",n?.email?.slice(0,5).toUpperCase()||"U"]}),(0,e.jsx)("p",{className:"text-xs text-gray-500",children:n?.email?.slice(0,104).toLowerCase()||"U"})]})]}),(0,e.jsxs)("button",{onClick:N,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[(0,e.jsx)(qe,{className:"mr-3 h-5 w-5"}),"Logout"]})]})]})}),(0,e.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,e.jsx)("header",{className:"bg-white shadow-sm z-10",children:(0,e.jsxs)("div",{className:"flex items-center justify-between h-16 px-6",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("button",{onClick:()=>l(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 mr-4 sidebar-toggle",children:(0,e.jsx)(os,{size:20})}),(0,e.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:[u.pathname==="/dashboard"&&"ðŸ’° Dashboard",u.pathname==="/deposits"&&"ðŸ’° Deposits Overview",u.pathname==="/loans"&&"ðŸ’¸ loans Overview",u.pathname==="/users"&&"ðŸ‘¥ Users Overview",u.pathname==="/chat"&&"ðŸ‘¥ Users Overview"]})]}),(0,e.jsx)("div",{className:"flex items-center space-x-4",children:(0,e.jsxs)("button",{onClick:N,className:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,e.jsx)(qe,{className:"mr-2 h-5 w-5"}),"Logout"]})})]})}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-6",children:(0,e.jsx)("div",{className:"h-full w-full",children:(0,e.jsx)(Ct,{})})})]})]})},Ps=Us,Fs=()=>{const[s,l]=(0,t.useState)([]),[n,u]=(0,t.useState)([]),[f,c]=(0,t.useState)(!0),[N,g]=(0,t.useState)(null),[y,m]=(0,t.useState)(""),[h,C]=(0,t.useState)("All"),[k,b]=(0,t.useState)({}),[E,T]=(0,t.useState)({});(0,t.useEffect)(()=>{const r=se(Q(F,"users")),a=ie(r,d=>{const o=d.docs.map(P=>({id:P.id,...P.data()}));u(o)},d=>{console.error("Error loading users:",d),g("Failed to load users: "+d.message)});return()=>a()},[]),(0,t.useEffect)(()=>{const r=se(Q(F,"loans"),me("timestamp","desc")),a=ie(r,d=>{try{const o=d.docs.map(P=>({id:P.id,...P.data()})).map(P=>{const M=n.find(_=>_.uid===P.userId);return{...P,userName:M?M.fullName||"Unnamed User":"Unknown User"}});l(o),c(!1)}catch(o){console.error("Error merging loan data:",o),g("Error processing loan data: "+o.message),c(!1)}},d=>{console.error("Firestore error:",d),g("Failed to load loans: "+d.message),c(!1)});return()=>a()},[n]);const w=r=>{switch(r){case"accepted":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"Pending":case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},x=r=>{if(!r)return"N/A";if(r.seconds){const a=new Date(r.seconds*1e3);return a.toLocaleDateString()+" "+a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}if(r.toDate){const a=r.toDate();return a.toLocaleDateString()+" "+a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}return r.toString()},D=(r,a)=>{const d=a.target.files[0];d&&T(o=>({...o,[r]:d}))},v=async r=>{const a="dlrxomdfh",d="Shop-preset",o=new FormData;return o.append("file",r),o.append("upload_preset",d),o.append("cloud_name",a),(await(await fetch(`https://api.cloudinary.com/v1_1/${a}/image/upload`,{method:"POST",body:o})).json()).secure_url},I=async r=>{if(window.confirm("Are you sure you want to accept this loan?")){if(!E[r]){alert("Please upload a receipt image before accepting the loan.");return}b(a=>({...a,[r]:!0}));try{const a=await v(E[r]),d=ee(F,"loans",r);await de(d,{status:"accepted",receiptUrl:a,acceptedAt:xe()}),T(o=>{const P={...o};return delete P[r],P})}catch(a){console.error("Error accepting loan:",a),g("Failed to accept loan: "+a.message)}finally{b(a=>{const d={...a};return delete d[r],d})}}},Y=async r=>{if(window.confirm("Are you sure you want to deny this loan?")){b(a=>({...a,[r]:!0}));try{const a=ee(F,"loans",r);await de(a,{status:"denied",deniedAt:xe()})}catch(a){console.error("Error denying loan:",a),g("Failed to deny loan: "+a.message)}finally{b(a=>{const d={...a};return delete d[r],d})}}},U=s.reduce((r,a)=>r+(parseFloat(a.amount)||0),0),O=s.filter(r=>r.status==="pending").length,W=s.filter(r=>r.status==="accepted").length,X=s.filter(r=>r.status==="denied").length,p=s.filter(r=>r.status==="accepted").reduce((r,a)=>r+(parseFloat(a.amount)||0),0),S=s.filter(r=>r.status==="denied").reduce((r,a)=>r+(parseFloat(a.amount)||0),0),L=s.filter(r=>{const a=r.userName?.toLowerCase().includes(y.toLowerCase())||r.userId?.toLowerCase().includes(y.toLowerCase())||r.message?.toLowerCase().includes(y.toLowerCase()),d=h==="All"||r.status===h;return a&&d});return f?(0,e.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading loans..."})]})}):N?(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 text-center",children:[(0,e.jsxs)("p",{className:"text-red-500",children:["Error: ",N]}),(0,e.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Retry"})]}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total loans"}),(0,e.jsxs)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["$",U.toFixed(2)]})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,e.jsx)(Ce,{className:"h-6 w-6 text-blue-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending loans"}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:O})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,e.jsx)(it,{className:"h-6 w-6 text-yellow-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Paid loans"}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:W})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)(Jt,{className:"h-6 w-6 text-green-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Declined loans"}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:X})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,e.jsx)(ye,{className:"h-6 w-6 text-red-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Accepted Amount"}),(0,e.jsxs)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["$",p.toFixed(2)]})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)(Me,{className:"h-6 w-6 text-green-600"})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Declined Amount"}),(0,e.jsxs)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["$",S.toFixed(2)]})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,e.jsx)(ye,{className:"h-6 w-6 text-red-600"})})]})})]}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,e.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Loans Records"}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(je,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:"Search by name, user ID or message...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:y,onChange:r=>m(r.target.value)})]}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsxs)("select",{className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-lg bg-gray-50",value:h,onChange:r=>C(r.target.value),children:[(0,e.jsx)("option",{value:"All",children:"All Statuses"}),(0,e.jsx)("option",{value:"Pending",children:"Pending"}),(0,e.jsx)("option",{value:"accepted",children:"Paid"}),(0,e.jsx)("option",{value:"denied",children:"Declined"})]}),(0,e.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,e.jsx)(lt,{className:"h-5 w-5 text-gray-400"})})]})]})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Name"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:L.length>0?L.map(r=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,e.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:r.userName}),(0,e.jsxs)("div",{className:"text-xs text-gray-500 italic",children:["ID: ",r.userId]})]}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["$",r.amount?parseFloat(r.amount).toFixed(2):"0.00"]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w(r.status)}`,children:r.status==="accepted"?"Paid":r.status||"Pending"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(r.timestamp)}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[r.status==="pending"?(0,e.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,e.jsx)("label",{className:"text-xs text-gray-500",children:"Upload receipt"}),(0,e.jsx)("input",{type:"file",accept:"image/*",onChange:a=>D(r.id,a),className:"block text-sm border rounded-lg p-1 cursor-pointer bg-gray-50"})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("button",{disabled:!!k[r.id]||!E[r.id],onClick:()=>I(r.id),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors duration-200 ${!E[r.id]||k[r.id]?"opacity-50 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:k[r.id]?"Processing...":"Accept"}),(0,e.jsx)("button",{disabled:!!k[r.id],onClick:()=>Y(r.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors duration-200 disabled:opacity-50",children:k[r.id]?"Processing...":"Deny"})]})]}):(0,e.jsx)("span",{className:"text-sm text-gray-500",children:r.status==="accepted"?"Paid":r.status}),r.imageUrl&&(0,e.jsx)("button",{onClick:()=>window.open(r.imageUrl,"_blank"),className:"text-indigo-600 hover:text-indigo-900 flex items-center",title:"View proof",children:(0,e.jsx)(is,{className:"h-4 w-4"})})]})})]},r.id)):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No loans found."})})})]})})})]})},Ts=Fs,Is=()=>{const[s,l]=(0,t.useState)([]),[n,u]=(0,t.useState)(!0),[f,c]=(0,t.useState)(null),[N,g]=(0,t.useState)(""),[y,m]=(0,t.useState)(!1),[h,C]=(0,t.useState)(null),[k,b]=(0,t.useState)([]),[E,T]=(0,t.useState)([]),[w,x]=(0,t.useState)(!1),[D,v]=(0,t.useState)(!1),[I,Y]=(0,t.useState)(null),[U,O]=(0,t.useState)(null),[W,X]=(0,t.useState)({}),p=(0,t.useRef)(null),S=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!F){c("Firestore instance not available"),u(!1);return}const i=se(Q(F,"users"),me("createdAt","desc")),$=ie(i,R=>{try{const J=R.docs.map(q=>({id:q.id,...q.data()}));l(J),u(!1)}catch(J){console.error("Error processing users snapshot:",J),c("Failed to process users data"),u(!1)}},R=>{console.error("Error fetching users:",R),R.code==="permission-denied"?c("Permission denied. Check Firestore rules."):c("Failed to load users: "+(R.message||"Unknown error")),u(!1)});return()=>$()},[]),(0,t.useEffect)(()=>{if(p.current&&(p.current(),p.current=null),S.current&&(S.current(),S.current=null),!h){b([]),T([]);return}x(!0),Y(null);const i=se(Q(F,"deposits"),me("timestamp","desc"));p.current=ie(i,R=>{try{const J=R.docs.map(q=>({id:q.id,...q.data()})).filter(q=>q.userId===h.uid);b(J),x(!1)}catch(J){console.error("Error processing deposits snapshot:",J),Y("Failed to process deposits data"),x(!1)}},R=>{console.error("Error fetching deposits:",R),Y("Failed to load deposits: "+(R.message||"Unknown error")),x(!1)}),v(!0),O(null);const $=se(Q(F,"loans"),me("timestamp","desc"));return S.current=ie($,R=>{try{const J=R.docs.map(q=>({id:q.id,...q.data()})).filter(q=>q.userId===h.uid);T(J),v(!1)}catch(J){console.error("Error processing loans snapshot:",J),O("Failed to process loans data"),v(!1)}},R=>{console.error("Error fetching loans:",R),O("Failed to load loans: "+(R.message||"Unknown error")),v(!1)}),()=>{p.current&&(p.current(),p.current=null),S.current&&(S.current(),S.current=null)}},[h]);const L=i=>{if(!i)return"N/A";if(i.seconds)return new Date(i.seconds*1e3).toLocaleString();if(i.toDate)return i.toDate().toLocaleString();try{return new Date(i).toLocaleString()}catch{return String(i)}},r=i=>{switch(i?.toLowerCase()){case"accepted":return"bg-green-100 text-green-800";case"denied":case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},a=i=>{C(i),m(!0)},d=()=>{m(!1)},o=i=>{window.open(i,"_blank")},P=(i,$)=>{const R=document.createElement("a");R.href=i,R.download=$||"proof-image.jpg",document.body.appendChild(R),R.click(),document.body.removeChild(R)},M=k.reduce((i,$)=>i+($.amount||0),0),_=E.reduce((i,$)=>i+($.amount||0),0);k.filter(i=>i.status==="pending").length,k.filter(i=>i.status==="accepted").length,k.filter(i=>i.status==="denied"||i.status==="rejected").length,E.filter(i=>i.status==="pending").length,E.filter(i=>i.status==="accepted").length,E.filter(i=>i.status==="denied"||i.status==="rejected").length;const B=s.filter(i=>{const $=N.trim().toLowerCase();return $?(i.fullName||"").toLowerCase().includes($)||(i.email||"").toLowerCase().includes($)||(i.phoneNumber||"").toLowerCase().includes($)||(i.uid||"").toLowerCase().includes($):!0});return n?(0,e.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]})}):f?(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 text-center",children:[(0,e.jsxs)("p",{className:"text-red-500",children:["Error: ",f]}),(0,e.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Retry"})]}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:col-span-1",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,e.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:s.length})]}),(0,e.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a4 4 0 00-4-4h-1M9 20H4v-2a4 4 0 014-4h1m0-4a4 4 0 100-8 4 4 0 000 8z"})})})]})}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:col-span-3",children:(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"User Records"}),(0,e.jsx)("div",{className:"flex items-center w-full sm:w-64",children:(0,e.jsxs)("div",{className:"relative w-full",children:[(0,e.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,e.jsx)(je,{className:"h-5 w-5 text-gray-400"})}),(0,e.jsx)("input",{type:"text",placeholder:"Search users...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:N,onChange:i=>g(i.target.value)})]})})]})})]}),(0,e.jsx)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.length>0?B.map(i=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150 cursor-pointer",onClick:()=>a(i),children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[i.imageUrl?(0,e.jsx)("img",{src:i.imageUrl,alt:i.fullName||"avatar",className:"h-10 w-10 rounded-full object-cover",onError:$=>{$.target.style.display="none"}}):(0,e.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-sm font-medium text-gray-700",children:(i.fullName||"U").split(" ").map($=>$[0]).slice(0,2).join("").toUpperCase()}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:i.fullName||"No name"}),(0,e.jsx)("div",{className:"text-xs text-gray-500",children:i.uid||""})]})]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.email||"N/A"}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.phoneNumber||"N/A"}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:i.gender||"N/A"}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.age||"N/A"}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L(i.createdAt)})]},i.id)):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No users found."})})})]})})}),y&&h&&(0,e.jsx)("div",{className:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-auto",children:[(0,e.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["User Details: ",h.fullName]}),(0,e.jsx)("button",{onClick:d,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,e.jsx)(De,{className:"h-5 w-5 text-gray-500"})})]}),(0,e.jsxs)("div",{className:"p-6",children:[(0,e.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[h.imageUrl?(0,e.jsx)("img",{src:h.imageUrl,alt:h.fullName||"avatar",className:"h-16 w-16 rounded-full object-cover mr-4"}):(0,e.jsx)("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center text-xl font-medium text-gray-700 mr-4",children:(h.fullName||"U").split(" ").map(i=>i[0]).slice(0,2).join("").toUpperCase()}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:h.fullName||"No name"}),(0,e.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",h.uid||"N/A"]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:h.email||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:h.phoneNumber||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"MoMo Number"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:h.momoNumber||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Credit card Number"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:h.creditCardNumber||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Gender"}),(0,e.jsx)("p",{className:"text-sm text-gray-900 capitalize",children:h.gender||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Age"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:h.age||"N/A"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Joined Date"}),(0,e.jsx)("p",{className:"text-sm text-gray-900",children:L(h.createdAt)})]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[(0,e.jsx)("div",{className:"p-2 rounded-full bg-green-100 mr-3",children:(0,e.jsx)(ke,{className:"h-6 w-6 text-green-600"})}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Deposits Summary"})]}),(0,e.jsx)("div",{className:"space-y-3",children:(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Total Amount:"}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",M.toFixed(2)]})]})})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[(0,e.jsx)("div",{className:"p-2 rounded-full bg-blue-100 mr-3",children:(0,e.jsx)(as,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Loans Summary"})]}),(0,e.jsx)("div",{className:"space-y-3",children:(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Total Amount:"}),(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",_.toFixed(2)]})]})})]})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Deposits"}),w?(0,e.jsx)("div",{className:"flex justify-center py-4",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):I?(0,e.jsx)("div",{className:"bg-red-50 p-4 rounded-md",children:(0,e.jsx)("p",{className:"text-sm text-red-800",children:I})}):k.length>0?(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Message"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proof"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(i=>(0,e.jsxs)("tr",{children:[(0,e.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:["$",i.amount||"0"]}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r(i.status)}`,children:i.status||"Unknown"})}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:L(i.timestamp)}),(0,e.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",title:i.message,children:i.message||"N/A"}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:i.proofImage?(0,e.jsxs)("div",{className:"flex space-x-2",children:[(0,e.jsx)("button",{onClick:()=>o(i.proofImage),className:"text-indigo-600 hover:text-indigo-900",title:"View",children:(0,e.jsx)(ze,{className:"h-5 w-5"})}),(0,e.jsx)("button",{onClick:()=>P(i.proofImage,`deposit-proof-${i.id}.jpg`),className:"text-indigo-600 hover:text-indigo-900",title:"Download",children:(0,e.jsx)(nt,{className:"h-5 w-5"})})]}):"N/A"})]},i.id))})]})}):(0,e.jsx)("div",{className:"text-center py-4 text-sm text-gray-500",children:"No deposits found."})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Loans"}),D?(0,e.jsx)("div",{className:"flex justify-center py-4",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):U?(0,e.jsx)("div",{className:"bg-red-50 p-4 rounded-md",children:(0,e.jsx)("p",{className:"text-sm text-red-800",children:U})}):E.length>0?(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),(0,e.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approved By"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(i=>(0,e.jsxs)("tr",{children:[(0,e.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:["$",i.amount||"0"]}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r(i.status)}`,children:i.status||"Unknown"})}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:L(i.timestamp)}),(0,e.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",title:i.reason,children:i.reason||"N/A"}),(0,e.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:i.approvedBy||"N/A"})]},i.id))})]})}):(0,e.jsx)("div",{className:"text-center py-4 text-sm text-gray-500",children:"No loans found."})]})]})]})})]})},Rs=Is,Ms=()=>{const[s,l]=(0,t.useState)("10.00"),[n,u]=(0,t.useState)(!0),[f,c]=(0,t.useState)(!1),[N,g]=(0,t.useState)(null),[y,m]=(0,t.useState)("success"),[h,C]=(0,t.useState)([]),[k,b]=(0,t.useState)(!1),[E,T]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{const D=se(Q(F,"interest"),me("timestamp","desc"),Rt(10)),v=await pe(D);if(v.empty)l("10.00");else{const I=v.docs[0];l(I.data().interest.toFixed(2)),T(I.id);const Y=v.docs.map(U=>({date:new Date(U.data().timestamp?.toDate()||Date.now()).toLocaleDateString(),rate:parseFloat(U.data().interest)})).reverse();C(Y)}}catch(D){console.error("Error fetching interest:",D),g("Failed to load interest rate"),m("error"),setTimeout(()=>g(null),3e3)}finally{u(!1)}})()},[]);const w=async()=>{if(isNaN(s)||s<1||s>100){g("Please enter a valid interest rate between 1% and 100%"),m("error"),setTimeout(()=>g(null),3e3);return}c(!0);try{const x=new Date;if(E){const D=ee(F,"interest",E);await de(D,{interest:Number(s),timestamp:x})}else await rt(ee(F,"interest","globalRate"),{interest:Number(s),timestamp:x}),T("globalRate");g("Interest rate updated successfully!"),m("success"),C(D=>[...D.slice(-9),{date:x.toLocaleDateString(),rate:Number(s)}])}catch(x){console.error("Error updating interest:",x),g("Failed to update interest rate"),m("error")}finally{c(!1),setTimeout(()=>g(null),3e3)}};return n?(0,e.jsx)("div",{className:"flex justify-center items-center min-h-screen px-4",children:(0,e.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-10 w-full max-w-md text-center",children:[(0,e.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading interest rate..."})]})}):(0,e.jsxs)("div",{className:"flex justify-center items-center min-h-screen px-4 bg-gray-50 dark:bg-gray-900",children:[(0,e.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 sm:p-6 md:p-10 w-full max-w-md",children:[(0,e.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 text-center",children:"Interest Rate Settings"}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Current Interest Rate (%)"}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("input",{type:"number",step:"0.01",min:"1",max:"100",value:s,onChange:x=>l(x.target.value),className:"border border-gray-300 dark:border-gray-700 rounded-lg p-3 w-full focus:ring-2 focus:ring-blue-500 outline-none pr-12",disabled:f,placeholder:"Enter interest rate (1â€“100)"}),(0,e.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]}),(0,e.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter as a percentage (e.g., 5 for 5%)"})]}),(0,e.jsx)("button",{onClick:w,disabled:f,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 w-full disabled:opacity-50 flex items-center justify-center text-sm sm:text-base",children:f?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Changes"}),(0,e.jsx)("div",{className:"mt-6 text-center",children:(0,e.jsxs)("button",{onClick:()=>b(!k),className:"text-blue-600 dark:text-blue-400 text-sm font-medium hover:underline",children:[k?"Hide":"Show"," Rate History"]})}),k&&h.length>0&&(0,e.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Interest Rate History"}),(0,e.jsx)("div",{className:"h-48",children:(0,e.jsx)(Fe,{width:"100%",height:"100%",children:(0,e.jsxs)(st,{data:h,children:[(0,e.jsx)(Te,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,e.jsx)(Pe,{dataKey:"date",tick:{fontSize:12}}),(0,e.jsx)(Ie,{tick:{fontSize:12},domain:["dataMin - 0.5","dataMax + 0.5"]}),(0,e.jsx)(Ue,{formatter:x=>`${x.toFixed(2)}%`,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid #ccc",borderRadius:"4px"}}),(0,e.jsx)(Ee,{type:"monotone",dataKey:"rate",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4},activeDot:{r:6}})]})})})]})]}),N&&(0,e.jsx)("div",{className:`fixed top-5 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg text-white font-semibold shadow-md transition-all duration-300 ${y==="success"?"bg-green-500":"bg-red-500"}`,children:N})]})},$s=Ms;hs();var Le=Ae(us()),zs=(s,l)=>{const n=new ps({orientation:"portrait",unit:"mm",format:"a4"}),u=n.internal.pageSize.getWidth(),f=n.internal.pageSize.getHeight(),c=20;u-c*2,n.setFont("helvetica");const N=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",g=x=>`$${x.toFixed(2)}`,y=x=>x==="approved"?[0,128,0]:[255,0,0],m=x=>x==="approved"?"PAID":x?x.toUpperCase():"UNPAID",h=()=>{n.setFillColor(41,98,255),n.rect(0,0,u,30,"F"),n.setTextColor(255,255,255),n.setFontSize(20),n.setFont("helvetica","bold"),n.text("Annual User Reports",u/2,20,{align:"center"}),n.setFontSize(14),n.setFont("helvetica","normal"),n.text(`${l}`,u/2,26,{align:"center"}),n.setTextColor(0,0,0)},C=x=>{const D=f-10;n.setFontSize(8),n.setTextColor(100,100,100),n.text(`Page ${x}`,u/2,D,{align:"center"})},k=()=>{h(),n.setFontSize(28),n.setTextColor(41,98,255),n.text("Annual User Reports",u/2,100,{align:"center"}),n.setFontSize(22),n.text(`${l}`,u/2,115,{align:"center"}),n.setFontSize(12),n.setTextColor(100,100,100);const x=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});n.text(`Generated on ${x}`,u/2,130,{align:"center"}),n.setTextColor(0,0,0),n.setFontSize(14),n.setFont("helvetica","bold"),n.text("Summary Statistics",c,160),n.setFont("helvetica","normal"),n.setFontSize(12);const D=s.length,v=s.reduce((O,W)=>O+W.totalDeposits,0),I=s.reduce((O,W)=>O+W.totalLoans,0),Y=s.reduce((O,W)=>O+W.paidLoansCount,0),U=s.reduce((O,W)=>O+W.unpaidLoansCount,0);n.text(`Total Users: ${D}`,c,175),n.text(`Total Deposits: ${g(v)}`,c,185),n.text(`Total Loans: ${g(I)}`,c,195),n.text(`Total Paid Loans: ${Y}`,c,205),n.text(`Total Unpaid Loans: ${U}`,c,215),C(1),n.addPage()};let b=0;const E=()=>{h();const x=[[{content:"User Name",dataKey:"name"}],[{content:"Total Deposits ($)",dataKey:"totalDeposits"}],[{content:"Paid Loans",dataKey:"paidLoansCount"}],[{content:"Unpaid Loans",dataKey:"unpaidLoansCount"}],[{content:"Total Loans ($)",dataKey:"totalLoans"}]],D=s.map(v=>[v.user.name||"Unknown User",g(v.totalDeposits),v.paidLoansCount,v.unpaidLoansCount,g(v.totalLoans)]);(0,Le.default)(n,{head:x,body:D,startY:40,theme:"grid",styles:{font:"helvetica",fontSize:10,cellPadding:5},headStyles:{fillColor:[41,98,255],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:20,right:20},didDrawPage:v=>{b=v.cursor.y}}),b=n.lastAutoTable.finalY+10,C(n.internal.getNumberOfPages())},T=x=>f-b-20<x?(n.addPage(),h(),b=40,C(n.internal.getNumberOfPages()),!0):!1,w=(x,D=!1)=>{const v=60+x.deposits.length*10+x.loans.length*10;if(T(v),n.setFontSize(16),n.setFont("helvetica","bold"),n.setTextColor(41,98,255),n.text(x.user.name||"Unknown User",c,b),b+=10,n.setFontSize(12),n.setFont("helvetica","normal"),n.setTextColor(0,0,0),n.text(`Email: ${x.user.email||"N/A"}`,c,b),b+=10,n.text(`Phone: ${x.user.phone||"N/A"}`,c,b),b+=15,x.deposits.length>0){const I=[[{content:"Amount",dataKey:"amount"}],[{content:"Date",dataKey:"date"}]],Y=x.deposits.map(U=>[g(U.amount),N(U.timestamp)]);T(30),(0,Le.default)(n,{head:I,body:Y,startY:b,theme:"grid",styles:{font:"helvetica",fontSize:10,cellPadding:5},headStyles:{fillColor:[75,192,192],textColor:255,fontStyle:"bold"},margin:{left:c,right:c},didDrawPage:U=>{b=U.cursor.y}}),b=n.lastAutoTable.finalY+10}else T(20),n.setFontSize(10),n.setTextColor(100,100,100),n.text("No deposits found",c,b),n.setTextColor(0,0,0),b+=10;if(x.loans.length>0){const I=[[{content:"Amount",dataKey:"amount"}],[{content:"Date",dataKey:"date"}],[{content:"Status",dataKey:"status"}]],Y=x.loans.map(U=>[g(U.amount),N(U.timestamp),m(U.paymentStatus)]);T(30),(0,Le.default)(n,{head:I,body:Y,startY:b,theme:"grid",styles:{font:"helvetica",fontSize:10,cellPadding:5},headStyles:{fillColor:[255,99,132],textColor:255,fontStyle:"bold"},didDrawCell:U=>{if(U.section==="body"&&U.column.index===2){const O=U.row.index,W=x.loans[O];if(W){const X=y(W.paymentStatus);n.setTextColor(X[0],X[1],X[2])}}},didDrawPage:U=>{b=U.cursor.y},margin:{left:c,right:c}}),b=n.lastAutoTable.finalY+15}else T(20),n.setFontSize(10),n.setTextColor(100,100,100),n.text("No loans found",c,b),n.setTextColor(0,0,0),b+=15};try{k(),E(),s.length>0&&(n.addPage(),h(),b=40),s.forEach((v,I)=>{w(v,I===0)});const x=n.internal.getNumberOfPages();for(let v=1;v<=x;v++)n.setPage(v),C(v);const D=`annual-reports-${l}.pdf`;return n.save(D),{success:!0,filename:D}}catch(x){return console.error("Error generating PDF:",x),{success:!1,error:x.message}}},Ys=zs;Vt.register(Bt,zt,Wt,Ot,Yt,_t,qt);var Ze=s=>gs(new Date(s,0,1)),Qe=s=>ms(new Date(s,0,1)),xt=(s,l)=>new Date(s,l-1,1),ut=(s,l)=>new Date(s,l,0),Xe=s=>{if(!s)return"N/A";const l=s.toDate?s.toDate():new Date(s);return dt(l,"MMM dd, yyyy")},Os=(s,l)=>{const n=s.reduce((N,g)=>N+g.amount,0),u=l.reduce((N,g)=>N+g.amount,0),f=l.filter(N=>N.paymentStatus==="approved").length,c=l.filter(N=>N.paymentStatus!=="approved").length;return{totalDeposits:n,totalLoans:u,paidLoansCount:f,unpaidLoansCount:c}},_s=(s,l)=>{if(!l.trim())return s;const n=l.toLowerCase();return s.filter(u=>u.user?.name?.toLowerCase().includes(n)||u.user?.email?.toLowerCase().includes(n)||u.user?.phone?.toLowerCase().includes(n))},Bs=(s,l)=>{const n=["User","Total Deposits","Total Loans","Paid Loans","Unpaid Loans"],u=s.map(y=>[y.user.name,y.totalDeposits,y.totalLoans,y.paidLoansCount,y.unpaidLoansCount]);let f=n.join(",")+`
`;u.forEach(y=>{f+=y.join(",")+`
`});const c=new Blob([f],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(c),g=document.createElement("a");g.setAttribute("href",N),g.setAttribute("download",l),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)},Je=(s,l,n)=>{const u=[];for(let f=1;f<=12;f++){const c=xt(n,f),N=ut(n,f),g=s.filter(m=>{const h=m.timestamp.toDate?m.timestamp.toDate():new Date(m.timestamp);return h>=c&&h<=N}),y=l.filter(m=>{const h=m.timestamp.toDate?m.timestamp.toDate():new Date(m.timestamp);return h>=c&&h<=N});u.push({month:dt(c,"MMM"),deposits:g.reduce((m,h)=>m+h.amount,0),loans:y.reduce((m,h)=>m+h.amount,0)})}return u},Ws=s=>s==="approved"?{text:"PAID",className:"bg-green-100 text-green-800"}:{text:s?s.toUpperCase():"UNPAID",className:"bg-red-100 text-red-800"},et=({data:s,columns:l,itemsPerPage:n=10})=>{const[u,f]=(0,t.useState)(1),c=Math.ceil(s.length/n),N=(u-1)*n,g=N+n,y=s.slice(N,g);return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsx)("tr",{children:l.map((m,h)=>(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:m.header},h))})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((m,h)=>(0,e.jsx)("tr",{children:l.map((C,k)=>(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.render?C.render(m):m[C.accessor]},k))},h))})]})}),c>1&&(0,e.jsxs)("div",{className:"px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,e.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,e.jsx)("button",{onClick:()=>f(m=>Math.max(m-1,1)),disabled:u===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(0,e.jsx)("button",{onClick:()=>f(m=>Math.min(m+1,c)),disabled:u===c,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),(0,e.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,e.jsx)("span",{className:"font-medium",children:N+1})," to"," ",(0,e.jsx)("span",{className:"font-medium",children:Math.min(g,s.length)})," of"," ",(0,e.jsx)("span",{className:"font-medium",children:s.length})," results"]})}),(0,e.jsx)("div",{children:(0,e.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,e.jsx)("button",{onClick:()=>f(m=>Math.max(m-1,1)),disabled:u===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Previous"}),Array.from({length:c},(m,h)=>h+1).map(m=>(0,e.jsx)("button",{onClick:()=>f(m),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${u===m?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:m},m)),(0,e.jsx)("button",{onClick:()=>f(m=>Math.min(m+1,c)),disabled:u===c,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Next"})]})})]})]})]})},Vs=({isOpen:s,onClose:l,user:n,deposits:u,loans:f})=>{if(!s)return null;const c=[{header:"Amount",accessor:"amount",render:g=>`$${g.amount.toFixed(2)}`},{header:"Date",accessor:"timestamp",render:g=>Xe(g.timestamp)}],N=[{header:"Amount",accessor:"amount",render:g=>`$${g.amount.toFixed(2)}`},{header:"Date",accessor:"timestamp",render:g=>Xe(g.timestamp)},{header:"Status",accessor:"paymentStatus",render:g=>{const y=Ws(g.paymentStatus);return(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.className}`,children:y.text})}}];return(0,e.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,e.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,e.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,e.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:l})}),(0,e.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,e.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:(0,e.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:[n.name,"'s Report"]}),(0,e.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:l,children:(0,e.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,e.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,e.jsx)("p",{className:"text-base font-medium",children:n.email||"N/A"})]}),(0,e.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,e.jsx)("p",{className:"text-base font-medium",children:n.phone||"N/A"})]})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Deposits"}),u.length===0?(0,e.jsx)("p",{className:"text-gray-500",children:"No deposits found"}):(0,e.jsx)(et,{data:u,columns:c,itemsPerPage:5})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Loans"}),f.length===0?(0,e.jsx)("p",{className:"text-gray-500",children:"No loans found"}):(0,e.jsx)(et,{data:f,columns:N,itemsPerPage:5})]})]})})]})})},qs=(s,l)=>{const[n,u]=(0,t.useState)(s);return(0,t.useEffect)(()=>{const f=setTimeout(()=>{u(s)},l);return()=>{clearTimeout(f)}},[s,l]),n},Gs=()=>{const s=new Date().getFullYear(),[l,n]=(0,t.useState)(s),[u,f]=(0,t.useState)("all"),[c,N]=(0,t.useState)(""),[g,y]=(0,t.useState)(!1),[m,h]=(0,t.useState)([]),[C,k]=(0,t.useState)({}),[b,E]=(0,t.useState)(null),[T,w]=(0,t.useState)(!1),[x,D]=(0,t.useState)(null),[v,I]=(0,t.useState)(null),[Y,U]=(0,t.useState)(!0),[O,W]=(0,t.useState)(null),[X,p]=(0,t.useState)({deposits:null,loans:null}),[S,L]=(0,t.useState)(1),r=20,a=qs(c,300),d=(0,t.useMemo)(()=>{if(Object.keys(C).length===0)return[];let j=Object.values(C);return a&&(j=_s(j,a)),g&&(j=j.filter(K=>K.unpaidLoansCount>0)),j},[C,a,g]),o=Math.ceil(d.length/r),P=(S-1)*r,M=P+r,_=d.slice(P,M);(0,t.useEffect)(()=>{L(1)},[d.length]);const B=(0,t.useMemo)(()=>x?{labels:x.labels,datasets:x.datasets}:null,[x]),i=(0,t.useMemo)(()=>v?{currentYear:{totalDeposits:v.currentYear.totalDeposits,totalLoans:v.currentYear.totalLoans,monthlyData:v.currentYear.monthlyData},previousYear:{totalDeposits:v.previousYear.totalDeposits,totalLoans:v.previousYear.totalLoans,monthlyData:v.previousYear.monthlyData}}:null,[v]),$=async()=>{try{const j=se(Q(F,"users")),K=await pe(j),le=[];return K.forEach(G=>{le.push({id:G.id,...G.data()})}),h(le),le}catch(j){return console.error("Error fetching users:",j),W("Failed to fetch users data"),[]}},R=async(j,K,le)=>{try{try{const G=se(Q(F,"deposits"),he("userId","in",j),he("timestamp",">=",K),he("timestamp","<=",le),me("timestamp","desc")),ce=await pe(G),te={};return ce.forEach(H=>{const z={id:H.id,...H.data()};te[z.userId]||(te[z.userId]=[]),te[z.userId].push(z)}),te}catch(G){if(G.message.includes("requires an index")){console.warn("Index not found for deposits query, using fallback"),p(z=>({...z,deposits:G.message}));const ce=se(Q(F,"deposits"),he("userId","in",j)),te=await pe(ce),H={};return te.forEach(z=>{const V={id:z.id,...z.data()},re=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);re>=K&&re<=le&&(H[V.userId]||(H[V.userId]=[]),H[V.userId].push(V))}),Object.keys(H).forEach(z=>{H[z].sort((V,re)=>{const fe=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);return(re.timestamp.toDate?re.timestamp.toDate():new Date(re.timestamp))-fe})}),H}else throw G}}catch(G){return console.error("Error fetching deposits:",G),{}}},J=async(j,K,le)=>{try{try{const G=se(Q(F,"loans"),he("userId","in",j),he("timestamp",">=",K),he("timestamp","<=",le),me("timestamp","desc")),ce=await pe(G),te={};return ce.forEach(H=>{const z={id:H.id,...H.data()};te[z.userId]||(te[z.userId]=[]),te[z.userId].push(z)}),te}catch(G){if(G.message.includes("requires an index")){console.warn("Index not found for loans query, using fallback"),p(z=>({...z,loans:G.message}));const ce=se(Q(F,"loans"),he("userId","in",j)),te=await pe(ce),H={};return te.forEach(z=>{const V={id:z.id,...z.data()},re=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);re>=K&&re<=le&&(H[V.userId]||(H[V.userId]=[]),H[V.userId].push(V))}),Object.keys(H).forEach(z=>{H[z].sort((V,re)=>{const fe=V.timestamp.toDate?V.timestamp.toDate():new Date(V.timestamp);return(re.timestamp.toDate?re.timestamp.toDate():new Date(re.timestamp))-fe})}),H}else throw G}}catch(G){return console.error("Error fetching loans:",G),{}}},q=(0,t.useCallback)(async()=>{U(!0),W(null);try{const j=await $(),K={};let le=[],G=[],ce,te;u==="all"?(ce=Ze(l),te=Qe(l)):(ce=xt(l,parseInt(u)),te=ut(l,parseInt(u)));const H=j.map(A=>A.id),z=[];for(let A=0;A<H.length;A+=10)z.push(H.slice(A,A+10));const V=z.map(A=>R(A,ce,te)),re=z.map(A=>J(A,ce,te)),fe=await Promise.all(V),ft=await Promise.all(re),Ye={},Oe={};fe.forEach(A=>{Object.keys(A).forEach(Z=>{Ye[Z]=A[Z],le=[...le,...A[Z]]})}),ft.forEach(A=>{Object.keys(A).forEach(Z=>{Oe[Z]=A[Z],G=[...G,...A[Z]]})}),j.forEach(A=>{const Z=Ye[A.id]||[],We=Oe[A.id]||[],vt=Os(Z,We);K[A.id]={user:A,deposits:Z,loans:We,...vt}});const Ne=Je(le,G,l);D({labels:Ne.map(A=>A.month),datasets:[{label:"Deposits",data:Ne.map(A=>A.deposits),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Loans",data:Ne.map(A=>A.loans),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]});const _e=Ze(l-1),Be=Qe(l-1),yt=z.map(A=>R(A,_e,Be)),jt=z.map(A=>J(A,_e,Be)),bt=await Promise.all(yt),Nt=await Promise.all(jt);let we=[],ve=[];bt.forEach(A=>{Object.keys(A).forEach(Z=>{we=[...we,...A[Z]]})}),Nt.forEach(A=>{Object.keys(A).forEach(Z=>{ve=[...ve,...A[Z]]})});const wt=Je(we,ve,l-1);I({currentYear:{totalDeposits:le.reduce((A,Z)=>A+Z.amount,0),totalLoans:G.reduce((A,Z)=>A+Z.amount,0),monthlyData:Ne},previousYear:{totalDeposits:we.reduce((A,Z)=>A+Z.amount,0),totalLoans:ve.reduce((A,Z)=>A+Z.amount,0),monthlyData:wt}}),k(K),U(!1)}catch(j){console.error("Error fetching user reports:",j),W("Failed to fetch reports data"),U(!1)}},[l,u]),ae=(0,t.useCallback)(j=>{E(j),w(!0)},[]),oe=(0,t.useCallback)(()=>{w(!1),E(null)},[]),ht=(0,t.useCallback)(()=>{const j=Object.values(C);Bs(j,`annual-reports-${l}.csv`)},[C,l]),gt=(0,t.useCallback)(()=>{const j=Object.values(C),K=Ys(j,l);K.success?console.log(`PDF "${K.filename}" generated successfully!`):console.error("Failed to generate PDF:",K.error)},[C,l]);(0,t.useEffect)(()=>{q()},[q]);const pt=()=>{const j=[];for(let K=s;K>=2022;K--)j.push(K);return j};return(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Annual Reports"}),(X.deposits||X.loans)&&(0,e.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,e.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("p",{className:"text-sm text-yellow-700",children:"Some queries require Firestore indexes for optimal performance. We're using fallback queries, but you can create the indexes for better performance:"}),(0,e.jsxs)("div",{className:"mt-2",children:[X.deposits&&(0,e.jsx)("a",{href:"https://console.firebase.google.com/v1/r/project/ecommerce-74229/firestore/indexes?create_composite=ClBwcm9qZWN0cy9lY29tbWVyY2UtNzQyMjkvZGF0YWJhc2VzLyhkZWZhdWx0KS9jb2xsZWN0aW9uR3JvdXBzL2RlcG9zaXRzL2luZGV4ZXMvXxABGgoKBnVzZXJJZBABGg0KCXRpbWVzdGFtcBACGgwKCF9fbmFtZV9fEAI",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800 mr-4",children:"Create Deposits Index"}),X.loans&&(0,e.jsx)("a",{href:"https://console.firebase.google.com/v1/r/project/ecommerce-74229/firestore/indexes?create_composite=Ck1wcm9qZWN0cy9lY29tbWVyY2UtNzQyMjkvZGF0YWJhc2VzLyhkZWZhdWx0KS9jb2xsZWN0aW9uR3JvdXBzL2xvYW5zL2luZGV4ZXMvXxABGgoKBnVzZXJJZBABGg0KCXRpbWVzdGFtcBACGgwKCF9fbmFtZV9fEAI",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"Create Loans Index"})]})]})]})}),(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),(0,e.jsx)("select",{id:"year",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:l,onChange:j=>n(parseInt(j.target.value)),children:pt().map(j=>(0,e.jsx)("option",{value:j,children:j},j))})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"month",className:"block text-sm font-medium text-gray-700 mb-1",children:"Month (Optional)"}),(0,e.jsxs)("select",{id:"month",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:u,onChange:j=>f(j.target.value),children:[(0,e.jsx)("option",{value:"all",children:"All Months"}),(0,e.jsx)("option",{value:"1",children:"January"}),(0,e.jsx)("option",{value:"2",children:"February"}),(0,e.jsx)("option",{value:"3",children:"March"}),(0,e.jsx)("option",{value:"4",children:"April"}),(0,e.jsx)("option",{value:"5",children:"May"}),(0,e.jsx)("option",{value:"6",children:"June"}),(0,e.jsx)("option",{value:"7",children:"July"}),(0,e.jsx)("option",{value:"8",children:"August"}),(0,e.jsx)("option",{value:"9",children:"September"}),(0,e.jsx)("option",{value:"10",children:"October"}),(0,e.jsx)("option",{value:"11",children:"November"}),(0,e.jsx)("option",{value:"12",children:"December"})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search User"}),(0,e.jsx)("input",{type:"text",id:"search",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Name, email, or phone",value:c,onChange:j=>N(j.target.value)})]}),(0,e.jsx)("div",{className:"flex items-end",children:(0,e.jsx)("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:q,children:"Apply Filters"})})]}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("input",{id:"showUnpaid",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:g,onChange:j=>y(j.target.checked)}),(0,e.jsx)("label",{htmlFor:"showUnpaid",className:"ml-2 block text-sm text-gray-700",children:"Show only users with unpaid loans"})]}),(0,e.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",onClick:ht,children:"Export CSV"}),(0,e.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",onClick:gt,children:"Export PDF"})]})]}),i&&(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Year Comparison"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-2",children:"Total Deposits"}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",i.currentYear.totalDeposits.toFixed(2)]}),(0,e.jsxs)("div",{className:"ml-4 text-sm text-gray-500",children:[i.currentYear.totalDeposits>i.previousYear.totalDeposits?(0,e.jsxs)("span",{className:"text-green-600",children:["â†‘ ",((i.currentYear.totalDeposits-i.previousYear.totalDeposits)/i.previousYear.totalDeposits*100).toFixed(1),"%"]}):(0,e.jsxs)("span",{className:"text-red-600",children:["â†“ ",((i.previousYear.totalDeposits-i.currentYear.totalDeposits)/i.previousYear.totalDeposits*100).toFixed(1),"%"]}),(0,e.jsxs)("span",{children:[" vs ",l-1]})]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-2",children:"Total Loans"}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",i.currentYear.totalLoans.toFixed(2)]}),(0,e.jsxs)("div",{className:"ml-4 text-sm text-gray-500",children:[i.currentYear.totalLoans>i.previousYear.totalLoans?(0,e.jsxs)("span",{className:"text-green-600",children:["â†‘ ",((i.currentYear.totalLoans-i.previousYear.totalLoans)/i.previousYear.totalLoans*100).toFixed(1),"%"]}):(0,e.jsxs)("span",{className:"text-red-600",children:["â†“ ",((i.previousYear.totalLoans-i.currentYear.totalLoans)/i.previousYear.totalLoans*100).toFixed(1),"%"]}),(0,e.jsxs)("span",{children:[" vs ",l-1]})]})]})]})]})]}),B&&(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Deposits vs Loans by Month"}),(0,e.jsx)("div",{className:"h-64",children:(0,e.jsx)(Gt,{data:B,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}}}})})]}),(0,e.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,e.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,e.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Users Summary"})}),Y?(0,e.jsx)("div",{className:"px-6 py-4 text-center",children:(0,e.jsx)("p",{className:"text-gray-500",children:"Loading reports..."})}):O?(0,e.jsx)("div",{className:"px-6 py-4 text-center",children:(0,e.jsx)("p",{className:"text-red-500",children:O})}):d.length===0?(0,e.jsx)("div",{className:"px-6 py-4 text-center",children:(0,e.jsx)("p",{className:"text-gray-500",children:"No users found"})}):(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Deposits"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Loans"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid Loans"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unpaid Loans"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(j=>(0,e.jsxs)("tr",{className:j.unpaidLoansCount>0?"border-l-4 border-red-500":"",children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,e.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-gray-600 font-medium",children:j.user.name?j.user.name.charAt(0).toUpperCase():"U"})})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:j.user.name||"Unknown User"}),(0,e.jsx)("div",{className:"text-sm text-gray-500",children:j.user.email||"N/A"})]})]})}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",j.totalDeposits.toFixed(2)]}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",j.totalLoans.toFixed(2)]}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.paidLoansCount}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.unpaidLoansCount>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:j.unpaidLoansCount})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,e.jsx)("button",{onClick:()=>ae(j.user.id),className:"text-blue-600 hover:text-blue-900",children:"View Details"})})]},j.user.id))})]})}),o>1&&(0,e.jsxs)("div",{className:"px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,e.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,e.jsx)("button",{onClick:()=>L(j=>Math.max(j-1,1)),disabled:S===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(0,e.jsx)("button",{onClick:()=>L(j=>Math.min(j+1,o)),disabled:S===o,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),(0,e.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,e.jsx)("span",{className:"font-medium",children:P+1})," to"," ",(0,e.jsx)("span",{className:"font-medium",children:Math.min(M,d.length)})," of"," ",(0,e.jsx)("span",{className:"font-medium",children:d.length})," results"]})}),(0,e.jsx)("div",{children:(0,e.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,e.jsx)("button",{onClick:()=>L(j=>Math.max(j-1,1)),disabled:S===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Previous"}),Array.from({length:o},(j,K)=>K+1).map(j=>(0,e.jsx)("button",{onClick:()=>L(j),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${S===j?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:j},j)),(0,e.jsx)("button",{onClick:()=>L(j=>Math.min(j+1,o)),disabled:S===o,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Next"})]})})]})]})]})]}),b&&(0,e.jsx)(Vs,{isOpen:T,onClose:oe,user:C[b].user,deposits:C[b].deposits,loans:C[b].loans})]})},Ks=Gs,Hs=({onAccessGranted:s})=>{const[l,n]=(0,t.useState)(""),[u,f]=(0,t.useState)(!1),[c,N]=(0,t.useState)(""),[g,y]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),[C,k]=(0,t.useState)(""),[b,E]=(0,t.useState)(""),[T,w]=(0,t.useState)(""),[x,D]=(0,t.useState)(!1),[v,I]=(0,t.useState)(!1),[Y,U]=(0,t.useState)(!1),O="Communitysavings4@gmail.com";(0,t.useEffect)(()=>{if(b){I(!0);const r=setTimeout(()=>{I(!1),setTimeout(()=>E(""),500)},3e3);return()=>clearTimeout(r)}},[b]),(0,t.useEffect)(()=>{if(T){U(!0);const r=setTimeout(()=>{U(!1),setTimeout(()=>{w(""),m&&h(!1)},500)},3e3);return()=>clearTimeout(r)}},[T,m]);const W=async r=>{r.preventDefault(),D(!0);try{const a=ee(F,"adminSettings","security"),d=await Se(a);if(d.exists()){const{password:o}=d.data();l===o?s():E("Incorrect password. Please try again.")}else E("Admin settings not found. Please contact support.")}catch(a){console.error("Error fetching admin password:",a),E("Failed to verify password. Please try again.")}finally{D(!1)}},X=async r=>{r.preventDefault(),D(!0);try{const a=cs(),d=new Date;d.setMinutes(d.getMinutes()+15),await rt(ee(F,"passwordResets",a),{token:a,expiresAt:d,used:!1});const o=`${window.location.origin}/admin-login?reset=true&token=${a}`;await xs.send("service_rbtk5y8","template_i85brpa",{to_email:O,reset_link:o},"zcAI9wNXtOd3ooJ67"),w("Password reset email sent! Check your inbox."),setTimeout(()=>{f(!1)},3e3)}catch(a){console.error("Error sending password reset email:",a),E("Failed to send reset email. Please try again.")}finally{D(!1)}},p=async r=>{if(r.preventDefault(),c!==g){E("Passwords do not match.");return}if(c.length<6){E("Password must be at least 6 characters long.");return}D(!0);try{const a=ee(F,"adminSettings","security");await de(a,{password:c});const d=ee(F,"passwordResets",C);await de(d,{used:!0}),w("Password updated successfully!"),N(""),y(""),setTimeout(()=>{window.location.href="/admin-login"},3e3)}catch(a){console.error("Error updating password:",a),E("Failed to update password. Please try again.")}finally{D(!1)}};return(0,t.useEffect)(()=>{const r=new URLSearchParams(window.location.search),a=r.get("reset"),d=r.get("token");a==="true"&&d&&(async()=>{try{const P=ee(F,"passwordResets",d),M=await Se(P);if(!M.exists()){E("Invalid or expired reset link.");return}const _=M.data();if(_.used||new Date>_.expiresAt.toDate()){E("This reset link has expired.");return}h(!0),k(d)}catch(P){console.error("Error verifying reset token:",P),E("Failed to verify reset link.")}})()},[]),m?(0,e.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-96 max-w-md",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800",children:"Reset Admin Password"}),(0,e.jsxs)("form",{onSubmit:p,children:[(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,e.jsx)("input",{type:"password",id:"newPassword",value:c,onChange:r=>N(r.target.value),className:"border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full transition-colors",required:!0})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,e.jsx)("input",{type:"password",id:"confirmPassword",value:g,onChange:r=>y(r.target.value),className:"border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full transition-colors",required:!0})]}),(0,e.jsx)("button",{type:"submit",disabled:x,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md w-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Updating...":"Reset Password"})]}),(0,e.jsx)("div",{className:"mt-4 text-center",children:(0,e.jsx)("button",{onClick:()=>h(!1),className:"text-blue-600 text-sm hover:underline",children:"Back to login"})}),b&&(0,e.jsx)("div",{className:`text-red-500 mt-4 transition-opacity duration-500 ${v?"opacity-100":"opacity-0"}`,children:b}),T&&(0,e.jsx)("div",{className:`text-green-500 mt-4 transition-opacity duration-500 ${Y?"opacity-100":"opacity-0"}`,children:T})]})}):(0,e.jsxs)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:[(0,e.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-96 max-w-md",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800",children:"Admin Access"}),(0,e.jsxs)("form",{onSubmit:W,children:[(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,e.jsx)("input",{type:"password",id:"password",value:l,onChange:r=>n(r.target.value),className:"border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full transition-colors",required:!0})]}),(0,e.jsx)("button",{type:"submit",disabled:x,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md w-full mt-4 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Verifying...":"Access Admin Dashboard"})]}),b&&(0,e.jsx)("div",{className:`text-red-500 mt-2 transition-opacity duration-500 ${v?"opacity-100":"opacity-0"}`,children:b}),T&&(0,e.jsx)("div",{className:`text-green-500 mt-2 transition-opacity duration-500 ${Y?"opacity-100":"opacity-0"}`,children:T}),(0,e.jsx)("div",{className:"text-blue-600 text-sm mt-3 hover:underline cursor-pointer text-center",onClick:()=>f(!0),children:"Forgot password?"})]}),u&&(0,e.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,e.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-8 w-96 max-w-md",children:[(0,e.jsx)("h2",{className:"text-xl font-bold text-center mb-4 text-gray-800",children:"Reset Password"}),(0,e.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"A reset link will be sent to the admin email."}),(0,e.jsx)("div",{className:"mb-6 p-3 bg-gray-100 rounded-md",children:(0,e.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,e.jsx)("span",{className:"font-medium",children:"Email:"})," ",O]})}),(0,e.jsx)("form",{onSubmit:X,children:(0,e.jsxs)("div",{className:"flex space-x-3",children:[(0,e.jsx)("button",{type:"button",onClick:()=>f(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-md w-1/2 transition-colors",children:"Cancel"}),(0,e.jsx)("button",{type:"submit",disabled:x,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md w-1/2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Sending...":"Send Reset Link"})]})}),b&&(0,e.jsx)("div",{className:`text-red-500 mt-4 transition-opacity duration-500 ${v?"opacity-100":"opacity-0"}`,children:b}),T&&(0,e.jsx)("div",{className:`text-green-500 mt-4 transition-opacity duration-500 ${Y?"opacity-100":"opacity-0"}`,children:T})]})})]})},Zs=Hs,Qs=()=>{const s=be(),l=()=>{s("/")};return(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[(0,e.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100",children:(0,e.jsx)(es,{className:"h-10 w-10 text-red-600"})}),(0,e.jsx)("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Account Blocked"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:"Your account has been blocked. Contact support if this is a mistake."}),(0,e.jsx)("button",{onClick:l,className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Back to Home"})]})})},Xs=Qs,Js=()=>{const[s,l]=(0,t.useState)([]),[n,u]=(0,t.useState)(!0),[f,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{const y=se(Q(F,"users")),m=ie(y,h=>{try{const C=h.docs.map(k=>({id:k.id,...k.data()})).sort((k,b)=>k.createdAt&&b.createdAt?b.createdAt.toMillis()-k.createdAt.toMillis():k.createdAt?-1:b.createdAt?1:0);l(C),u(!1)}catch(C){console.error("Error processing users snapshot:",C),c("Failed to process users data"),u(!1)}},h=>{console.error("Error fetching users:",h),c("Failed to fetch users"),u(!1)});return()=>m()},[]);const N=async(y,m)=>{try{const h=ee(F,"users",y);await de(h,{isBlocked:!m})}catch(h){console.error("Error updating user block status:",h),c("Failed to update user status")}},g=y=>{if(!y)return"N/A";try{return y.toDate().toLocaleDateString()}catch{return"Invalid Date"}};return n?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,e.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]})}):f?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md w-full text-center",children:[(0,e.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100",children:(0,e.jsx)(Ge,{className:"h-10 w-10 text-red-600"})}),(0,e.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Error Loading Users"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:f})]})}):(0,e.jsxs)("div",{className:"p-4 md:p-6",children:[(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,e.jsx)("p",{className:"mt-1 text-gray-600",children:"Manage user accounts and block/unblock users"})]}),(0,e.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:(0,e.jsxs)("div",{className:"overflow-x-auto",children:[(0,e.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Join Date"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(y=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,e.jsx)("span",{className:"text-indigo-800 font-medium",children:y.name?.charAt(0)?.toUpperCase()||"U"})}),(0,e.jsx)("div",{className:"ml-4",children:(0,e.jsx)("div",{className:"text-sm font-medium text-gray-900",children:y.name||"N/A"})})]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("div",{className:"text-sm text-gray-900",children:y.email||"N/A"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,e.jsx)(ds,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),g(y.createdAt)]})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.isBlocked?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y.isBlocked?"Blocked":"Active"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,e.jsx)("button",{onClick:()=>N(y.id,y.isBlocked),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors duration-200 ${y.isBlocked?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:y.isBlocked?"Unblock":"Block"})})]},y.id))})]}),s.length===0&&(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)(Ge,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,e.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),(0,e.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"There are no users in the system yet."})]})]})})]})},ea=Js;const ta=async()=>{try{const s=ge.currentUser;if(!s)return!1;const l=ee(F,"users",s.uid),n=await Se(l);return n.exists()?n.data().isBlocked===!0:!1}catch(s){return console.error("Error checking user block status:",s),!1}},sa=async s=>{try{await Re(ge),s&&s("/blocked")}catch(l){console.error("Error signing out blocked user:",l)}},aa=async s=>{const l=await ta();return l&&await sa(s),l};var ra=({children:s})=>{const l=be(),{currentUser:n}=ue();return(0,t.useEffect)(()=>{const u=async()=>{if(n)try{await aa(l)}catch(c){console.error("Error checking user block status:",c)}};u();const f=setInterval(u,6e4);return()=>clearInterval(f)},[n,l]),(0,e.jsx)(e.Fragment,{children:s})},na=ra;function ia({children:s}){const{currentUser:l}=ue();return l?s:(0,e.jsx)(at,{to:"/login"})}function tt({children:s}){const{currentUser:l}=ue();return l?(0,e.jsx)(at,{to:"/dashboard"}):s}function la(){const[s,l]=(0,t.useState)(!1);return s?(0,e.jsxs)(At,{children:[(0,e.jsx)(ne,{path:"/login",element:(0,e.jsx)(tt,{children:(0,e.jsx)(js,{})})}),(0,e.jsx)(ne,{path:"/signup",element:(0,e.jsx)(tt,{children:(0,e.jsx)(bs,{})})}),(0,e.jsx)(ne,{path:"/blocked",element:(0,e.jsx)(Xs,{})}),(0,e.jsxs)(ne,{path:"/",element:(0,e.jsx)(ia,{children:(0,e.jsx)(na,{children:(0,e.jsx)(Ps,{})})}),children:[(0,e.jsx)(ne,{index:!0,element:(0,e.jsx)(He,{})}),(0,e.jsx)(ne,{path:"profile",element:(0,e.jsx)(ws,{})}),(0,e.jsx)(ne,{path:"dashboard",element:(0,e.jsx)(He,{})}),(0,e.jsx)(ne,{path:"deposits",element:(0,e.jsx)(Cs,{})}),(0,e.jsx)(ne,{path:"loans",element:(0,e.jsx)(Ts,{})}),(0,e.jsx)(ne,{path:"payback",element:(0,e.jsx)(Ds,{})}),(0,e.jsx)(ne,{path:"users",element:(0,e.jsx)(Rs,{})}),(0,e.jsx)(ne,{path:"admin-users",element:(0,e.jsx)(ea,{})}),(0,e.jsx)(ne,{path:"settings",element:(0,e.jsx)($s,{})}),(0,e.jsx)(ne,{path:"chat",element:(0,e.jsx)(Es,{})}),(0,e.jsx)(ne,{path:"annual-reports",element:(0,e.jsx)(Ks,{})})]})]}):(0,e.jsx)(Zs,{onAccessGranted:()=>l(!0)})}var oa=la;(0,fs.createRoot)(document.getElementById("root")).render((0,e.jsx)(t.StrictMode,{children:(0,e.jsx)(ys,{children:(0,e.jsx)(Et,{children:(0,e.jsx)(oa,{})})})}));
